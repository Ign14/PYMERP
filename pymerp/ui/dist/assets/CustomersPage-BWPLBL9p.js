import{j as s,F as o}from"./index-BpLAP759.js";import{r as c}from"./react-BYfE7jJl.js";import{u as l}from"./useMutation-CPedeap3.js";import{P as d}from"./PageHeader-ECmiVUlh.js";import{C as m}from"./CustomersCard-BqHaGf9V.js";function p(){const a=c.useRef(null),e=l({queryKey:["customers","segments"],queryFn:o,staleTime:6e4}),t=e.data??[],i=t.reduce((r,n)=>r+n.total,0);return s.jsxs("div",{className:"page-section",children:[s.jsx(d,{title:"Clientes",description:"Administra fichas, contactos y geolocalizaci�n de clientes.",actions:s.jsx("button",{className:"btn",onClick:()=>a.current?.focusCreate(),children:"+ Nuevo cliente"})}),s.jsxs("section",{className:"responsive-grid",children:[s.jsx("div",{className:"card",children:s.jsx(m,{ref:a})}),s.jsxs("div",{className:"card",children:[s.jsx("h3",{children:"Segmentaci�n"}),e.isLoading&&s.jsx("p",{children:"Loading..."}),e.isError&&s.jsx("p",{className:"error",children:e.error?.message??"No se pudieron cargar los segmentos"}),!e.isLoading&&!e.isError&&s.jsxs("ul",{className:"segment-list",children:[t.map(r=>s.jsxs("li",{children:[s.jsxs("div",{children:[s.jsx("strong",{children:r.segment}),s.jsxs("p",{className:"muted small",children:[r.total," clientes"]})]}),s.jsx("span",{className:"stat-trend",children:i?`${Math.round(r.total/i*100)}%`:"-"})]},r.segment)),t.length===0&&s.jsx("li",{className:"muted",children:"Sin segmentos registrados"})]})]})]})]})}export{p as default};
