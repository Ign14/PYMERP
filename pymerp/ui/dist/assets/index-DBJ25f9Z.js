const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/DashboardPage-NACPwGVH.js","assets/react-D8kvZI4c.js","assets/useQuery-DOGxExcK.js","assets/PageHeader-C82fAhp-.js","assets/charts-BH7DIlZU.js","assets/SalesPage-BmYVm5FE.js","assets/Modal-BqzbBRVa.js","assets/customersUtils-CCyDH5By.js","assets/useDebouncedValue-DnjRONvw.js","assets/problemDetail-BUp5Xn9a.js","assets/table-DbsuG4jc.js","assets/currency-HwQAg_Xa.js","assets/PurchasesPage-Cezg4E7L.js","assets/InventoryPage-Dfcalkrg.js","assets/InventoryMovementsPage-CYekkjFq.js","assets/CustomersPage-BV_qc14R.js","assets/SuppliersPage-DuH3X4OY.js","assets/FinancesPage-klKUhVfR.js","assets/ReportsPage-D0t02EMA.js","assets/SettingsPage-TSniiZF3.js"])))=>i.map(i=>d[i]);
import{a as ps,b as hs,g as ms,r as S,u as fn,N as ys,O as pn,d as hn,e as gs,f as te,h as Fe,R as bs,B as vs}from"./react-D8kvZI4c.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();var st={exports:{}},we={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dt;function ws(){if(Dt)return we;Dt=1;var e=ps(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,r=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function o(i,c,u){var l,p={},w=null,P=null;u!==void 0&&(w=""+u),c.key!==void 0&&(w=""+c.key),c.ref!==void 0&&(P=c.ref);for(l in c)s.call(c,l)&&!a.hasOwnProperty(l)&&(p[l]=c[l]);if(i&&i.defaultProps)for(l in c=i.defaultProps,c)p[l]===void 0&&(p[l]=c[l]);return{$$typeof:t,type:i,key:w,ref:P,props:p,_owner:r.current}}return we.Fragment=n,we.jsx=o,we.jsxs=o,we}var kt;function Ss(){return kt||(kt=1,st.exports=ws()),st.exports}var f=Ss(),Le={},It;function As(){if(It)return Le;It=1;var e=hs();return Le.createRoot=e.createRoot,Le.hydrateRoot=e.hydrateRoot,Le}var Ps=As();const Es=ms(Ps);var Ce=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Cs={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Os=class{#e=Cs;#n=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,t){return this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}},ct=new Os;function xs(e){setTimeout(e,0)}var Ve=typeof window>"u"||"Deno"in globalThis;function K(){}function Rs(e,t){return typeof e=="function"?e(t):e}function Ts(e){return typeof e=="number"&&e>=0&&e!==1/0}function Ns(e,t){return Math.max(e+(t||0)-Date.now(),0)}function ut(e,t){return typeof e=="function"?e(t):e}function Ds(e,t){return typeof e=="function"?e(t):e}function Ft(e,t){const{type:n="all",exact:s,fetchStatus:r,predicate:a,queryKey:o,stale:i}=e;if(o){if(s){if(t.queryHash!==St(o,t.options))return!1}else if(!Pe(t.queryKey,o))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof i=="boolean"&&t.isStale()!==i||r&&r!==t.state.fetchStatus||a&&!a(t))}function Lt(e,t){const{exact:n,status:s,predicate:r,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(n){if(oe(t.options.mutationKey)!==oe(a))return!1}else if(!Pe(t.options.mutationKey,a))return!1}return!(s&&t.state.status!==s||r&&!r(t))}function St(e,t){return(t?.queryKeyHashFn||oe)(e)}function oe(e){return JSON.stringify(e,(t,n)=>lt(n)?Object.keys(n).sort().reduce((s,r)=>(s[r]=n[r],s),{}):n)}function Pe(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>Pe(e[n],t[n])):!1}var ks=Object.prototype.hasOwnProperty;function mn(e,t){if(e===t)return e;const n=jt(e)&&jt(t);if(!n&&!(lt(e)&&lt(t)))return t;const r=(n?e:Object.keys(e)).length,a=n?t:Object.keys(t),o=a.length,i=n?new Array(o):{};let c=0;for(let u=0;u<o;u++){const l=n?u:a[u],p=e[l],w=t[l];if(p===w){i[l]=p,(n?u<r:ks.call(e,l))&&c++;continue}if(p===null||w===null||typeof p!="object"||typeof w!="object"){i[l]=w;continue}const P=mn(p,w);i[l]=P,P===p&&c++}return r===o&&c===r?e:i}function Is(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function jt(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function lt(e){if(!Mt(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!Mt(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Mt(e){return Object.prototype.toString.call(e)==="[object Object]"}function Fs(e){return new Promise(t=>{ct.setTimeout(t,e)})}function Ls(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?mn(e,t):t}function oi(e){return e}function js(e,t,n=0){const s=[...e,t];return n&&s.length>n?s.slice(1):s}function Ms(e,t,n=0){const s=[t,...e];return n&&s.length>n?s.slice(0,-1):s}var At=Symbol();function yn(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===At?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function _s(e,t){return typeof e=="function"?e(...t):!!e}var qs=class extends Ce{#e;#n;#t;constructor(){super(),this.#t=e=>{if(!Ve&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#n||this.setEventListener(this.#t)}onUnsubscribe(){this.hasListeners()||(this.#n?.(),this.#n=void 0)}setEventListener(e){this.#t=e,this.#n?.(),this.#n=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},gn=new qs;function Us(){let e,t;const n=new Promise((r,a)=>{e=r,t=a});n.status="pending",n.catch(()=>{});function s(r){Object.assign(n,r),delete n.resolve,delete n.reject}return n.resolve=r=>{s({status:"fulfilled",value:r}),e(r)},n.reject=r=>{s({status:"rejected",reason:r}),t(r)},n}var Bs=xs;function $s(){let e=[],t=0,n=i=>{i()},s=i=>{i()},r=Bs;const a=i=>{t?e.push(i):r(()=>{n(i)})},o=()=>{const i=e;e=[],i.length&&r(()=>{s(()=>{i.forEach(c=>{n(c)})})})};return{batch:i=>{let c;t++;try{c=i()}finally{t--,t||o()}return c},batchCalls:i=>(...c)=>{a(()=>{i(...c)})},schedule:a,setNotifyFunction:i=>{n=i},setBatchNotifyFunction:i=>{s=i},setScheduler:i=>{r=i}}}var L=$s(),zs=class extends Ce{#e=!0;#n;#t;constructor(){super(),this.#t=e=>{if(!Ve&&window.addEventListener){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#n||this.setEventListener(this.#t)}onUnsubscribe(){this.hasListeners()||(this.#n?.(),this.#n=void 0)}setEventListener(e){this.#t=e,this.#n?.(),this.#n=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(n=>{n(e)}))}isOnline(){return this.#e}},Be=new zs;function Ks(e){return Math.min(1e3*2**e,3e4)}function bn(e){return(e??"online")==="online"?Be.isOnline():!0}var dt=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function vn(e){let t=!1,n=0,s;const r=Us(),a=()=>r.status!=="pending",o=b=>{if(!a()){const g=new dt(b);w(g),e.onCancel?.(g)}},i=()=>{t=!0},c=()=>{t=!1},u=()=>gn.isFocused()&&(e.networkMode==="always"||Be.isOnline())&&e.canRun(),l=()=>bn(e.networkMode)&&e.canRun(),p=b=>{a()||(s?.(),r.resolve(b))},w=b=>{a()||(s?.(),r.reject(b))},P=()=>new Promise(b=>{s=g=>{(a()||u())&&b(g)},e.onPause?.()}).then(()=>{s=void 0,a()||e.onContinue?.()}),h=()=>{if(a())return;let b;const g=n===0?e.initialPromise:void 0;try{b=g??e.fn()}catch(x){b=Promise.reject(x)}Promise.resolve(b).then(p).catch(x=>{if(a())return;const C=e.retry??(Ve?0:3),R=e.retryDelay??Ks,I=typeof R=="function"?R(n,x):R,D=C===!0||typeof C=="number"&&n<C||typeof C=="function"&&C(n,x);if(t||!D){w(x);return}n++,e.onFail?.(n,x),Fs(I).then(()=>u()?void 0:P()).then(()=>{t?w(x):h()})})};return{promise:r,status:()=>r.status,cancel:o,continue:()=>(s?.(),r),cancelRetry:i,continueRetry:c,canStart:l,start:()=>(l()?h():P().then(h),r)}}var wn=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Ts(this.gcTime)&&(this.#e=ct.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Ve?1/0:300*1e3))}clearGcTimeout(){this.#e&&(ct.clearTimeout(this.#e),this.#e=void 0)}},Hs=class extends wn{#e;#n;#t;#r;#s;#o;#i;constructor(e){super(),this.#i=!1,this.#o=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#r=e.client,this.#t=this.#r.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=_t(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#s?.promise}setOptions(e){if(this.options={...this.#o,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=_t(this.options);t.data!==void 0&&(this.setData(t.data,{updatedAt:t.dataUpdatedAt,manual:!0}),this.#e=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#t.remove(this)}setData(e,t){const n=Ls(this.state.data,e,this.options);return this.#a({data:n,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),n}setState(e,t){this.#a({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#s?.promise;return this.#s?.cancel(e),t?t.then(K).catch(K):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>Ds(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===At||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>ut(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Ns(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#s?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#s?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#s&&(this.#i?this.#s.cancel({revert:!0}):this.#s.cancelRetry()),this.scheduleGc()),this.#t.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#s?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#s)return this.#s.continueRetry(),this.#s.promise}if(e&&this.setOptions(e),!this.options.queryFn){const i=this.observers.find(c=>c.options.queryFn);i&&this.setOptions(i.options)}const n=new AbortController,s=i=>{Object.defineProperty(i,"signal",{enumerable:!0,get:()=>(this.#i=!0,n.signal)})},r=()=>{const i=yn(this.options,t),u=(()=>{const l={client:this.#r,queryKey:this.queryKey,meta:this.meta};return s(l),l})();return this.#i=!1,this.options.persister?this.options.persister(i,u,this):i(u)},o=(()=>{const i={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:r};return s(i),i})();this.options.behavior?.onFetch(o,this),this.#n=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==o.fetchOptions?.meta)&&this.#a({type:"fetch",meta:o.fetchOptions?.meta}),this.#s=vn({initialPromise:t?.initialPromise,fn:o.fetchFn,onCancel:i=>{i instanceof dt&&i.revert&&this.setState({...this.#n,fetchStatus:"idle"}),n.abort()},onFail:(i,c)=>{this.#a({type:"failed",failureCount:i,error:c})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0});try{const i=await this.#s.start();if(i===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(i),this.#t.config.onSuccess?.(i,this),this.#t.config.onSettled?.(i,this.state.error,this),i}catch(i){if(i instanceof dt){if(i.silent)return this.#s.promise;if(i.revert){if(this.state.data===void 0)throw i;return this.state.data}}throw this.#a({type:"error",error:i}),this.#t.config.onError?.(i,this),this.#t.config.onSettled?.(this.state.data,i,this),i}finally{this.scheduleGc()}}#a(e){const t=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Vs(n.data,this.options),fetchMeta:e.meta??null};case"success":const s={...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#n=e.manual?s:void 0,s;case"error":const r=e.error;return{...n,error:r,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=t(this.state),L.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#t.notify({query:this,type:"updated",action:e})})}};function Vs(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:bn(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function _t(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,s=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function qt(e){return{onFetch:(t,n)=>{const s=t.options,r=t.fetchOptions?.meta?.fetchMore?.direction,a=t.state.data?.pages||[],o=t.state.data?.pageParams||[];let i={pages:[],pageParams:[]},c=0;const u=async()=>{let l=!1;const p=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(t.signal.aborted?l=!0:t.signal.addEventListener("abort",()=>{l=!0}),t.signal)})},w=yn(t.options,t.fetchOptions),P=async(h,b,g)=>{if(l)return Promise.reject();if(b==null&&h.pages.length)return Promise.resolve(h);const C=(()=>{const $={client:t.client,queryKey:t.queryKey,pageParam:b,direction:g?"backward":"forward",meta:t.options.meta};return p($),$})(),R=await w(C),{maxPages:I}=t.options,D=g?Ms:js;return{pages:D(h.pages,R,I),pageParams:D(h.pageParams,b,I)}};if(r&&a.length){const h=r==="backward",b=h?Sn:ft,g={pages:a,pageParams:o},x=b(s,g);i=await P(g,x,h)}else{const h=e??a.length;do{const b=c===0?o[0]??s.initialPageParam:ft(s,i);if(c>0&&b==null)break;i=await P(i,b),c++}while(c<h)}return i};t.options.persister?t.fetchFn=()=>t.options.persister?.(u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n):t.fetchFn=u}}}function ft(e,{pages:t,pageParams:n}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,n[s],n):void 0}function Sn(e,{pages:t,pageParams:n}){return t.length>0?e.getPreviousPageParam?.(t[0],t,n[0],n):void 0}function ii(e,t){return t?ft(e,t)!=null:!1}function ci(e,t){return!t||!e.getPreviousPageParam?!1:Sn(e,t)!=null}var Qs=class extends wn{#e;#n;#t;#r;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#t=e.mutationCache,this.#n=[],this.state=e.state||An(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#n.includes(e)||(this.#n.push(e),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#n=this.#n.filter(t=>t!==e),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#n.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#s({type:"continue"})},n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#r=vn({fn:()=>this.options.mutationFn?this.options.mutationFn(e,n):Promise.reject(new Error("No mutationFn found")),onFail:(a,o)=>{this.#s({type:"failed",failureCount:a,error:o})},onPause:()=>{this.#s({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const s=this.state.status==="pending",r=!this.#r.canStart();try{if(s)t();else{this.#s({type:"pending",variables:e,isPaused:r}),await this.#t.config.onMutate?.(e,this,n);const o=await this.options.onMutate?.(e,n);o!==this.state.context&&this.#s({type:"pending",context:o,variables:e,isPaused:r})}const a=await this.#r.start();return await this.#t.config.onSuccess?.(a,e,this.state.context,this,n),await this.options.onSuccess?.(a,e,this.state.context,n),await this.#t.config.onSettled?.(a,null,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(a,null,e,this.state.context,n),this.#s({type:"success",data:a}),a}catch(a){try{throw await this.#t.config.onError?.(a,e,this.state.context,this,n),await this.options.onError?.(a,e,this.state.context,n),await this.#t.config.onSettled?.(void 0,a,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(void 0,a,e,this.state.context,n),a}finally{this.#s({type:"error",error:a})}}finally{this.#t.runNext(this)}}#s(e){const t=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),L.batch(()=>{this.#n.forEach(n=>{n.onMutationUpdate(e)}),this.#t.notify({mutation:this,type:"updated",action:e})})}};function An(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ws=class extends Ce{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#n=new Map,this.#t=0}#e;#n;#t;build(e,t,n){const s=new Qs({client:e,mutationCache:this,mutationId:++this.#t,options:e.defaultMutationOptions(t),state:n});return this.add(s),s}add(e){this.#e.add(e);const t=je(e);if(typeof t=="string"){const n=this.#n.get(t);n?n.push(e):this.#n.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const t=je(e);if(typeof t=="string"){const n=this.#n.get(t);if(n)if(n.length>1){const s=n.indexOf(e);s!==-1&&n.splice(s,1)}else n[0]===e&&this.#n.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=je(e);if(typeof t=="string"){const s=this.#n.get(t)?.find(r=>r.state.status==="pending");return!s||s===e}else return!0}runNext(e){const t=je(e);return typeof t=="string"?this.#n.get(t)?.find(s=>s!==e&&s.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){L.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#n.clear()})}getAll(){return Array.from(this.#e)}find(e){const t={exact:!0,...e};return this.getAll().find(n=>Lt(t,n))}findAll(e={}){return this.getAll().filter(t=>Lt(e,t))}notify(e){L.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return L.batch(()=>Promise.all(e.map(t=>t.continue().catch(K))))}};function je(e){return e.options.scope?.id}var Gs=class extends Ce{#e;#n=void 0;#t;#r;constructor(t,n){super(),this.#e=t,this.setOptions(n),this.bindMethods(),this.#s()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const n=this.options;this.options=this.#e.defaultMutationOptions(t),Is(this.options,n)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#t,observer:this}),n?.mutationKey&&this.options.mutationKey&&oe(n.mutationKey)!==oe(this.options.mutationKey)?this.reset():this.#t?.state.status==="pending"&&this.#t.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#t?.removeObserver(this)}onMutationUpdate(t){this.#s(),this.#o(t)}getCurrentResult(){return this.#n}reset(){this.#t?.removeObserver(this),this.#t=void 0,this.#s(),this.#o()}mutate(t,n){return this.#r=n,this.#t?.removeObserver(this),this.#t=this.#e.getMutationCache().build(this.#e,this.options),this.#t.addObserver(this),this.#t.execute(t)}#s(){const t=this.#t?.state??An();this.#n={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#o(t){L.batch(()=>{if(this.#r&&this.hasListeners()){const n=this.#n.variables,s=this.#n.context,r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};t?.type==="success"?(this.#r.onSuccess?.(t.data,n,s,r),this.#r.onSettled?.(t.data,null,n,s,r)):t?.type==="error"&&(this.#r.onError?.(t.error,n,s,r),this.#r.onSettled?.(void 0,t.error,n,s,r))}this.listeners.forEach(n=>{n(this.#n)})})}},Js=class extends Ce{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,n){const s=t.queryKey,r=t.queryHash??St(s,t);let a=this.get(r);return a||(a=new Hs({client:e,queryKey:s,queryHash:r,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(s)}),this.add(a)),a}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){L.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(n=>Ft(t,n))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(n=>Ft(e,n)):t}notify(e){L.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){L.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){L.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Ys=class{#e;#n;#t;#r;#s;#o;#i;#a;constructor(e={}){this.#e=e.queryCache||new Js,this.#n=e.mutationCache||new Ws,this.#t=e.defaultOptions||{},this.#r=new Map,this.#s=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#i=gn.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=Be.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#i?.(),this.#i=void 0,this.#a?.(),this.#a=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#n.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=this.#e.build(this,t),s=n.state.data;return s===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(ut(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(s))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:n})=>{const s=n.data;return[t,s]})}setQueryData(e,t,n){const s=this.defaultQueryOptions({queryKey:e}),a=this.#e.get(s.queryHash)?.state.data,o=Rs(t,a);if(o!==void 0)return this.#e.build(this,s).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return L.batch(()=>this.#e.findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,n)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;L.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=this.#e;return L.batch(()=>(n.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},s=L.batch(()=>this.#e.findAll(e).map(r=>r.cancel(n)));return Promise.all(s).then(K).catch(K)}invalidateQueries(e,t={}){return L.batch(()=>(this.#e.findAll(e).forEach(n=>{n.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},s=L.batch(()=>this.#e.findAll(e).filter(r=>!r.isDisabled()&&!r.isStatic()).map(r=>{let a=r.fetch(void 0,n);return n.throwOnError||(a=a.catch(K)),r.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(s).then(K)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=this.#e.build(this,t);return n.isStaleByTime(ut(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(K).catch(K)}fetchInfiniteQuery(e){return e.behavior=qt(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(K).catch(K)}ensureInfiniteQueryData(e){return e.behavior=qt(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Be.isOnline()?this.#n.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#n}getDefaultOptions(){return this.#t}setDefaultOptions(e){this.#t=e}setQueryDefaults(e,t){this.#r.set(oe(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#r.values()],n={};return t.forEach(s=>{Pe(e,s.queryKey)&&Object.assign(n,s.defaultOptions)}),n}setMutationDefaults(e,t){this.#s.set(oe(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#s.values()],n={};return t.forEach(s=>{Pe(e,s.mutationKey)&&Object.assign(n,s.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#t.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=St(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===At&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#t.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#n.clear()}},Pn=S.createContext(void 0),Xs=e=>{const t=S.useContext(Pn);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Zs=({client:e,children:t})=>(S.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),f.jsx(Pn.Provider,{value:e,children:t}));function Ut(e,t){const n=Xs(),[s]=S.useState(()=>new Gs(n,e));S.useEffect(()=>{s.setOptions(e)},[s,e]);const r=S.useSyncExternalStore(S.useCallback(o=>s.subscribe(L.batchCalls(o)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),a=S.useCallback((o,i)=>{s.mutate(o,i).catch(K)},[s]);if(r.error&&_s(s.options.throwOnError,[r.error]))throw r.error;return{...r,mutate:a,mutateAsync:r.mutate}}const er="modulepreload",tr=function(e){return"/"+e},Bt={},Y=function(t,n,s){let r=Promise.resolve();if(n&&n.length>0){let c=function(u){return Promise.all(u.map(l=>Promise.resolve(l).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),i=o?.nonce||o?.getAttribute("nonce");r=c(n.map(u=>{if(u=tr(u),u in Bt)return;Bt[u]=!0;const l=u.endsWith(".css"),p=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${p}`))return;const w=document.createElement("link");if(w.rel=l?"stylesheet":er,l||(w.as="script"),w.crossOrigin="",w.href=u,i&&w.setAttribute("nonce",i),document.head.appendChild(w),l)return new Promise((P,h)=>{w.addEventListener("load",P),w.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(o){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=o,window.dispatchEvent(i),!i.defaultPrevented)throw o}return r.then(o=>{for(const i of o||[])i.status==="rejected"&&a(i.reason);return t().catch(a)})};function En(e,t){return function(){return e.apply(t,arguments)}}const{toString:nr}=Object.prototype,{getPrototypeOf:Pt}=Object,{iterator:Qe,toStringTag:Cn}=Symbol,We=(e=>t=>{const n=nr.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),H=e=>(e=e.toLowerCase(),t=>We(t)===e),Ge=e=>t=>typeof t===e,{isArray:pe}=Array,fe=Ge("undefined");function Oe(e){return e!==null&&!fe(e)&&e.constructor!==null&&!fe(e.constructor)&&q(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const On=H("ArrayBuffer");function sr(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&On(e.buffer),t}const rr=Ge("string"),q=Ge("function"),xn=Ge("number"),xe=e=>e!==null&&typeof e=="object",ar=e=>e===!0||e===!1,_e=e=>{if(We(e)!=="object")return!1;const t=Pt(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Cn in e)&&!(Qe in e)},or=e=>{if(!xe(e)||Oe(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},ir=H("Date"),cr=H("File"),ur=H("Blob"),lr=H("FileList"),dr=e=>xe(e)&&q(e.pipe),fr=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||q(e.append)&&((t=We(e))==="formdata"||t==="object"&&q(e.toString)&&e.toString()==="[object FormData]"))},pr=H("URLSearchParams"),[hr,mr,yr,gr]=["ReadableStream","Request","Response","Headers"].map(H),br=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Re(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let s,r;if(typeof e!="object"&&(e=[e]),pe(e))for(s=0,r=e.length;s<r;s++)t.call(null,e[s],s,e);else{if(Oe(e))return;const a=n?Object.getOwnPropertyNames(e):Object.keys(e),o=a.length;let i;for(s=0;s<o;s++)i=a[s],t.call(null,e[i],i,e)}}function Rn(e,t){if(Oe(e))return null;t=t.toLowerCase();const n=Object.keys(e);let s=n.length,r;for(;s-- >0;)if(r=n[s],t===r.toLowerCase())return r;return null}const re=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Tn=e=>!fe(e)&&e!==re;function pt(){const{caseless:e,skipUndefined:t}=Tn(this)&&this||{},n={},s=(r,a)=>{const o=e&&Rn(n,a)||a;_e(n[o])&&_e(r)?n[o]=pt(n[o],r):_e(r)?n[o]=pt({},r):pe(r)?n[o]=r.slice():(!t||!fe(r))&&(n[o]=r)};for(let r=0,a=arguments.length;r<a;r++)arguments[r]&&Re(arguments[r],s);return n}const vr=(e,t,n,{allOwnKeys:s}={})=>(Re(t,(r,a)=>{n&&q(r)?e[a]=En(r,n):e[a]=r},{allOwnKeys:s}),e),wr=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Sr=(e,t,n,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},Ar=(e,t,n,s)=>{let r,a,o;const i={};if(t=t||{},e==null)return t;do{for(r=Object.getOwnPropertyNames(e),a=r.length;a-- >0;)o=r[a],(!s||s(o,e,t))&&!i[o]&&(t[o]=e[o],i[o]=!0);e=n!==!1&&Pt(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},Pr=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const s=e.indexOf(t,n);return s!==-1&&s===n},Er=e=>{if(!e)return null;if(pe(e))return e;let t=e.length;if(!xn(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},Cr=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Pt(Uint8Array)),Or=(e,t)=>{const s=(e&&e[Qe]).call(e);let r;for(;(r=s.next())&&!r.done;){const a=r.value;t.call(e,a[0],a[1])}},xr=(e,t)=>{let n;const s=[];for(;(n=e.exec(t))!==null;)s.push(n);return s},Rr=H("HTMLFormElement"),Tr=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,s,r){return s.toUpperCase()+r}),$t=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Nr=H("RegExp"),Nn=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),s={};Re(n,(r,a)=>{let o;(o=t(r,a,e))!==!1&&(s[a]=o||r)}),Object.defineProperties(e,s)},Dr=e=>{Nn(e,(t,n)=>{if(q(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const s=e[n];if(q(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},kr=(e,t)=>{const n={},s=r=>{r.forEach(a=>{n[a]=!0})};return pe(e)?s(e):s(String(e).split(t)),n},Ir=()=>{},Fr=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Lr(e){return!!(e&&q(e.append)&&e[Cn]==="FormData"&&e[Qe])}const jr=e=>{const t=new Array(10),n=(s,r)=>{if(xe(s)){if(t.indexOf(s)>=0)return;if(Oe(s))return s;if(!("toJSON"in s)){t[r]=s;const a=pe(s)?[]:{};return Re(s,(o,i)=>{const c=n(o,r+1);!fe(c)&&(a[i]=c)}),t[r]=void 0,a}}return s};return n(e,0)},Mr=H("AsyncFunction"),_r=e=>e&&(xe(e)||q(e))&&q(e.then)&&q(e.catch),Dn=((e,t)=>e?setImmediate:t?((n,s)=>(re.addEventListener("message",({source:r,data:a})=>{r===re&&a===n&&s.length&&s.shift()()},!1),r=>{s.push(r),re.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",q(re.postMessage)),qr=typeof queueMicrotask<"u"?queueMicrotask.bind(re):typeof process<"u"&&process.nextTick||Dn,Ur=e=>e!=null&&q(e[Qe]),d={isArray:pe,isArrayBuffer:On,isBuffer:Oe,isFormData:fr,isArrayBufferView:sr,isString:rr,isNumber:xn,isBoolean:ar,isObject:xe,isPlainObject:_e,isEmptyObject:or,isReadableStream:hr,isRequest:mr,isResponse:yr,isHeaders:gr,isUndefined:fe,isDate:ir,isFile:cr,isBlob:ur,isRegExp:Nr,isFunction:q,isStream:dr,isURLSearchParams:pr,isTypedArray:Cr,isFileList:lr,forEach:Re,merge:pt,extend:vr,trim:br,stripBOM:wr,inherits:Sr,toFlatObject:Ar,kindOf:We,kindOfTest:H,endsWith:Pr,toArray:Er,forEachEntry:Or,matchAll:xr,isHTMLForm:Rr,hasOwnProperty:$t,hasOwnProp:$t,reduceDescriptors:Nn,freezeMethods:Dr,toObjectSet:kr,toCamelCase:Tr,noop:Ir,toFiniteNumber:Fr,findKey:Rn,global:re,isContextDefined:Tn,isSpecCompliantForm:Lr,toJSONObject:jr,isAsyncFn:Mr,isThenable:_r,setImmediate:Dn,asap:qr,isIterable:Ur};function E(e,t,n,s,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),s&&(this.request=s),r&&(this.response=r,this.status=r.status?r.status:null)}d.inherits(E,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:d.toJSONObject(this.config),code:this.code,status:this.status}}});const kn=E.prototype,In={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{In[e]={value:e}});Object.defineProperties(E,In);Object.defineProperty(kn,"isAxiosError",{value:!0});E.from=(e,t,n,s,r,a)=>{const o=Object.create(kn);d.toFlatObject(e,o,function(l){return l!==Error.prototype},u=>u!=="isAxiosError");const i=e&&e.message?e.message:"Error",c=t==null&&e?e.code:t;return E.call(o,i,c,n,s,r),e&&o.cause==null&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",a&&Object.assign(o,a),o};const Br=null;function ht(e){return d.isPlainObject(e)||d.isArray(e)}function Fn(e){return d.endsWith(e,"[]")?e.slice(0,-2):e}function zt(e,t,n){return e?e.concat(t).map(function(r,a){return r=Fn(r),!n&&a?"["+r+"]":r}).join(n?".":""):t}function $r(e){return d.isArray(e)&&!e.some(ht)}const zr=d.toFlatObject(d,{},null,function(t){return/^is[A-Z]/.test(t)});function Je(e,t,n){if(!d.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=d.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,g){return!d.isUndefined(g[b])});const s=n.metaTokens,r=n.visitor||l,a=n.dots,o=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&d.isSpecCompliantForm(t);if(!d.isFunction(r))throw new TypeError("visitor must be a function");function u(h){if(h===null)return"";if(d.isDate(h))return h.toISOString();if(d.isBoolean(h))return h.toString();if(!c&&d.isBlob(h))throw new E("Blob is not supported. Use a Buffer instead.");return d.isArrayBuffer(h)||d.isTypedArray(h)?c&&typeof Blob=="function"?new Blob([h]):Buffer.from(h):h}function l(h,b,g){let x=h;if(h&&!g&&typeof h=="object"){if(d.endsWith(b,"{}"))b=s?b:b.slice(0,-2),h=JSON.stringify(h);else if(d.isArray(h)&&$r(h)||(d.isFileList(h)||d.endsWith(b,"[]"))&&(x=d.toArray(h)))return b=Fn(b),x.forEach(function(R,I){!(d.isUndefined(R)||R===null)&&t.append(o===!0?zt([b],I,a):o===null?b:b+"[]",u(R))}),!1}return ht(h)?!0:(t.append(zt(g,b,a),u(h)),!1)}const p=[],w=Object.assign(zr,{defaultVisitor:l,convertValue:u,isVisitable:ht});function P(h,b){if(!d.isUndefined(h)){if(p.indexOf(h)!==-1)throw Error("Circular reference detected in "+b.join("."));p.push(h),d.forEach(h,function(x,C){(!(d.isUndefined(x)||x===null)&&r.call(t,x,d.isString(C)?C.trim():C,b,w))===!0&&P(x,b?b.concat(C):[C])}),p.pop()}}if(!d.isObject(e))throw new TypeError("data must be an object");return P(e),t}function Kt(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function Et(e,t){this._pairs=[],e&&Je(e,this,t)}const Ln=Et.prototype;Ln.append=function(t,n){this._pairs.push([t,n])};Ln.toString=function(t){const n=t?function(s){return t.call(this,s,Kt)}:Kt;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function Kr(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function jn(e,t,n){if(!t)return e;const s=n&&n.encode||Kr;d.isFunction(n)&&(n={serialize:n});const r=n&&n.serialize;let a;if(r?a=r(t,n):a=d.isURLSearchParams(t)?t.toString():new Et(t,n).toString(s),a){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+a}return e}class Ht{constructor(){this.handlers=[]}use(t,n,s){return this.handlers.push({fulfilled:t,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){d.forEach(this.handlers,function(s){s!==null&&t(s)})}}const Mn={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Hr=typeof URLSearchParams<"u"?URLSearchParams:Et,Vr=typeof FormData<"u"?FormData:null,Qr=typeof Blob<"u"?Blob:null,Wr={isBrowser:!0,classes:{URLSearchParams:Hr,FormData:Vr,Blob:Qr},protocols:["http","https","file","blob","url","data"]},Ct=typeof window<"u"&&typeof document<"u",mt=typeof navigator=="object"&&navigator||void 0,Gr=Ct&&(!mt||["ReactNative","NativeScript","NS"].indexOf(mt.product)<0),Jr=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Yr=Ct&&window.location.href||"http://localhost",Xr=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ct,hasStandardBrowserEnv:Gr,hasStandardBrowserWebWorkerEnv:Jr,navigator:mt,origin:Yr},Symbol.toStringTag,{value:"Module"})),j={...Xr,...Wr};function Zr(e,t){return Je(e,new j.classes.URLSearchParams,{visitor:function(n,s,r,a){return j.isNode&&d.isBuffer(n)?(this.append(s,n.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...t})}function ea(e){return d.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function ta(e){const t={},n=Object.keys(e);let s;const r=n.length;let a;for(s=0;s<r;s++)a=n[s],t[a]=e[a];return t}function _n(e){function t(n,s,r,a){let o=n[a++];if(o==="__proto__")return!0;const i=Number.isFinite(+o),c=a>=n.length;return o=!o&&d.isArray(r)?r.length:o,c?(d.hasOwnProp(r,o)?r[o]=[r[o],s]:r[o]=s,!i):((!r[o]||!d.isObject(r[o]))&&(r[o]=[]),t(n,s,r[o],a)&&d.isArray(r[o])&&(r[o]=ta(r[o])),!i)}if(d.isFormData(e)&&d.isFunction(e.entries)){const n={};return d.forEachEntry(e,(s,r)=>{t(ea(s),r,n,0)}),n}return null}function na(e,t,n){if(d.isString(e))try{return(t||JSON.parse)(e),d.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(n||JSON.stringify)(e)}const Te={transitional:Mn,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const s=n.getContentType()||"",r=s.indexOf("application/json")>-1,a=d.isObject(t);if(a&&d.isHTMLForm(t)&&(t=new FormData(t)),d.isFormData(t))return r?JSON.stringify(_n(t)):t;if(d.isArrayBuffer(t)||d.isBuffer(t)||d.isStream(t)||d.isFile(t)||d.isBlob(t)||d.isReadableStream(t))return t;if(d.isArrayBufferView(t))return t.buffer;if(d.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let i;if(a){if(s.indexOf("application/x-www-form-urlencoded")>-1)return Zr(t,this.formSerializer).toString();if((i=d.isFileList(t))||s.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Je(i?{"files[]":t}:t,c&&new c,this.formSerializer)}}return a||r?(n.setContentType("application/json",!1),na(t)):t}],transformResponse:[function(t){const n=this.transitional||Te.transitional,s=n&&n.forcedJSONParsing,r=this.responseType==="json";if(d.isResponse(t)||d.isReadableStream(t))return t;if(t&&d.isString(t)&&(s&&!this.responseType||r)){const o=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(t,this.parseReviver)}catch(i){if(o)throw i.name==="SyntaxError"?E.from(i,E.ERR_BAD_RESPONSE,this,null,this.response):i}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:j.classes.FormData,Blob:j.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};d.forEach(["delete","get","head","post","put","patch"],e=>{Te.headers[e]={}});const sa=d.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ra=e=>{const t={};let n,s,r;return e&&e.split(`
`).forEach(function(o){r=o.indexOf(":"),n=o.substring(0,r).trim().toLowerCase(),s=o.substring(r+1).trim(),!(!n||t[n]&&sa[n])&&(n==="set-cookie"?t[n]?t[n].push(s):t[n]=[s]:t[n]=t[n]?t[n]+", "+s:s)}),t},Vt=Symbol("internals");function Se(e){return e&&String(e).trim().toLowerCase()}function qe(e){return e===!1||e==null?e:d.isArray(e)?e.map(qe):String(e)}function aa(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(e);)t[s[1]]=s[2];return t}const oa=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function rt(e,t,n,s,r){if(d.isFunction(s))return s.call(this,t,n);if(r&&(t=n),!!d.isString(t)){if(d.isString(s))return t.indexOf(s)!==-1;if(d.isRegExp(s))return s.test(t)}}function ia(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,s)=>n.toUpperCase()+s)}function ca(e,t){const n=d.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+n,{value:function(r,a,o){return this[s].call(this,t,r,a,o)},configurable:!0})})}let U=class{constructor(t){t&&this.set(t)}set(t,n,s){const r=this;function a(i,c,u){const l=Se(c);if(!l)throw new Error("header name must be a non-empty string");const p=d.findKey(r,l);(!p||r[p]===void 0||u===!0||u===void 0&&r[p]!==!1)&&(r[p||c]=qe(i))}const o=(i,c)=>d.forEach(i,(u,l)=>a(u,l,c));if(d.isPlainObject(t)||t instanceof this.constructor)o(t,n);else if(d.isString(t)&&(t=t.trim())&&!oa(t))o(ra(t),n);else if(d.isObject(t)&&d.isIterable(t)){let i={},c,u;for(const l of t){if(!d.isArray(l))throw TypeError("Object iterator must return a key-value pair");i[u=l[0]]=(c=i[u])?d.isArray(c)?[...c,l[1]]:[c,l[1]]:l[1]}o(i,n)}else t!=null&&a(n,t,s);return this}get(t,n){if(t=Se(t),t){const s=d.findKey(this,t);if(s){const r=this[s];if(!n)return r;if(n===!0)return aa(r);if(d.isFunction(n))return n.call(this,r,s);if(d.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Se(t),t){const s=d.findKey(this,t);return!!(s&&this[s]!==void 0&&(!n||rt(this,this[s],s,n)))}return!1}delete(t,n){const s=this;let r=!1;function a(o){if(o=Se(o),o){const i=d.findKey(s,o);i&&(!n||rt(s,s[i],i,n))&&(delete s[i],r=!0)}}return d.isArray(t)?t.forEach(a):a(t),r}clear(t){const n=Object.keys(this);let s=n.length,r=!1;for(;s--;){const a=n[s];(!t||rt(this,this[a],a,t,!0))&&(delete this[a],r=!0)}return r}normalize(t){const n=this,s={};return d.forEach(this,(r,a)=>{const o=d.findKey(s,a);if(o){n[o]=qe(r),delete n[a];return}const i=t?ia(a):String(a).trim();i!==a&&delete n[a],n[i]=qe(r),s[i]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return d.forEach(this,(s,r)=>{s!=null&&s!==!1&&(n[r]=t&&d.isArray(s)?s.join(", "):s)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const s=new this(t);return n.forEach(r=>s.set(r)),s}static accessor(t){const s=(this[Vt]=this[Vt]={accessors:{}}).accessors,r=this.prototype;function a(o){const i=Se(o);s[i]||(ca(r,o),s[i]=!0)}return d.isArray(t)?t.forEach(a):a(t),this}};U.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);d.reduceDescriptors(U.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[n]=s}}});d.freezeMethods(U);function at(e,t){const n=this||Te,s=t||n,r=U.from(s.headers);let a=s.data;return d.forEach(e,function(i){a=i.call(n,a,r.normalize(),t?t.status:void 0)}),r.normalize(),a}function qn(e){return!!(e&&e.__CANCEL__)}function he(e,t,n){E.call(this,e??"canceled",E.ERR_CANCELED,t,n),this.name="CanceledError"}d.inherits(he,E,{__CANCEL__:!0});function Un(e,t,n){const s=n.config.validateStatus;!n.status||!s||s(n.status)?e(n):t(new E("Request failed with status code "+n.status,[E.ERR_BAD_REQUEST,E.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function ua(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function la(e,t){e=e||10;const n=new Array(e),s=new Array(e);let r=0,a=0,o;return t=t!==void 0?t:1e3,function(c){const u=Date.now(),l=s[a];o||(o=u),n[r]=c,s[r]=u;let p=a,w=0;for(;p!==r;)w+=n[p++],p=p%e;if(r=(r+1)%e,r===a&&(a=(a+1)%e),u-o<t)return;const P=l&&u-l;return P?Math.round(w*1e3/P):void 0}}function da(e,t){let n=0,s=1e3/t,r,a;const o=(u,l=Date.now())=>{n=l,r=null,a&&(clearTimeout(a),a=null),e(...u)};return[(...u)=>{const l=Date.now(),p=l-n;p>=s?o(u,l):(r=u,a||(a=setTimeout(()=>{a=null,o(r)},s-p)))},()=>r&&o(r)]}const $e=(e,t,n=3)=>{let s=0;const r=la(50,250);return da(a=>{const o=a.loaded,i=a.lengthComputable?a.total:void 0,c=o-s,u=r(c),l=o<=i;s=o;const p={loaded:o,total:i,progress:i?o/i:void 0,bytes:c,rate:u||void 0,estimated:u&&i&&l?(i-o)/u:void 0,event:a,lengthComputable:i!=null,[t?"download":"upload"]:!0};e(p)},n)},Qt=(e,t)=>{const n=e!=null;return[s=>t[0]({lengthComputable:n,total:e,loaded:s}),t[1]]},Wt=e=>(...t)=>d.asap(()=>e(...t)),fa=j.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,j.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(j.origin),j.navigator&&/(msie|trident)/i.test(j.navigator.userAgent)):()=>!0,pa=j.hasStandardBrowserEnv?{write(e,t,n,s,r,a){const o=[e+"="+encodeURIComponent(t)];d.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),d.isString(s)&&o.push("path="+s),d.isString(r)&&o.push("domain="+r),a===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function ha(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function ma(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Bn(e,t,n){let s=!ha(t);return e&&(s||n==!1)?ma(e,t):t}const Gt=e=>e instanceof U?{...e}:e;function ie(e,t){t=t||{};const n={};function s(u,l,p,w){return d.isPlainObject(u)&&d.isPlainObject(l)?d.merge.call({caseless:w},u,l):d.isPlainObject(l)?d.merge({},l):d.isArray(l)?l.slice():l}function r(u,l,p,w){if(d.isUndefined(l)){if(!d.isUndefined(u))return s(void 0,u,p,w)}else return s(u,l,p,w)}function a(u,l){if(!d.isUndefined(l))return s(void 0,l)}function o(u,l){if(d.isUndefined(l)){if(!d.isUndefined(u))return s(void 0,u)}else return s(void 0,l)}function i(u,l,p){if(p in t)return s(u,l);if(p in e)return s(void 0,u)}const c={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:i,headers:(u,l,p)=>r(Gt(u),Gt(l),p,!0)};return d.forEach(Object.keys({...e,...t}),function(l){const p=c[l]||r,w=p(e[l],t[l],l);d.isUndefined(w)&&p!==i||(n[l]=w)}),n}const $n=e=>{const t=ie({},e);let{data:n,withXSRFToken:s,xsrfHeaderName:r,xsrfCookieName:a,headers:o,auth:i}=t;if(t.headers=o=U.from(o),t.url=jn(Bn(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),i&&o.set("Authorization","Basic "+btoa((i.username||"")+":"+(i.password?unescape(encodeURIComponent(i.password)):""))),d.isFormData(n)){if(j.hasStandardBrowserEnv||j.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(d.isFunction(n.getHeaders)){const c=n.getHeaders(),u=["content-type","content-length"];Object.entries(c).forEach(([l,p])=>{u.includes(l.toLowerCase())&&o.set(l,p)})}}if(j.hasStandardBrowserEnv&&(s&&d.isFunction(s)&&(s=s(t)),s||s!==!1&&fa(t.url))){const c=r&&a&&pa.read(a);c&&o.set(r,c)}return t},ya=typeof XMLHttpRequest<"u",ga=ya&&function(e){return new Promise(function(n,s){const r=$n(e);let a=r.data;const o=U.from(r.headers).normalize();let{responseType:i,onUploadProgress:c,onDownloadProgress:u}=r,l,p,w,P,h;function b(){P&&P(),h&&h(),r.cancelToken&&r.cancelToken.unsubscribe(l),r.signal&&r.signal.removeEventListener("abort",l)}let g=new XMLHttpRequest;g.open(r.method.toUpperCase(),r.url,!0),g.timeout=r.timeout;function x(){if(!g)return;const R=U.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),D={data:!i||i==="text"||i==="json"?g.responseText:g.response,status:g.status,statusText:g.statusText,headers:R,config:e,request:g};Un(function(_){n(_),b()},function(_){s(_),b()},D),g=null}"onloadend"in g?g.onloadend=x:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(x)},g.onabort=function(){g&&(s(new E("Request aborted",E.ECONNABORTED,e,g)),g=null)},g.onerror=function(I){const D=I&&I.message?I.message:"Network Error",$=new E(D,E.ERR_NETWORK,e,g);$.event=I||null,s($),g=null},g.ontimeout=function(){let I=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const D=r.transitional||Mn;r.timeoutErrorMessage&&(I=r.timeoutErrorMessage),s(new E(I,D.clarifyTimeoutError?E.ETIMEDOUT:E.ECONNABORTED,e,g)),g=null},a===void 0&&o.setContentType(null),"setRequestHeader"in g&&d.forEach(o.toJSON(),function(I,D){g.setRequestHeader(D,I)}),d.isUndefined(r.withCredentials)||(g.withCredentials=!!r.withCredentials),i&&i!=="json"&&(g.responseType=r.responseType),u&&([w,h]=$e(u,!0),g.addEventListener("progress",w)),c&&g.upload&&([p,P]=$e(c),g.upload.addEventListener("progress",p),g.upload.addEventListener("loadend",P)),(r.cancelToken||r.signal)&&(l=R=>{g&&(s(!R||R.type?new he(null,e,g):R),g.abort(),g=null)},r.cancelToken&&r.cancelToken.subscribe(l),r.signal&&(r.signal.aborted?l():r.signal.addEventListener("abort",l)));const C=ua(r.url);if(C&&j.protocols.indexOf(C)===-1){s(new E("Unsupported protocol "+C+":",E.ERR_BAD_REQUEST,e));return}g.send(a||null)})},ba=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let s=new AbortController,r;const a=function(u){if(!r){r=!0,i();const l=u instanceof Error?u:this.reason;s.abort(l instanceof E?l:new he(l instanceof Error?l.message:l))}};let o=t&&setTimeout(()=>{o=null,a(new E(`timeout ${t} of ms exceeded`,E.ETIMEDOUT))},t);const i=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(a):u.removeEventListener("abort",a)}),e=null)};e.forEach(u=>u.addEventListener("abort",a));const{signal:c}=s;return c.unsubscribe=()=>d.asap(i),c}},va=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let s=0,r;for(;s<n;)r=s+t,yield e.slice(s,r),s=r},wa=async function*(e,t){for await(const n of Sa(e))yield*va(n,t)},Sa=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:s}=await t.read();if(n)break;yield s}}finally{await t.cancel()}},Jt=(e,t,n,s)=>{const r=wa(e,t);let a=0,o,i=c=>{o||(o=!0,s&&s(c))};return new ReadableStream({async pull(c){try{const{done:u,value:l}=await r.next();if(u){i(),c.close();return}let p=l.byteLength;if(n){let w=a+=p;n(w)}c.enqueue(new Uint8Array(l))}catch(u){throw i(u),u}},cancel(c){return i(c),r.return()}},{highWaterMark:2})},Yt=64*1024,{isFunction:Me}=d,Aa=(({Request:e,Response:t})=>({Request:e,Response:t}))(d.global),{ReadableStream:Xt,TextEncoder:Zt}=d.global,en=(e,...t)=>{try{return!!e(...t)}catch{return!1}},Pa=e=>{e=d.merge.call({skipUndefined:!0},Aa,e);const{fetch:t,Request:n,Response:s}=e,r=t?Me(t):typeof fetch=="function",a=Me(n),o=Me(s);if(!r)return!1;const i=r&&Me(Xt),c=r&&(typeof Zt=="function"?(h=>b=>h.encode(b))(new Zt):async h=>new Uint8Array(await new n(h).arrayBuffer())),u=a&&i&&en(()=>{let h=!1;const b=new n(j.origin,{body:new Xt,method:"POST",get duplex(){return h=!0,"half"}}).headers.has("Content-Type");return h&&!b}),l=o&&i&&en(()=>d.isReadableStream(new s("").body)),p={stream:l&&(h=>h.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(h=>{!p[h]&&(p[h]=(b,g)=>{let x=b&&b[h];if(x)return x.call(b);throw new E(`Response type '${h}' is not supported`,E.ERR_NOT_SUPPORT,g)})});const w=async h=>{if(h==null)return 0;if(d.isBlob(h))return h.size;if(d.isSpecCompliantForm(h))return(await new n(j.origin,{method:"POST",body:h}).arrayBuffer()).byteLength;if(d.isArrayBufferView(h)||d.isArrayBuffer(h))return h.byteLength;if(d.isURLSearchParams(h)&&(h=h+""),d.isString(h))return(await c(h)).byteLength},P=async(h,b)=>{const g=d.toFiniteNumber(h.getContentLength());return g??w(b)};return async h=>{let{url:b,method:g,data:x,signal:C,cancelToken:R,timeout:I,onDownloadProgress:D,onUploadProgress:$,responseType:_,headers:M,withCredentials:V="same-origin",fetchOptions:ye}=$n(h),Q=t||fetch;_=_?(_+"").toLowerCase():"text";let ne=ba([C,R&&R.toAbortSignal()],I),X=null;const W=ne&&ne.unsubscribe&&(()=>{ne.unsubscribe()});let ge;try{if($&&u&&g!=="get"&&g!=="head"&&(ge=await P(M,x))!==0){let G=new n(b,{method:"POST",body:x,duplex:"half"}),Z;if(d.isFormData(x)&&(Z=G.headers.get("content-type"))&&M.setContentType(Z),G.body){const[be,ue]=Qt(ge,$e(Wt($)));x=Jt(G.body,Yt,be,ue)}}d.isString(V)||(V=V?"include":"omit");const B=a&&"credentials"in n.prototype,se={...ye,signal:ne,method:g.toUpperCase(),headers:M.normalize().toJSON(),body:x,duplex:"half",credentials:B?V:void 0};X=a&&new n(b,se);let z=await(a?Q(X,ye):Q(b,se));const Ne=l&&(_==="stream"||_==="response");if(l&&(D||Ne&&W)){const G={};["status","statusText","headers"].forEach(ke=>{G[ke]=z[ke]});const Z=d.toFiniteNumber(z.headers.get("content-length")),[be,ue]=D&&Qt(Z,$e(Wt(D),!0))||[];z=new s(Jt(z.body,Yt,be,()=>{ue&&ue(),W&&W()}),G)}_=_||"text";let De=await p[d.findKey(p,_)||"text"](z,h);return!Ne&&W&&W(),await new Promise((G,Z)=>{Un(G,Z,{data:De,headers:U.from(z.headers),status:z.status,statusText:z.statusText,config:h,request:X})})}catch(B){throw W&&W(),B&&B.name==="TypeError"&&/Load failed|fetch/i.test(B.message)?Object.assign(new E("Network Error",E.ERR_NETWORK,h,X),{cause:B.cause||B}):E.from(B,B&&B.code,h,X)}}},Ea=new Map,zn=e=>{let t=e?e.env:{};const{fetch:n,Request:s,Response:r}=t,a=[s,r,n];let o=a.length,i=o,c,u,l=Ea;for(;i--;)c=a[i],u=l.get(c),u===void 0&&l.set(c,u=i?new Map:Pa(t)),l=u;return u};zn();const yt={http:Br,xhr:ga,fetch:{get:zn}};d.forEach(yt,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const tn=e=>`- ${e}`,Ca=e=>d.isFunction(e)||e===null||e===!1,Kn={getAdapter:(e,t)=>{e=d.isArray(e)?e:[e];const{length:n}=e;let s,r;const a={};for(let o=0;o<n;o++){s=e[o];let i;if(r=s,!Ca(s)&&(r=yt[(i=String(s)).toLowerCase()],r===void 0))throw new E(`Unknown adapter '${i}'`);if(r&&(d.isFunction(r)||(r=r.get(t))))break;a[i||"#"+o]=r}if(!r){const o=Object.entries(a).map(([c,u])=>`adapter ${c} `+(u===!1?"is not supported by the environment":"is not available in the build"));let i=n?o.length>1?`since :
`+o.map(tn).join(`
`):" "+tn(o[0]):"as no adapter specified";throw new E("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return r},adapters:yt};function ot(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new he(null,e)}function nn(e){return ot(e),e.headers=U.from(e.headers),e.data=at.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Kn.getAdapter(e.adapter||Te.adapter,e)(e).then(function(s){return ot(e),s.data=at.call(e,e.transformResponse,s),s.headers=U.from(s.headers),s},function(s){return qn(s)||(ot(e),s&&s.response&&(s.response.data=at.call(e,e.transformResponse,s.response),s.response.headers=U.from(s.response.headers))),Promise.reject(s)})}const Hn="1.12.2",Ye={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Ye[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const sn={};Ye.transitional=function(t,n,s){function r(a,o){return"[Axios v"+Hn+"] Transitional option '"+a+"'"+o+(s?". "+s:"")}return(a,o,i)=>{if(t===!1)throw new E(r(o," has been removed"+(n?" in "+n:"")),E.ERR_DEPRECATED);return n&&!sn[o]&&(sn[o]=!0,console.warn(r(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(a,o,i):!0}};Ye.spelling=function(t){return(n,s)=>(console.warn(`${s} is likely a misspelling of ${t}`),!0)};function Oa(e,t,n){if(typeof e!="object")throw new E("options must be an object",E.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let r=s.length;for(;r-- >0;){const a=s[r],o=t[a];if(o){const i=e[a],c=i===void 0||o(i,a,e);if(c!==!0)throw new E("option "+a+" must be "+c,E.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new E("Unknown option "+a,E.ERR_BAD_OPTION)}}const Ue={assertOptions:Oa,validators:Ye},J=Ue.validators;let ae=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Ht,response:new Ht}}async request(t,n){try{return await this._request(t,n)}catch(s){if(s instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const a=r.stack?r.stack.replace(/^.+\n/,""):"";try{s.stack?a&&!String(s.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+a):s.stack=a}catch{}}throw s}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=ie(this.defaults,n);const{transitional:s,paramsSerializer:r,headers:a}=n;s!==void 0&&Ue.assertOptions(s,{silentJSONParsing:J.transitional(J.boolean),forcedJSONParsing:J.transitional(J.boolean),clarifyTimeoutError:J.transitional(J.boolean)},!1),r!=null&&(d.isFunction(r)?n.paramsSerializer={serialize:r}:Ue.assertOptions(r,{encode:J.function,serialize:J.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Ue.assertOptions(n,{baseUrl:J.spelling("baseURL"),withXsrfToken:J.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=a&&d.merge(a.common,a[n.method]);a&&d.forEach(["delete","get","head","post","put","patch","common"],h=>{delete a[h]}),n.headers=U.concat(o,a);const i=[];let c=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(n)===!1||(c=c&&b.synchronous,i.unshift(b.fulfilled,b.rejected))});const u=[];this.interceptors.response.forEach(function(b){u.push(b.fulfilled,b.rejected)});let l,p=0,w;if(!c){const h=[nn.bind(this),void 0];for(h.unshift(...i),h.push(...u),w=h.length,l=Promise.resolve(n);p<w;)l=l.then(h[p++],h[p++]);return l}w=i.length;let P=n;for(;p<w;){const h=i[p++],b=i[p++];try{P=h(P)}catch(g){b.call(this,g);break}}try{l=nn.call(this,P)}catch(h){return Promise.reject(h)}for(p=0,w=u.length;p<w;)l=l.then(u[p++],u[p++]);return l}getUri(t){t=ie(this.defaults,t);const n=Bn(t.baseURL,t.url,t.allowAbsoluteUrls);return jn(n,t.params,t.paramsSerializer)}};d.forEach(["delete","get","head","options"],function(t){ae.prototype[t]=function(n,s){return this.request(ie(s||{},{method:t,url:n,data:(s||{}).data}))}});d.forEach(["post","put","patch"],function(t){function n(s){return function(a,o,i){return this.request(ie(i||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:a,data:o}))}}ae.prototype[t]=n(),ae.prototype[t+"Form"]=n(!0)});let xa=class Vn{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(a){n=a});const s=this;this.promise.then(r=>{if(!s._listeners)return;let a=s._listeners.length;for(;a-- >0;)s._listeners[a](r);s._listeners=null}),this.promise.then=r=>{let a;const o=new Promise(i=>{s.subscribe(i),a=i}).then(r);return o.cancel=function(){s.unsubscribe(a)},o},t(function(a,o,i){s.reason||(s.reason=new he(a,o,i),n(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=s=>{t.abort(s)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new Vn(function(r){t=r}),cancel:t}}};function Ra(e){return function(n){return e.apply(null,n)}}function Ta(e){return d.isObject(e)&&e.isAxiosError===!0}const gt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(gt).forEach(([e,t])=>{gt[t]=e});function Qn(e){const t=new ae(e),n=En(ae.prototype.request,t);return d.extend(n,ae.prototype,t,{allOwnKeys:!0}),d.extend(n,t,null,{allOwnKeys:!0}),n.create=function(r){return Qn(ie(e,r))},n}const k=Qn(Te);k.Axios=ae;k.CanceledError=he;k.CancelToken=xa;k.isCancel=qn;k.VERSION=Hn;k.toFormData=Je;k.AxiosError=E;k.Cancel=k.CanceledError;k.all=function(t){return Promise.all(t)};k.spread=Ra;k.isAxiosError=Ta;k.mergeConfig=ie;k.AxiosHeaders=U;k.formToJSON=e=>_n(d.isHTMLForm(e)?new FormData(e):e);k.getAdapter=Kn.getAdapter;k.HttpStatusCode=gt;k.default=k;const{Axios:fi,AxiosError:pi,CanceledError:hi,isCancel:mi,CancelToken:yi,VERSION:gi,all:bi,Cancel:vi,isAxiosError:wi,spread:Si,toFormData:Ai,AxiosHeaders:Pi,HttpStatusCode:Ei,formToJSON:Ci,getAdapter:Oi,mergeConfig:xi}=k,Na="http://localhost:8081",Xe="00000000-0000-0000-0000-000000000001",Ot="admin@dev.local",Wn="Admin1234",Da="dev-session-token",Gn="dev-session-refresh-token",Ze=Xe,ka=["admin"],Ia=["sales","purchases","inventory","customers","suppliers","finances","reports","settings"],rn=globalThis.structuredClone;function Fa(e){return typeof rn=="function"?rn(e):JSON.parse(JSON.stringify(e))}let ze=!1;function Jn(e){ze?console.info(`[API] Using offline demo data for ${e}.`):(ze=!0,console.warn(`[API] Network unreachable during ${e}. Switching to in-memory demo data so the workspace keeps working.`))}function an(e){return Fa(e)}function Yn(e){return Array.isArray(e)?e:[]}function La(e){if(typeof e!="string")return null;const t=e.match(/filename\*=UTF-8''([^;]+)/i);if(t&&t[1])try{return decodeURIComponent(t[1])}catch(s){console.warn("[API] Failed to decode UTF-8 filename",s)}const n=e.match(/filename="?([^";]+)"?/i);return n&&n[1]?n[1]:null}function Xn(e,t){const n=e.data,s=typeof n?.type=="string"&&n.type?n.type:void 0,r=typeof e.headers["content-type"]=="string"?e.headers["content-type"]:void 0,a=s||r||"application/octet-stream",o=La(e.headers["content-disposition"])||t;return{blob:n,filename:o,mimeType:a}}function xt(e,t){const n=t==="preview"?"Vista previa no disponible":"Descarga no disponible",r=`<!DOCTYPE html><html lang="es"><head><meta charset="utf-8" /><title>${n}</title></head><body><main style="font-family:system-ui,sans-serif;padding:24px;max-width:640px;margin:auto;"><h1 style="margin-bottom:16px;">${n}</h1><p style="margin-bottom:16px;">${t==="preview"?"No hay contenido disponible sin conexin para mostrar este documento.":"No hay archivo disponible para descargar sin conexin."}</p><p style="color:#555;">Documento: ${e}</p></main></body></html>`;return{blob:new Blob([r],{type:"text/html"}),filename:`${t}-documento-${e}.html`,mimeType:"text/html"}}const Zn="offline://document";function on(e,t){return`${Zn}/${t}/${encodeURIComponent(e)}`}function ja(e){if(typeof e!="string"||!e.startsWith(Zn))return null;const t=e.split("/");if(t.length<4)return null;const n=t[2],s=decodeURIComponent(t.slice(3).join("/"));return n!=="LOCAL"&&n!=="OFFICIAL"||!s?null:{id:s,version:n}}function Ma(e){return{localPdf:on(e,"LOCAL"),officialPdf:on(e,"OFFICIAL")}}const _a=new Date,O=e=>e.toISOString();function N(e){const t=new Date(_a);return t.setDate(t.getDate()-e),t}const m={companies:[{id:"cmp-demo-001",businessName:"Demo Comercial SpA",rut:"76.123.456-0",businessActivity:"Retail",address:"Av. Siempre Viva 742, Santiago",commune:"Providencia",phone:"+56 2 2345 6677",email:"contacto@democomercial.cl",receiptFooterMessage:"Gracias por tu compra!",createdAt:O(N(180)),updatedAt:O(N(20))},{id:"cmp-demo-002",businessName:"Servicios Norte Ltda.",rut:"77.987.654-3",businessActivity:"Servicios",address:"Av. Costanera 1200, Antofagasta",commune:"Antofagasta",phone:"+56 55 278 9900",email:"administracion@serviciosnorte.cl",receiptFooterMessage:"Servicio garantizado",createdAt:O(N(95)),updatedAt:O(N(10))},{id:"cmp-demo-003",businessName:"Distribuidora Andina",rut:"78.321.654-K",businessActivity:"Logstica",address:"Camino a Melipilla 15000, Maip",commune:"Maip",phone:"+56 2 2388 1122",email:"ventas@andina.cl",receiptFooterMessage:"Despachos en 24 horas",createdAt:O(N(45)),updatedAt:O(N(3))}],userAccounts:[{id:"usr-demo-001",email:Ot,name:"Dev Admin",role:"admin",status:"active",roles:["ROLE_ADMIN"],createdAt:O(N(120)),password:Wn},{id:"usr-demo-002",email:"ventas@dev.local",name:"Vendedora Demo",role:"sales",status:"active",roles:["ROLE_SALES","ROLE_REPORTS"],createdAt:O(N(45)),password:"Ventas123"}],products:[{id:"prd-demo-001",sku:"SKU-1001",name:"Caf en grano premium 1Kg",description:"Tueste medio alto, origen Colombia",category:"Alimentos",barcode:"7800001001002",currentPrice:11990,imageUrl:void 0,qrUrl:void 0,stock:120,criticalStock:40,active:!0},{id:"prd-demo-002",sku:"SKU-1002",name:"Azcar orgnica 1Kg",description:"Certificada comercio justo",category:"Alimentos",barcode:"7800001002001",currentPrice:3290,imageUrl:void 0,qrUrl:void 0,stock:68,criticalStock:25,active:!0},{id:"prd-demo-003",sku:"SKU-2040",name:"Vasos biodegradables 12oz (pack 50)",description:"Pulpa de caa, compostable",category:"Insumos",barcode:"7801234567005",currentPrice:8990,imageUrl:void 0,qrUrl:void 0,stock:22,criticalStock:30,active:!0},{id:"prd-demo-004",sku:"SKU-3055",name:"Botella vidrio reusable 600ml",description:"Incluye funda trmica",category:"Retail",barcode:"7801231234568",currentPrice:7490,imageUrl:void 0,qrUrl:void 0,stock:6,criticalStock:15,active:!1}],productPrices:{"prd-demo-001":[{id:"pp-001",productId:"prd-demo-001",price:10990,validFrom:O(N(90))},{id:"pp-002",productId:"prd-demo-001",price:11990,validFrom:O(N(28))}],"prd-demo-002":[{id:"pp-003",productId:"prd-demo-002",price:2990,validFrom:O(N(120))},{id:"pp-004",productId:"prd-demo-002",price:3290,validFrom:O(N(32))}],"prd-demo-003":[{id:"pp-005",productId:"prd-demo-003",price:8990,validFrom:O(N(62))}],"prd-demo-004":[{id:"pp-006",productId:"prd-demo-004",price:7490,validFrom:O(N(200))}]},suppliers:[{id:"sup-demo-001",name:"Proveedor Andes",rut:"76.555.111-1",businessActivity:"Distribucin de alimentos",address:"Av. Los Leones 1200, Providencia",commune:"Providencia",phone:"+56 2 2456 7788",email:"ventas@proveedorandes.cl",createdAt:O(N(140))},{id:"sup-demo-002",name:"Granos Latino",rut:"77.444.333-2",businessActivity:"Importacin de granos",address:"Camino a Noviciado 2345, Pudahuel",commune:"Pudahuel",phone:"+56 2 2988 1100",email:"contacto@granoslatino.cl",createdAt:O(N(60))},{id:"sup-demo-003",name:"Eco Packaging",rut:"79.222.888-5",businessActivity:"Envases sustentables",address:"Av. Repblica 980, Santiago",commune:"Santiago",phone:"+56 2 2311 4455",email:"ventas@ecopackaging.cl",createdAt:O(N(12))}],customers:[{id:"cus-demo-001",name:"Cafetera Plaza",address:"Av. Providencia 1234, Santiago",lat:-33.4263,lng:-70.6209,phone:"+56 2 2345 6677",email:"contacto@cafeteriaplaza.cl",segment:"HORECA",document:"76.123.456-0",commune:"Providencia"},{id:"cus-demo-002",name:"MiniMarket Central",address:"Av. Alemania 890, Temuco",phone:"+56 45 212 3344",email:"compras@mmcentral.cl",segment:"Retail",document:"77.987.654-3",commune:"Temuco"},{id:"cus-demo-003",name:"Corporacin Sur",address:"Los Carrera 450, Concepcin",phone:"+56 41 276 0011",email:"abastecimiento@corsur.cl",segment:"Empresas",document:"59.456.789-1",commune:"Concepcin"},{id:"cus-demo-004",name:"Coffeelab Boutique",address:"Av. Peru 345, Antofagasta",phone:"+56 55 284 9988",email:"ventas@coffeelab.cl",segment:"HORECA",document:"65.432.109-4",commune:"Antofagasta"},{id:"cus-demo-005",name:"Vecinos Gourmet",address:"Av. Italia 987, Santiago",phone:"+56 2 2567 7789",email:"hola@vecinosgourmet.cl",document:"79.321.654-2",commune:"Providencia"}],sales:[{id:"sal-demo-001",customerId:"cus-demo-001",customerName:"Cafetera Plaza",docNumber:"F-1200",docType:"Factura",paymentMethod:"transferencia",status:"emitida",net:95e4,vat:180500,total:1130500,issuedAt:O(N(2))},{id:"sal-demo-002",customerId:"cus-demo-004",customerName:"Coffeelab Boutique",docNumber:"B-2301",docType:"Boleta",paymentMethod:"tarjeta",status:"emitida",net:28e4,vat:53200,total:333200,issuedAt:O(N(4))},{id:"sal-demo-003",customerId:"cus-demo-002",customerName:"MiniMarket Central",docNumber:"F-4502",docType:"Factura",paymentMethod:"credito",status:"cancelled",net:41e4,vat:77900,total:487900,issuedAt:O(N(9))}],saleDetails:{"sal-demo-001":{id:"sal-demo-001",issuedAt:O(N(2)),docType:"Factura",docNumber:"F-1200",paymentMethod:"transferencia",status:"emitida",customer:{id:"cus-demo-001",name:"Cafetera Plaza"},items:[{productId:"prd-demo-001",productName:"Caf en grano premium 1Kg",qty:80,unitPrice:11990,discount:0,lineTotal:959200},{productId:"prd-demo-003",productName:"Vasos biodegradables 12oz (pack 50)",qty:50,unitPrice:8990,discount:0,lineTotal:449500}],net:95e4,vat:180500,total:1130500,thermalTicket:`PYMERP
Venta sal-demo-001
Cliente: Cafetera Plaza
Total: $1.130.500
Gracias por su compra`},"sal-demo-002":{id:"sal-demo-002",issuedAt:O(N(4)),docType:"Boleta",docNumber:"B-2301",paymentMethod:"tarjeta",status:"emitida",customer:{id:"cus-demo-004",name:"Coffeelab Boutique"},items:[{productId:"prd-demo-001",productName:"Caf en grano premium 1Kg",qty:20,unitPrice:11990,discount:0,lineTotal:239800},{productId:"prd-demo-002",productName:"Azcar orgnica 1Kg",qty:40,unitPrice:3290,discount:0,lineTotal:131600}],net:28e4,vat:53200,total:333200,thermalTicket:`PYMERP
Venta sal-demo-002
Total: $333.200
Emitida con POS`},"sal-demo-003":{id:"sal-demo-003",issuedAt:O(N(9)),docType:"Factura",docNumber:"F-4502",paymentMethod:"credito",status:"cancelled",customer:{id:"cus-demo-002",name:"MiniMarket Central"},items:[{productId:"prd-demo-003",productName:"Vasos biodegradables 12oz (pack 50)",qty:25,unitPrice:8990,discount:0,lineTotal:224750},{productId:"prd-demo-002",productName:"Azcar orgnica 1Kg",qty:60,unitPrice:3290,discount:0,lineTotal:197400}],net:41e4,vat:77900,total:487900,thermalTicket:`PYMERP
Venta sal-demo-003
ESTADO: Cancelada`}},purchases:[{id:"pur-demo-001",supplierId:"sup-demo-001",supplierName:"Proveedor Andes",docType:"Factura",docNumber:"F-4432",status:"received",net:54e4,vat:102600,total:642600,issuedAt:O(N(6))},{id:"pur-demo-002",supplierId:"sup-demo-003",supplierName:"Eco Packaging",docType:"Factura",docNumber:"F-8891",status:"received",net:215e3,vat:40850,total:255850,issuedAt:O(N(11))},{id:"pur-demo-003",supplierId:"sup-demo-002",supplierName:"Granos Latino",docType:"Factura",docNumber:"F-5501",status:"cancelled",net:18e4,vat:34200,total:214200,issuedAt:O(N(18))}],inventorySummary:{totalValue:1585e3,activeProducts:3,inactiveProducts:1,totalProducts:4,lowStockAlerts:2,lowStockThreshold:12},inventoryAlerts:[{lotId:"lot-demo-001",productId:"prd-demo-002",qtyAvailable:8,createdAt:O(N(1)),expDate:O(N(-60))},{lotId:"lot-demo-002",productId:"prd-demo-003",qtyAvailable:5,createdAt:O(N(3)),expDate:O(N(-120))}],inventorySettings:{lowStockThreshold:12,updatedAt:O(N(5))},salesDaily:Array.from({length:14}).map((e,t)=>{const n=13-t,s=35e4+t%5*42e3;return{date:O(N(n)).slice(0,10),total:s,count:4+t%3}}),purchaseDaily:Array.from({length:14}).map((e,t)=>{const n=13-t,s=22e4+t%4*38e3;return{date:O(N(n)).slice(0,10),total:s,count:2+t%2}})};function ce(e){return`${e}-${Math.random().toString(36).slice(2,10)}`}function F(e){return e?.toLowerCase().normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"")??""}function et(e,t){return t?e?F(e).includes(t):!1:!0}function me(e,t=0,n=20){const s=n>0?n:20,r=t*s,a=e.slice(r,r+s),o=e.length,i=s>0?Math.ceil(o/s):0;return{content:a,totalElements:o,totalPages:i,size:s,number:t,hasNext:i>0?t+1<i:!1}}function v(e,t,n){return ze?Promise.resolve(an(n())):t().catch(s=>{if(nt(s))return Jn(e),an(n());throw s})}function tt(e,t,n){return ze?(n(),Promise.resolve()):t().catch(s=>{if(nt(s)){Jn(e),n();return}throw s})}function Rt(){const e=m.products.filter(t=>t.active).length;m.inventorySummary={totalValue:Number(m.inventorySummary.totalValue)||0,activeProducts:e,inactiveProducts:m.products.length-e,totalProducts:m.products.length,lowStockAlerts:m.inventoryAlerts.length,lowStockThreshold:m.inventorySettings.lowStockThreshold}}O(N(0));function qa(e){const t=m.companies.find(n=>n.id===e);if(!t)throw new Error("Company not found");return t}function Ua(e,t){const n=m.companies.findIndex(a=>a.id===e);if(n===-1)throw new Error("Company not found");const r={...m.companies[n],businessName:t.businessName,rut:t.rut,businessActivity:t.businessActivity,address:t.address,commune:t.commune,phone:t.phone,email:t.email?.toLowerCase(),receiptFooterMessage:t.receiptFooterMessage,updatedAt:new Date().toISOString()};return m.companies=[...m.companies.slice(0,n),r,...m.companies.slice(n+1)],r}const Ba=["ROLE_ADMIN","ROLE_SALES","ROLE_SELLER","ROLE_PURCHASES","ROLE_BUYER","ROLE_INVENTORY","ROLE_FINANCE","ROLE_REPORTS","ROLE_SETTINGS"];function Tt(e){return{id:e.id,email:e.email,name:e.name,role:e.role,status:e.status,roles:[...e.roles],createdAt:e.createdAt}}function es(e){if(!e||!e.trim())throw new Error("Email is required");return e.trim().toLowerCase()}function ts(e){if(!e||!e.trim())throw new Error("Name is required");return e.trim()}function ns(e){if(!e||!e.trim())return"active";const t=e.trim().toLowerCase();if(t==="active")return"active";if(t==="disabled"||t==="inactive")return"disabled";throw new Error(`Unsupported status: ${e}`)}function ss(e){const t=Array.isArray(e)&&e.length>0?e:["ROLE_ADMIN"],n=[];for(const s of t){if(!s||!s.trim())continue;let r=s.trim().toUpperCase();if(r.startsWith("ROLE_")||(r=`ROLE_${r}`),!Ba.includes(r))throw new Error(`Unsupported role: ${s}`);n.includes(r)||n.push(r)}return n.length===0&&n.push("ROLE_ADMIN"),n}function rs(e,t){if(e&&e.trim())return e.trim();const n=t[0]??"ROLE_ADMIN";return n.startsWith("ROLE_")&&n.length>5?n.substring(5).toLowerCase():n.toLowerCase()}function as(e,t){const n=m.userAccounts.find(s=>s.email.toLowerCase()===e.toLowerCase());if(n&&n.id!==t)throw new Error("Email already registered")}function os(e){if(!e||e.trim().length<8)throw new Error("Password must be at least 8 characters long")}function $a(){return m.userAccounts.map(e=>Tt(e))}function za(e){const t=es(e.email);as(t);const n=ts(e.name),s=ss(e.roles??void 0),r=ns(e.status??void 0);os(e.password);const a={id:ce("usr-demo"),email:t,name:n,role:rs(e.role??null,s),status:r,roles:s,createdAt:new Date().toISOString(),password:e.password};return m.userAccounts=[...m.userAccounts,a],Tt(a)}function Ka(e,t){const n=m.userAccounts.findIndex(u=>u.id===e);if(n===-1)throw new Error("User not found");const s=es(t.email);as(s,e);const r=ts(t.name),a=ss(t.roles??void 0),o=ns(t.status??void 0),c={...m.userAccounts[n],email:s,name:r,role:rs(t.role??null,a),status:o,roles:a};return m.userAccounts=[...m.userAccounts.slice(0,n),c,...m.userAccounts.slice(n+1)],Tt(c)}function Ha(e,t){const n=m.userAccounts.findIndex(r=>r.id===e);if(n===-1)throw new Error("User not found");os(t.password);const s=m.userAccounts[n];m.userAccounts[n]={...s,password:t.password}}function Va(e){const t=F(e?.q??""),n=e?.status??"active",s=m.products.filter(o=>n!=="all"&&o.active!==(n==="active")?!1:t?[o.name,o.sku,o.barcode,o.description].some(i=>et(i,t)):!0),r=e?.page??0,a=e?.size??20;return me(s,r,a)}function Qa(e,t){const n=F(e);if(!n)return null;const s=r=>F(r??"")===n;return m.products.find(r=>t==="barcode"?s(r.barcode??null):t==="sku"?s(r.sku):t==="qr"?s(r.qrUrl??null):!1)??null}function Wa(e){const t=[{lotId:`${e}-lot-1`,quantity:42,locationCode:"BC",locationName:"Bodega central",expDate:new Date(Date.now()+10368e6).toISOString()},{lotId:`${e}-lot-2`,quantity:18,locationCode:"TP",locationName:"Tienda principal",expDate:new Date(Date.now()+3888e6).toISOString()}],n=t.reduce((r,a)=>r+a.quantity,0),s=m.products.findIndex(r=>r.id===e);return s!==-1&&(m.products=m.products.map((r,a)=>a===s?{...r,stock:n}:r)),{productId:e,total:n,lots:t}}function Ga(e,t){const n=Yn(m.productPrices[e]).sort((s,r)=>r.validFrom.localeCompare(s.validFrom));return me(n,t?.page??0,t?.size??n.length)}function Ja(e,t){const n={id:ce("pp-demo"),productId:e,price:t.price,validFrom:t.validFrom??new Date().toISOString()},s=Yn(m.productPrices[e]);m.productPrices[e]=[n,...s];const r=m.products.findIndex(a=>a.id===e);if(r!==-1){const a={...m.products[r],currentPrice:t.price};m.products=m.products.map((o,i)=>i===r?a:o)}return n}function Ya(){return m.suppliers}function Xa(e){const t={id:ce("sup-demo"),name:e.name,rut:e.rut,address:e.address??null,commune:e.commune??null,businessActivity:e.businessActivity??null,phone:e.phone??null,email:e.email??null,createdAt:O(new Date)};return m.suppliers=[...m.suppliers,t],t}function Za(e,t){const n=m.suppliers.findIndex(r=>r.id===e);if(n===-1)throw new Error("Proveedor no encontrado");const s={...m.suppliers[n],...t};return m.suppliers=m.suppliers.map((r,a)=>a===n?s:r),s}function eo(e){m.suppliers=m.suppliers.filter(t=>t.id!==e)}function to(e={}){const t=F(e.q??""),n=e.segment?.trim(),s=m.customers.filter(r=>{if(n&&n.length>0){if(n===bt){if(r.segment&&r.segment.trim())return!1}else if(F(r.segment)!==F(n))return!1}return t?[r.name,r.email,r.phone,r.address,r.document,r.commune].some(a=>et(a,t)):!0});return me(s,e.page??0,e.size??20)}function no(e){const t={id:ce("cus-demo"),name:e.name,address:e.address,lat:e.lat??null,lng:e.lng??null,phone:e.phone,email:e.email,segment:e.segment,document:e.document??null,commune:e.commune??null};return m.customers=[t,...m.customers],t}function so(e,t){const n=m.customers.findIndex(r=>r.id===e);if(n===-1)throw new Error("Cliente no encontrado");const s={...m.customers[n],...t,lat:t.lat??null,lng:t.lng??null};return m.customers=m.customers.map((r,a)=>a===n?s:r),s}function ro(e){m.customers=m.customers.filter(t=>t.id!==e)}function ao(){const e=new Map;for(const t of m.customers){const n=t.segment&&t.segment.trim()?t.segment:bt,s=n;if(!e.has(s)){const r=n===bt?"Sin segmentar":t.segment??"Sin segmentar";e.set(s,{code:s,name:r,segment:r,total:0,color:null})}e.get(s).total+=1}return Array.from(e.values())}function is(e){return["PYMERP DEMO",`Documento: ${e.docType}`,`Venta: ${e.id}`,`Cliente: ${e.customer?.name??"Mostrador"}`,`Total: $${Number(e.total).toLocaleString("es-CL")}`,"Gracias por utilizar el modo demo"].join(`
`)}function oo(e={}){const t=F(e.search??""),n=m.sales.filter(s=>e.status&&e.status.trim()&&F(s.status)!==F(e.status)||e.docType&&e.docType.trim()&&F(s.docType)!==F(e.docType)||e.paymentMethod&&e.paymentMethod.trim()&&F(s.paymentMethod)!==F(e.paymentMethod)||e.from&&s.issuedAt<e.from||e.to&&s.issuedAt>e.to?!1:t?[s.docType,s.paymentMethod,s.customerName,s.customerId,s.id].filter(Boolean).some(r=>et(String(r),t)):!0);return me(n,e.page??0,e.size??20)}function io(e){const t=m.saleDetails[e];if(!t)throw new Error("Venta no encontrada");return t}function co(e){const t=ce("sal-demo"),n=e.items.reduce((u,l)=>u+l.qty*l.unitPrice-(l.discount??0),0),s=Math.round(n*.19),r=n-s,o=`${(e.docType||"DOC").slice(0,3).toUpperCase()}-${t.slice(-4).toUpperCase()}`,i={id:t,customerId:e.customerId,customerName:m.customers.find(u=>u.id===e.customerId)?.name,docNumber:o,docType:e.docType,paymentMethod:e.paymentMethod??"transferencia",status:"emitida",net:r,vat:s,total:n,issuedAt:new Date().toISOString()};m.sales=[i,...m.sales];const c={...i,docType:e.docType,paymentMethod:i.paymentMethod??"transferencia",customer:i.customerId?{id:i.customerId,name:i.customerName??"Cliente"}:null,items:e.items.map(u=>({productId:u.productId,productName:m.products.find(l=>l.id===u.productId)?.name??u.productId,qty:u.qty,unitPrice:u.unitPrice,discount:u.discount??0,lineTotal:u.qty*u.unitPrice-(u.discount??0)})),thermalTicket:""};return c.thermalTicket=is(c),m.saleDetails[t]=c,{id:t,customerId:i.customerId,customerName:i.customerName,status:i.status,net:i.net,vat:i.vat,total:i.total,issuedAt:i.issuedAt,docType:i.docType??"Factura",paymentMethod:i.paymentMethod??"transferencia",docNumber:i.docNumber}}function cs(e,t){const n=m.sales.findIndex(a=>a.id===e);if(n===-1)throw new Error("Venta no encontrada");const s={...m.sales[n],...t};m.sales=m.sales.map((a,o)=>o===n?s:a);const r=m.saleDetails[e];return r&&(m.saleDetails[e]={...r,docType:s.docType??r.docType,docNumber:s.docNumber??r.docNumber,paymentMethod:s.paymentMethod??r.paymentMethod,status:s.status??r.status,thermalTicket:is({...r,...s})}),{id:s.id,customerId:s.customerId,customerName:s.customerName,status:s.status,net:s.net,vat:s.vat,total:s.total,issuedAt:s.issuedAt,docType:s.docType??"Factura",paymentMethod:s.paymentMethod??"transferencia",docNumber:s.docNumber}}function uo(e){return cs(e,{status:"cancelled"})}function lo(e=14){return m.salesDaily.slice(-e)}function fo(e,t){return!e||!t||e>t?[]:m.salesDaily.filter(n=>n.date>=e&&n.date<=t)}function po(e){const t=e.trim(),n=/^(\d+)\s*d$/i.exec(t);if(!n)return 14;const s=Number.parseInt(n[1],10);return Number.isNaN(s)?14:Math.max(1,s)}function cn(e,t){if(!e||!t)return null;const n=new Date(`${e}T00:00:00Z`),s=new Date(`${t}T00:00:00Z`);if(Number.isNaN(n.getTime())||Number.isNaN(s.getTime()))return null;const r=n.getTime(),a=s.getTime()+86399999;return r<=a?{start:r,end:a}:{start:a,end:r}}function ho({from:e,to:t}){const n=cn(e,t);if(!n)return{totalDay:0,topProduct:null,topPaymentMethods:[]};const s=new Set(["boleta","factura"]),r=m.sales.filter(p=>{if(!p.issuedAt||p.status==="cancelled")return!1;const w=F(p.docType);if(w&&!s.has(w))return!1;const P=new Date(p.issuedAt).getTime();return P>=n.start&&P<=n.end}),a=cn(t,t),o=r.reduce((p,w)=>{if(!a)return p;const P=new Date(w.issuedAt).getTime();return P>=a.start&&P<=a.end?p+(w.total??0):p},0),i=new Map;r.forEach(p=>{(m.saleDetails[p.id]?.items??[]).forEach(h=>{const b=h.productId??h.productName;if(!b)return;const g=i.get(b)??{id:b,name:h.productName,qty:0};g.qty+=h.qty??0,g.name=h.productName,i.set(b,g)})});let c=null;i.forEach(p=>{(!c||p.qty>c.qty)&&(c=p)});const u=new Map;r.forEach(p=>{const w=p.paymentMethod?.trim().length?p.paymentMethod:"Sin mtodo";u.set(w,(u.get(w)??0)+1)});const l=Array.from(u.entries()).sort((p,w)=>w[1]-p[1]).map(([p,w])=>({method:p,count:w}));return{totalDay:o,topProduct:c,topPaymentMethods:l}}function mo({from:e,to:t}){if(!e||!t||e>t)return{purchase:[],sale:[]};const n=m.purchaseDaily.filter(r=>r.date>=e&&r.date<=t).map(r=>({date:r.date,value:r.total})),s=m.salesDaily.filter(r=>r.date>=e&&r.date<=t).map(r=>({date:r.date,value:r.total}));return{purchase:n,sale:s}}function yo(e){const t=po(e),n=lo(t),s=n.reduce((o,i)=>o+(i.total??0),0),r=n.reduce((o,i)=>o+(i.count??0),0),a=t>0?s/t:0;return{window:e,totalWithTax:s,dailyAverage:a,documentCount:r}}function go(e){const t=new Date,n=new Date(t),s=new Date(t);switch(s.setHours(0,0,0,0),e){case"week":s.setDate(s.getDate()-6);break;case"month":s.setDate(1);break}const r=n.getTime(),a=s.getTime(),o=new Set(["boleta","factura"]),i=m.sales.filter(l=>{if(!l.issuedAt||l.status?.toLowerCase()==="cancelled")return!1;const p=F(l.docType);if(p&&!o.has(p))return!1;const w=new Date(l.issuedAt).getTime();return Number.isNaN(w)?!1:w>=a&&w<=r}),c=i.reduce((l,p)=>l+(p.total??0),0),u=i.reduce((l,p)=>l+(p.net??0),0);return{period:e,total:c,net:u,count:i.length}}function bo(e,t=20){if(!e)return[];const n=t>0?t:20,s=new Map(m.products.map(a=>[a.id,a])),r=new Map;return Object.values(m.saleDetails).forEach(a=>{if(a.customer?.id!==e||a.status?.toLowerCase()==="cancelled")return;const o=a.issuedAt??new Date().toISOString();a.items.forEach(i=>{if(!i.productId)return;const c=s.get(i.productId),u=r.get(i.productId)??{productId:i.productId,name:c?.name??i.productName??i.productId,sku:c?.sku??"",totalPurchases:0,totalQty:0,lastPurchasedAt:o,lastUnitPrice:void 0,lastQty:void 0},l=Number(i.qty)||0;u.totalPurchases+=1,u.totalQty+=l;const p=new Date(u.lastPurchasedAt).getTime(),w=new Date(o).getTime();(!u.lastPurchasedAt||Number.isNaN(p)||w>=p)&&(u.lastPurchasedAt=o,u.lastUnitPrice=Number(i.unitPrice)||(c?.currentPrice?Number(c.currentPrice):void 0),u.lastQty=l>0?l:u.lastQty,u.name=c?.name??i.productName??u.name,u.sku=c?.sku??u.sku),r.set(i.productId,u)})}),Array.from(r.values()).sort((a,o)=>{if(o.totalPurchases!==a.totalPurchases)return o.totalPurchases-a.totalPurchases;const i=new Date(a.lastPurchasedAt).getTime();return new Date(o.lastPurchasedAt).getTime()-i}).slice(0,n).map(a=>({productId:a.productId,name:a.name,sku:a.sku,lastPurchasedAt:a.lastPurchasedAt,totalPurchases:a.totalPurchases,avgQty:a.totalPurchases>0?a.totalQty/a.totalPurchases:void 0,lastUnitPrice:a.lastUnitPrice,lastQty:a.lastQty}))}function vo(e){return e.documentNumber&&e.documentNumber.trim()?e.documentNumber:e.docNumber&&e.docNumber.trim()?e.docNumber:e.series&&(e.folio??"")!==""?`${e.series}-${e.folio}`:e.id}function wo(e={}){const t=e.size&&e.size>0?e.size:10,n=e.page??0,s=e.sort?.toLowerCase()??"date,desc",a=[...m.sales].sort((o,i)=>{const c=o.issuedAt??"",u=i.issuedAt??"";return s==="date,asc"?c.localeCompare(u):u.localeCompare(c)}).map(o=>({id:o.id,documentNumber:vo(o),docNumber:o.docNumber,series:o.series,folio:o.folio,date:o.issuedAt,customerName:o.customerName??o.customerId??"",total:o.total,status:o.status,docType:o.docType,links:Ma(o.id)}));return me(a,n,t)}function So(e){return xt(e,"preview")}function Ao(e,t="OFFICIAL"){const n=t==="LOCAL"?"preview":"download",s=`${e}-${t.toLowerCase()}`;return xt(s,n)}function Po(e={}){const t=F(e.search??""),n=m.purchases.filter(s=>e.status&&e.status.trim()&&F(s.status)!==F(e.status)||e.docType&&e.docType.trim()&&F(s.docType)!==F(e.docType)||e.from&&s.issuedAt<e.from||e.to&&s.issuedAt>e.to?!1:t?[s.docNumber,s.supplierName,s.supplierId].some(r=>et(r,t)):!0);return me(n,e.page??0,e.size??20)}function us(e,t){const n=m.purchases.findIndex(r=>r.id===e);if(n===-1)throw new Error("Compra no encontrada");const s={...m.purchases[n],...t};return m.purchases=m.purchases.map((r,a)=>a===n?s:r),s}function Eo(e){return us(e,{status:"cancelled"})}function Co(e){const t=ce("pur-demo"),n={id:t,supplierId:e.supplierId,supplierName:m.suppliers.find(s=>s.id===e.supplierId)?.name,docType:e.docType,docNumber:e.docNumber,status:"received",net:e.net,vat:e.vat,total:e.total,issuedAt:e.issuedAt};return m.purchases=[n,...m.purchases],{id:t}}function Oo(e=14){return m.purchaseDaily.slice(-e)}function xo(e){return typeof e=="number"?m.inventoryAlerts.filter(t=>Number(t.qtyAvailable)<=e):m.inventoryAlerts}function Ro(){return Rt(),m.inventorySummary}function To(){return m.inventorySettings}function No(e){return m.inventorySettings={lowStockThreshold:e.lowStockThreshold,updatedAt:new Date().toISOString()},Rt(),m.inventorySettings}function Do(e){const t=e.direction??"increase",n=t==="decrease"?-Math.abs(e.quantity):Math.abs(e.quantity),s=m.inventoryAlerts.findIndex(r=>r.productId===e.productId);if(s!==-1){const r=m.inventoryAlerts[s],a=Number(r.qtyAvailable)+n;m.inventoryAlerts[s]={...r,qtyAvailable:a,createdAt:new Date().toISOString(),expDate:e.expDate??r.expDate??null}}else t==="decrease"&&(m.inventoryAlerts=[...m.inventoryAlerts,{lotId:ce("lot-demo"),productId:e.productId,qtyAvailable:Math.max(0,e.quantity),createdAt:new Date().toISOString(),expDate:e.expDate??null}]);return Rt(),{productId:e.productId,appliedQuantity:e.quantity,direction:t}}function nt(e){return k.isAxiosError(e)&&!e.response}function ls(){return{token:Da,expiresIn:86400,refreshToken:Gn,refreshExpiresIn:2592e3,companyId:Ze,email:Ot,name:"Administrador Demo",roles:[...ka],modules:[...Ia]}}let Ke=null,He=Xe;const y=k.create({baseURL:Na,timeout:1e4});y.interceptors.request.use(e=>{const t=e.headers??{};return Ke&&(t.Authorization=`Bearer ${Ke}`),He&&(t["X-Company-Id"]=He),e.headers=t,e});const bt="__UNASSIGNED__";function Ee(e){Object.prototype.hasOwnProperty.call(e,"token")&&(Ke=e.token??null),Object.prototype.hasOwnProperty.call(e,"companyId")&&(He=e.companyId??Xe),Object.prototype.hasOwnProperty.call(e,"refreshToken")&&e.refreshToken}function ko(){Ke=null,He=Xe}async function Io(e){try{const{data:t}=await y.post("/v1/auth/login",e);return Ee({token:t.token,companyId:t.companyId,refreshToken:t.refreshToken}),t}catch(t){if(nt(t)&&e.email===Ot&&e.password===Wn){const n=ls();return console.warn("Login API unreachable. Using local development session."),Ee({token:n.token,companyId:n.companyId,refreshToken:n.refreshToken}),n}throw t}}async function Fo(e){if(!e.refreshToken)throw new Error("Refresh token is required");try{const{data:t}=await y.post("/v1/auth/refresh",null,{headers:{"X-Refresh-Token":e.refreshToken}});return Ee({token:t.token,companyId:t.companyId,refreshToken:t.refreshToken}),t}catch(t){if(nt(t)&&e.refreshToken===Gn){const n=ls();return console.warn("Refresh API unreachable. Keeping local development session active."),Ee({token:n.token,companyId:n.companyId,refreshToken:n.refreshToken}),n}throw t}}async function Lo(e){const t={rut:e.rut,fullName:e.fullName,address:e.address,email:e.email,companyName:e.companyName,password:e.password,confirmPassword:e.confirmPassword,captcha:e.captcha},{data:n}=await y.post("/v1/requests",t);return n}function Ri(e){return v("fetchCompany",async()=>{const{data:t}=await y.get(`/v1/companies/${e}`);return t},()=>qa(e))}function Ti(e,t){return v("updateCompany",async()=>{const{data:n}=await y.put(`/v1/companies/${e}`,t);return n},()=>Ua(e,t))}function Ni(){return v("listCompaniesWithDetails",async()=>{const{data:e}=await y.get("/v1/companies");return e},()=>[])}function Di(e){return v("createCompanyWithDetails",async()=>{const{data:t}=await y.post("/v1/companies",e);return t},()=>({id:`company-${Date.now()}`,...e,parentLocations:e.parentLocations?.map((t,n)=>({id:`loc-${n}`,...t}))||[]}))}function ki(e,t){return v("updateCompanyWithDetails",async()=>{const{data:n}=await y.put(`/v1/companies/${e}`,t);return n},()=>({id:e,...t,parentLocations:t.parentLocations?.map((n,s)=>({id:`loc-${s}`,...n}))||[]}))}function Ii(e){return tt("deleteCompanyWithDetails",async()=>{await y.delete(`/v1/companies/${e}`)},()=>Promise.resolve())}function Fi(e){return v("getCompanyParentLocations",async()=>{const{data:t}=await y.get(`/v1/companies/${e}/parent-locations`);return t},()=>[])}function Li(){return v("listUserAccounts",async()=>{const{data:e}=await y.get("/v1/users");return e},()=>$a())}function ji(e){return v("createUserAccount",async()=>{const{data:t}=await y.post("/v1/users",e);return t},()=>za(e))}function Mi(e,t){return v("updateUserAccount",async()=>{const{data:n}=await y.put(`/v1/users/${e}`,t);return n},()=>Ka(e,t))}function _i(e,t){return tt("updateUserPassword",async()=>{await y.post(`/v1/users/${e}/password`,t)},()=>Ha(e,t))}function qi(e){return v("listProducts",async()=>{const{data:t}=await y.get("/v1/products",{params:e});return t},()=>Va(e))}function Ui(e){return v("lookupProduct",async()=>{try{const{data:t}=await y.get("/v1/products/lookup",{params:{q:e.query,type:e.type}});return t??null}catch(t){if(k.isAxiosError(t)&&t.response?.status===404)return null;throw t}},()=>Qa(e.query,e.type))}function Bi(e){return v("fetchProductStock",async()=>{const{data:t}=await y.get(`/v1/products/${e}/stock`);return t},()=>Wa(e))}function $i(){return v("listLowStockProducts",async()=>{const{data:e}=await y.get("/v1/products/low-stock");return e},()=>[])}function zi(e){return v("listInventoryMovements",async()=>{const{data:t}=await y.get("/v1/inventory/movements",{params:e||{}});return t},()=>({content:[],totalElements:0,totalPages:0,size:20,number:0}))}async function Ki(e,t){await y.post(`/v1/inventory/lots/${e}/transfer`,t)}function Hi(e,t){return v("listSuppliers",async()=>{const n={};e&&(n.query=e),t!==void 0&&(n.active=t);const{data:s}=await y.get("/v1/suppliers",{params:Object.keys(n).length>0?n:void 0});return s},()=>Ya())}function Vi(e){return v("createSupplier",async()=>{const{data:t}=await y.post("/v1/suppliers",e);return t},()=>Xa(e))}function Qi(e,t){return v("updateSupplier",async()=>{const{data:n}=await y.put(`/v1/suppliers/${e}`,t);return n},()=>Za(e,t))}function Wi(e){return tt("deleteSupplier",()=>y.delete(`/v1/suppliers/${e}`),()=>eo(e))}function Gi(e){return v("listSupplierContacts",async()=>{const{data:t}=await y.get(`/v1/suppliers/${e}/contacts`);return t},()=>[])}function Ji(e,t){return v("createSupplierContact",async()=>{const{data:n}=await y.post(`/v1/suppliers/${e}/contacts`,t);return n},()=>({id:crypto.randomUUID(),supplierId:e,...t}))}function Yi(e,t){const n={};return y.get("/v1/suppliers/export",{params:Object.keys(n).length>0?n:void 0,responseType:"blob"}).then(s=>s.data)}async function Xi(e){const t=new FormData;t.append("file",e);const{data:n}=await y.post("/v1/suppliers/import",t,{headers:{"Content-Type":"multipart/form-data"}});return n}function Zi(e){return v("getSupplierMetrics",async()=>{const{data:t}=await y.get(`/v1/suppliers/${e}/metrics`);return t},()=>({totalPurchases:0,totalAmount:0,averageOrderValue:0,lastPurchaseDate:null,purchasesLastMonth:0,amountLastMonth:0,purchasesPreviousMonth:0,amountPreviousMonth:0}))}function ec(){return v("getSupplierAlerts",async()=>{const{data:e}=await y.get("/v1/suppliers/alerts");return e},()=>[])}function tc(e="volume"){return v("getSupplierRanking",async()=>{const{data:t}=await y.get("/v1/suppliers/ranking",{params:{criteria:e}});return t},()=>[])}function nc(){return v("getSupplierRiskAnalysis",async()=>{const{data:e}=await y.get("/v1/suppliers/risk-analysis");return e},()=>({categoryA:[],categoryB:[],categoryC:[],concentrationIndex:0,singleSourceProductsCount:0,totalPurchaseVolume:0}))}function sc(e,t){return v("getSupplierPriceHistory",async()=>{const{data:n}=await y.get(`/v1/suppliers/${e}/price-history`,{params:{productId:t}});return n},()=>({supplierId:e,supplierName:"Proveedor",productId:t,productName:"Producto",priceHistory:[],currentPrice:0,averagePrice:0,minPrice:0,maxPrice:0,trend:"STABLE",trendPercentage:0}))}function rc(){return v("getNegotiationOpportunities",async()=>{const{data:e}=await y.get("/v1/suppliers/negotiation-opportunities");return e},()=>[])}function ac(){return v("getSingleSourceProducts",async()=>{const{data:e}=await y.get("/v1/suppliers/single-source-products");return e},()=>[])}function oc(e){return v(`getSupplierForecast-${e}`,async()=>{const{data:t}=await y.get(`/v1/suppliers/${e}/forecast`);return t},()=>({supplierId:e,supplierName:"Proveedor",monthlyForecasts:[],averageMonthlySpend:0,projectedNextMonthSpend:0,averageMonthlyOrders:0,trend:"STABLE",recommendation:""}))}function ic(e={}){return v("listCustomers",async()=>{const t=e.page??0,n=e.size??20,s={page:t,size:n,sort:e.sort??"createdAt,desc"};e.q&&e.q.trim()&&(s.q=e.q.trim()),e.segment&&e.segment.trim()&&(s.segment=e.segment.trim());const{data:r}=await y.get("/v1/customers",{params:s}),a=r,o=a.content??a.items??[],i=a.size??n,c=typeof a.totalElements=="number"?a.totalElements:typeof a.total=="number"?a.total:o.length,u=typeof a.number=="number"?a.number:typeof a.page=="number"?a.page:t,l=typeof a.totalPages=="number"?a.totalPages:i>0?Math.ceil(c/i):0,p=typeof a.hasNext=="boolean"?a.hasNext:l>0?u+1<l:o.length===i;return{...a,content:o,size:i,totalElements:c,totalPages:l,number:u,hasNext:p}},()=>to(e))}function cc(){return v("listCustomerSegments",async()=>{const{data:e}=await y.get("/v1/customer-segments/stats");return e},()=>ao())}function uc(e){return v("createCustomer",async()=>{const{data:t}=await y.post("/v1/customers",e);return t},()=>no(e))}function lc(e,t){return v("updateCustomer",async()=>{const{data:n}=await y.put(`/v1/customers/${e}`,t);return n},()=>so(e,t))}function dc(e){return tt("deleteCustomer",()=>y.delete(`/v1/customers/${e}`),()=>ro(e))}async function fc(e){const{data:t}=await y.get(`/v1/customers/${e}/stats`);return t}async function pc(e,t=0,n=10){const{data:s}=await y.get(`/v1/customers/${e}/sales`,{params:{page:t,size:n}});return s}function hc(e,t){return v("listProductPrices",async()=>{const{data:n}=await y.get(`/v1/products/${e}/prices`,{params:t});return n},()=>Ga(e,t))}function mc(e,t){return v("createProductPrice",async()=>{const{data:n}=await y.post(`/v1/products/${e}/prices`,t);return n},()=>Ja(e,t))}function yc(e={}){return v("listSales",async()=>{const{data:t}=await y.get("/v1/sales",{params:e});return t},()=>oo(e))}function gc(e,t){return v("updateSale",async()=>{const{data:n}=await y.put(`/v1/sales/${e}`,t);return n},()=>cs(e,t))}function bc(e){return v("cancelSale",async()=>{const{data:t}=await y.post(`/v1/sales/${e}/cancel`,{});return t},()=>uo(e))}function vc(e){return v("getSaleDetail",async()=>{const{data:t}=await y.get(`/v1/sales/${e}`);return t},()=>io(e))}function wc(e){return v("getDashboardSalesMetrics",async()=>{const{data:t}=await y.get("/v1/sales/metrics",{params:e});return t},()=>ho(e))}function Sc(e){return v("getPurchaseSaleTrend",async()=>{const{data:t}=await y.get("/v1/trend",{params:e});return t},()=>mo(e))}function Ac(e="14d"){const t=e&&e.trim().length>0?e:"14d";return v("getSalesWindowMetrics",async()=>{const{data:n}=await y.get("/v1/sales/metrics",{params:{window:t}});return n},()=>yo(t))}function Pc(e){return v("getSalesSummaryByPeriod",async()=>{const{data:t}=await y.get("/v1/sales/metrics/summary",{params:{period:e}});return t},()=>go(e))}function Ec(e){return e?v("getFrequentProducts",async()=>{const{data:t}=await y.get(`/v1/customers/${e}/frequent-products`,{params:{limit:20}});return t},()=>bo(e,20)):Promise.resolve([])}function Cc(e={}){const{page:t=0,size:n=10,sort:s="date,DESC"}=e;return v("listSaleDocuments",async()=>{const{data:r}=await y.get("/v1/documents",{params:{type:"SALE",page:t,size:n,sort:s}});return r},()=>wo({page:t,size:n,sort:s}))}function Oc(e){return v("getDocumentPreview",async()=>{const t=await y.get(`/v1/documents/${e}`,{responseType:"blob"});return Xn(t,`${e}.pdf`)},()=>So(e))}function jo(e,t={}){const{fallbackName:n="document.pdf",offlineId:s,version:r="OFFICIAL"}=t;return v("downloadDocument",async()=>{const a=await y.get(e,{responseType:"blob"});return Xn(a,n)},()=>{const o=ja(e)??(s?{id:s,version:r}:null);return o?Ao(o.id,o.version):xt(n.replace(/\.pdf$/i,""),"download")})}function xc(e,t="OFFICIAL"){const n=`/v1/billing/documents/${e}/files/${t}`,s=`${e}-${t.toLowerCase()}.pdf`;return jo(n,{fallbackName:s,offlineId:e,version:t})}function Rc(e,t){return v("listSalesDailyByDateRange",async()=>{const{data:n}=await y.get("/v1/sales/metrics/daily-range",{params:{from:e,to:t}});return n},()=>fo(e,t))}function Tc(e,t){return v("getSalesKPIs",async()=>{const n={},{data:s}=await y.get("/v1/sales/kpis",{params:n});return s},()=>({totalRevenue:0,totalCost:0,grossProfit:0,profitMargin:0,totalOrders:0,averageTicket:0,salesGrowth:0,uniqueCustomers:0,customerRetentionRate:0,topProductName:"N/A",topProductRevenue:0,topCustomerName:"N/A",topCustomerRevenue:0,conversionRate:0,periodStart:"",periodEnd:""}))}function Nc(e,t){return v("getSalesABCAnalysis",async()=>{const n={},{data:s}=await y.get("/v1/sales/abc-analysis",{params:n});return s},()=>[])}function Dc(e,t,n){return v("getSalesProductForecast",async()=>{const s={},{data:r}=await y.get("/v1/sales/forecast",{params:s});return r},()=>[])}function kc(e){return v("createSale",async()=>{const{data:t}=await y.post("/v1/sales",e);return t},()=>co(e))}async function Ic(e={}){return(await y.get("/v1/sales/export",{params:e,responseType:"blob"})).data}function Fc(e={}){return v("listPurchases",async()=>{const{data:t}=await y.get("/v1/purchases",{params:e});return t},()=>Po(e))}function Lc(e,t){return v("updatePurchase",async()=>{const{data:n}=await y.put(`/v1/purchases/${e}`,t);return n},()=>us(e,t))}function jc(e){return v("cancelPurchase",async()=>{const{data:t}=await y.post(`/v1/purchases/${e}/cancel`,{});return t},()=>Eo(e))}function Mc(e){return v("getPurchaseDetail",async()=>{const{data:t}=await y.get(`/v1/purchases/${e}/detail`);return t},()=>({id:e,issuedAt:new Date().toISOString(),docType:"Factura",paymentTermDays:30,status:"received",items:[],net:0,vat:0,total:0}))}function _c(e,t){return v("getPurchaseKPIs",async()=>{const{data:n}=await y.get("/v1/purchases/kpis",{params:{from:e,to:t}});return n},()=>({totalSpent:0,totalQuantity:0,totalOrders:0,averageOrderValue:0,purchaseGrowth:0,uniqueSuppliers:0,supplierConcentration:0,topSupplierName:"N/A",topSupplierSpent:0,topCategoryName:"N/A",topCategorySpent:0,onTimeDeliveryRate:0,costPerUnit:0,pendingOrders:0,periodStart:"",periodEnd:""}))}function qc(e,t){return v("getPurchaseABCAnalysis",async()=>{const{data:n}=await y.get("/v1/purchases/abc-analysis",{params:{from:e,to:t}});return n},()=>[])}function Uc(e,t,n){return v("getPurchaseSupplierForecast",async()=>{const{data:s}=await y.get("/v1/purchases/forecast",{params:{from:e,to:t,horizonDays:n}});return s},()=>[])}function Bc(e=14){return v("listPurchaseDaily",async()=>{const{data:t}=await y.get("/v1/purchases/metrics/daily",{params:{days:e}});return t},()=>Oo(e))}function $c(e,t){return v("createPurchase",async()=>{if(t){const n=new FormData;n.append("data",new Blob([JSON.stringify(e)],{type:"application/json"})),n.append("file",t);const{data:s}=await y.post("/v1/purchases",n,{headers:{"Content-Type":"multipart/form-data"}});return s}else{const{data:n}=await y.post("/v1/purchases",e);return n}},()=>Co(e))}async function zc(e={}){return(await y.get("/v1/purchases/export",{params:e,responseType:"blob"})).data}async function Kc(e){const t=new FormData;t.append("file",e);const{data:n}=await y.post("/v1/purchases/import",t,{headers:{"Content-Type":"multipart/form-data"}});return n}async function Hc(e){return v("listLocations",async()=>{const t={},{data:n}=await y.get("/api/locations",{params:t});return n},()=>[])}async function Vc(e){return v("createLocation",async()=>{const{data:t}=await y.post("/api/locations",e);return t},()=>({id:crypto.randomUUID(),companyId:Ze,code:e.code,name:e.name,description:e.description,type:e.type,parentLocationId:e.parentLocationId,active:e.active??!0,isBlocked:e.isBlocked??!1,capacity:e.capacity,capacityUnit:e.capacityUnit??"UNITS",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}))}async function Qc(e){return v("deleteLocation",async()=>{await y.delete(`/api/locations/${e}`)},()=>{})}async function Wc(){return v("getLocationStockSummary",async()=>{const{data:e}=await y.get("/api/locations/stock-summary");return e},()=>[])}async function Gc(e){return v("listServices",async()=>{const t=e!==void 0?{active:e}:{},{data:n}=await y.get("/api/services",{params:t});return n},()=>[])}async function Jc(e){return v("createService",async()=>{const{data:t}=await y.post("/api/services",e);return t},()=>({id:crypto.randomUUID(),companyId:Ze,...e,active:e.active??!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}))}async function Yc(e,t){return v("updateService",async()=>{const{data:n}=await y.put(`/api/services/${e}`,t);return n},()=>({id:e,companyId:Ze,...t,active:t.active??!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}))}async function Xc(e){return v("deleteService",async()=>{await y.delete(`/api/services/${e}`)},()=>{})}function Zc(e){return v("listInventoryAlerts",async()=>{const t=typeof e=="number"?{threshold:e}:{},{data:n}=await y.get("/v1/inventory/alerts",{params:t});return n},()=>xo(e))}function eu(){return v("getInventorySummary",async()=>{const{data:e}=await y.get("/v1/inventory/summary");return e},()=>Ro())}function tu(){return v("getInventorySettings",async()=>{const{data:e}=await y.get("/v1/inventory/settings");return e},()=>To())}function nu(e){return v("updateInventorySettings",async()=>{const{data:t}=await y.put("/v1/inventory/settings",e);return t},()=>No(e))}function su(){return v("getInventoryKPIs",async()=>{const{data:e}=await y.get("/v1/inventory/kpis");return e},()=>({stockCoverageDays:null,turnoverRatio:0,deadStockValue:0,deadStockCount:0,averageLeadTimeDays:0,totalInventoryValue:0,activeProducts:0,criticalStockProducts:0,daysInventoryOnHand:null,overstockValue:0,overstockCount:0}))}function ru(){return v("getStockMovementStats",async()=>{const{data:e}=await y.get("/v1/inventory/movement-stats");return e},()=>({totalInflows:0,totalOutflows:0,inflowTransactions:0,outflowTransactions:0,topInflowProducts:[],topOutflowProducts:[],categoryVelocities:[]}))}function au(e){return v("getABCAnalysis",async()=>{const t={},{data:n}=await y.get("/v1/inventory/abc-analysis",{params:t});return n},()=>[])}function ou(e,t){return v("getForecastAnalysis",async()=>{const n={},{data:s}=await y.get("/v1/inventory/forecast",{params:n});return s},()=>[])}function iu(e){return v("createInventoryAdjustment",async()=>{const{data:t}=await y.post("/v1/inventory/adjustments",e);return t},()=>Do(e))}async function cu(){const{data:e}=await y.get("/v1/finances/summary");return e}async function uu(e){const{data:t}=await y.get("/v1/finances/receivables",{params:e});return t}async function lu(e){const{data:t}=await y.get("/v1/finances/payables",{params:e});return t}async function du(e=30){const{data:t}=await y.get("/v1/finances/cashflow",{params:{days:e}});return t}const vt="pymes.auth.session",ds=S.createContext(void 0);function Mo(){try{const e=localStorage.getItem(vt);if(!e)return null;const t=JSON.parse(e),n={...t,modules:Array.isArray(t.modules)?t.modules:[]};if(!n?.token||!n?.expiresAt||!n?.refreshToken||!n?.refreshExpiresAt)return null;const s=Date.now();return n.expiresAt<=s||n.refreshExpiresAt<=s?null:n}catch{return null}}function un(e){if(!e){localStorage.removeItem(vt);return}localStorage.setItem(vt,JSON.stringify(e))}function _o({children:e}){const[t,n]=S.useState(()=>Mo());S.useEffect(()=>{t?(Ee({token:t.token,companyId:t.companyId,refreshToken:t.refreshToken}),un(t)):(ko(),un(null))},[t]);const s=S.useCallback(async i=>{const c=await Io(i),u=Date.now(),l={...c,modules:Array.isArray(c.modules)?c.modules:[],expiresAt:u+c.expiresIn*1e3,refreshExpiresAt:u+c.refreshExpiresIn*1e3};n(l)},[]),r=S.useCallback(()=>{n(null)},[]),a=S.useCallback(async()=>{if(!t)return;const i={refreshToken:t.refreshToken},c=await Fo(i),u=Date.now(),l={...c,modules:Array.isArray(c.modules)?c.modules:[],expiresAt:u+c.expiresIn*1e3,refreshExpiresAt:u+c.refreshExpiresIn*1e3};n(l)},[t]);S.useEffect(()=>{if(!t)return;const i=Date.now();if(t.refreshExpiresAt<=i){n(null);return}const c=Math.max(t.expiresAt-i-6e4,5e3),u=window.setTimeout(()=>{a().catch(()=>n(null))},c);return()=>window.clearTimeout(u)},[t,a]);const o=S.useMemo(()=>({session:t,isAuthenticated:!!t,login:s,logout:r}),[t,s,r]);return f.jsx(ds.Provider,{value:o,children:e})}function Nt(){const e=S.useContext(ds);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}const Ae="/assets/logo-BW3rfr0A.png",wt=[{to:"/app",label:"Panel",icon:"DB",module:"dashboard"},{to:"/app/sales",label:"Ventas",icon:"VE",module:"sales"},{to:"/app/purchases",label:"Compras",icon:"CO",module:"purchases"},{to:"/app/inventory",label:"Inventario",icon:"IN",module:"inventory"},{to:"/app/customers",label:"Clientes",icon:"CL",module:"customers"},{to:"/app/suppliers",label:"Proveedores",icon:"PR",module:"suppliers"},{to:"/app/finances",label:"Finanzas",icon:"FI",module:"finances"},{to:"/app/reports",label:"Reportes",icon:"RP",module:"reports"},{to:"/app/settings",label:"Configuracion",icon:"CF",module:"settings"}];function qo(){const{session:e,logout:t}=Nt(),[n,s]=S.useState(!1),r=fn(),a=S.useMemo(()=>r.pathname.length>1&&r.pathname.endsWith("/")?r.pathname.replace(/\/+$/,""):r.pathname,[r.pathname]),o=S.useMemo(()=>{const c=new Set(e?.modules??[]);return c.add("dashboard"),c},[e?.modules]),i=S.useMemo(()=>!o||o.size===0?wt:wt.filter(c=>o.has(c.module)),[o]);return f.jsxs("div",{className:"layout",children:[f.jsxs("aside",{className:`sidebar ${n?"open":""}`,children:[f.jsxs("div",{className:"sidebar-header",children:[f.jsx("img",{src:Ae,alt:"Logo empresa",className:"brand-logo brand-logo--sidebar"}),f.jsx("button",{className:"icon-btn mobile-only",onClick:()=>s(!1),"aria-label":"Cerrar menu",children:"Close"})]}),f.jsx("nav",{children:i.map(c=>{const u=c.to==="/app",l=a===c.to||!u&&a.startsWith(c.to);return f.jsxs(ys,{to:c.to,className:`nav-item ${l?"active":""}`,onClick:()=>s(!1),end:u,children:[f.jsx("span",{className:"nav-icon","aria-hidden":!0,children:c.icon}),f.jsx("span",{children:c.label})]},c.to)})})]}),f.jsxs("div",{className:"content",children:[f.jsxs("header",{className:"topbar",children:[f.jsxs("div",{className:"topbar-left",children:[f.jsx("button",{className:"icon-btn desktop-hidden",onClick:()=>s(!0),"aria-label":"Abrir menu",children:"Menu"}),f.jsxs("div",{className:"topbar-brand",children:[f.jsx("img",{src:Ae,alt:"Logo empresa",className:"brand-logo brand-logo--topbar"}),f.jsx("p",{className:"muted small",children:"Control integral de operaciones y finanzas"})]})]}),f.jsxs("div",{className:"topbar-right",children:[f.jsx("span",{className:"muted small hide-mobile",children:e?.email}),f.jsx("button",{className:"btn ghost",onClick:t,children:"Salir"})]})]}),f.jsx("main",{className:"page",children:f.jsx(pn,{})})]})]})}function Uo(e){const t=e.replace(/\./g,"").replace(/-/g,"").trim().toUpperCase();if(t.length<=1)return t;const n=t.slice(0,-1),s=t.slice(-1);return`${n}-${s}`}function Bo(e){if(!e)return!1;const t=e.replace(/\./g,"").replace(/-/g,"").trim().toUpperCase();if(!/^\d{7,8}[0-9K]$/.test(t))return!1;const n=t.slice(0,-1),s=t.slice(-1);return $o(n)===s}function $o(e){let t=0,n=2;for(let r=e.length-1;r>=0;r-=1)t+=parseInt(e[r],10)*n,n=n===7?2:n+1;const s=11-t%11;return s===11?"0":s===10?"K":String(s)}const ln="Muchas gracias! Te contactaremos lo antes posible. PYMERP.cl",le="true".toLowerCase()!=="false",it={rut:"",fullName:"",address:"",email:"",companyName:"",password:"",confirmPassword:""};function de(){const e=Math.floor(Math.random()*7)+3,t=Math.floor(Math.random()*6)+2;return{a:e,b:t}}function zo({children:e,forceLoginOnMount:t=!1,onLoginClose:n}){const{login:s,isAuthenticated:r}=Nt(),a=hn(),[o,i]=S.useState(!0),[c,u]=S.useState("none"),[l,p]=S.useState({email:"",password:""}),[w,P]=S.useState(null),[h,b]=S.useState(0),[g,x]=S.useState(0),[C,R]=S.useState(it),[I,D]=S.useState(null),[$,_]=S.useState(ln),[M,V]=S.useState(()=>de()),[ye,Q]=S.useState(""),ne=S.useRef(null),X=S.useRef(null),W=S.useRef(null),ge=S.useRef("none"),B=S.useRef(!1),se=Ut({mutationFn:A=>s(A),onSuccess:()=>{P(null),b(0),x(0),u("none"),a("/app")},onError:A=>{if(k.isAxiosError(A))if(!A.response)P("No se pudo conectar con el servidor. Intenta nuevamente.");else{const T=A.response.data?.detail??A.response.data?.message??"Credenciales invlidas";P(T)}else P(A.message);b(T=>{const ee=T+1;if(ee>=3){const ve=Math.min(30,(ee-2)*5);x(Ie=>Math.max(Ie,ve))}return ee})}}),z=Ut({mutationFn:Lo,onSuccess:A=>{D(null),_(A?.message??ln),u("success"),R(it),V(de()),Q("")},onError:A=>{if(V(de()),Q(""),k.isAxiosError(A)){const T=A.response?.data,ee=T?.detail??T?.message??T?.error;D(ee??"No se pudo enviar la solicitud. Intenta nuevamente ms tarde.")}else D(A.message)}});S.useEffect(()=>{r?(p({email:"",password:""}),P(null)):(i(!0),u("none"))},[r]),S.useEffect(()=>{if(!t){B.current=!1;return}i(!0),u("login"),B.current=!0},[t]),S.useEffect(()=>{c==="login"&&(ne.current??X.current)?.focus(),c==="request"&&W.current?.focus()},[c]),S.useEffect(()=>{if(c==="none")return;const A=T=>{T.key==="Escape"&&(T.preventDefault(),c==="request"?u("login"):c==="login"?u("none"):c==="success"&&(u(r?"none":"login"),r&&i(!1)))};return window.addEventListener("keydown",A),()=>window.removeEventListener("keydown",A)},[c,r]),S.useEffect(()=>{le||Q(String(M.a+M.b))},[M]),S.useEffect(()=>{if(g<=0)return;const A=window.setInterval(()=>{x(T=>T<=1?0:T-1)},1e3);return()=>window.clearInterval(A)},[g]);const Ne=S.useMemo(()=>r?"Haz clic aqu para acceder y entrar.":"Haz clic para iniciar sesin",[r]),De=()=>{c==="none"&&(r?(i(!1),a("/app")):a("/login"))},G=A=>{c==="none"?(A.preventDefault(),De()):A.stopPropagation()},Z=async A=>{A.preventDefault(),!(se.isPending||g>0)&&(P(null),await se.mutateAsync({email:l.email.trim(),password:l.password}))},be=A=>{A.preventDefault(),D(null);const T=Uo(C.rut);if(!Bo(T)){D("El RUT ingresado no es vlido"),V(de()),Q("");return}if(C.password!==C.confirmPassword){D("Las contraseas no coinciden");return}const ee=M.a+M.b,ve=ye.trim();if(le){const Ie=Number.parseInt(ve,10);if(!ve||Number.isNaN(Ie)||Ie!==ee){D("Debes resolver el captcha correctamente"),V(de()),Q("");return}}z.mutate({rut:T,fullName:C.fullName.trim(),address:C.address.trim(),email:C.email.trim().toLowerCase(),companyName:C.companyName.trim(),password:C.password,confirmPassword:C.confirmPassword,captcha:{a:M.a,b:M.b,answer:le?ve:String(ee)}})},ue=()=>{D(null),R(it),V(de()),Q(""),u("request")},ke=()=>{u("login")},fs=()=>{u(r?"none":"login"),r&&i(!1)};return S.useEffect(()=>{!r&&ge.current==="login"&&c==="none"&&n?.(),ge.current=c},[c,n,r]),f.jsxs(f.Fragment,{children:[e,o&&f.jsxs("div",{className:"landing-overlay",onClick:De,role:"presentation",children:[f.jsx("div",{className:"landing-overlay__gradient"}),f.jsxs("div",{className:`landing-overlay__panel ${c==="none"?"landing-overlay__panel--compact":""}`,onClick:G,children:[c==="none"&&f.jsxs("div",{className:"landing-welcome","aria-live":"polite",children:[f.jsx("img",{src:Ae,alt:"PYMERP",className:"landing-logo"}),f.jsx("p",{className:"landing-hint",children:Ne})]}),c==="login"&&f.jsxs("div",{className:"landing-card",role:"dialog","aria-modal":"true","aria-labelledby":"landing-login-title",children:[f.jsx("img",{src:Ae,alt:"PYMERP",className:"landing-logo landing-logo--small"}),f.jsx("h1",{id:"landing-login-title",children:"Iniciar sesin"}),f.jsx("p",{className:"landing-subtitle",children:"Bienvenid@! Ingresa tus credenciales para acceder."}),f.jsxs("form",{className:"landing-form",onSubmit:Z,children:[f.jsxs("label",{className:"landing-label",children:[f.jsx("span",{children:"Email"}),f.jsx("input",{ref:ne,type:"email",autoComplete:"email",required:!0,value:l.email,onChange:A=>p(T=>({...T,email:A.target.value}))})]}),f.jsxs("label",{className:"landing-label",children:[f.jsx("span",{children:"Contrasea"}),f.jsx("input",{ref:X,type:"password",autoComplete:"current-password",required:!0,value:l.password,onChange:A=>p(T=>({...T,password:A.target.value}))})]}),w&&f.jsx("p",{className:"landing-error",role:"alert","aria-live":"assertive",children:w}),f.jsx("button",{className:"landing-button",type:"submit",disabled:se.isPending||g>0,children:se.isPending?"Ingresando...":g>0?`Reintentar en ${g}s`:"Entrar"}),g>0&&f.jsxs("p",{className:"landing-hint",role:"status","aria-live":"polite",children:["Demasiados intentos fallidos. Espera ",g,"s antes de reintentar."]})]}),f.jsx("button",{type:"button",className:"landing-link",onClick:ue,children:"No tienes cuenta o tienes problemas para acceder? Haz clic aqu"})]}),c==="request"&&f.jsxs("div",{className:"landing-card",role:"dialog","aria-modal":"true","aria-labelledby":"landing-request-title",children:[f.jsxs("div",{className:"landing-card__header",children:[f.jsx("h1",{id:"landing-request-title",children:"Solicitud de registro o recuperacin de cuenta"}),f.jsx("button",{type:"button",className:"landing-close","aria-label":"Cerrar",onClick:ke,children:""})]}),f.jsx("p",{className:"landing-subtitle",children:"Completa los datos para registro/recuperacin."}),f.jsxs("form",{className:"landing-form",onSubmit:be,children:[f.jsxs("label",{className:"landing-label",children:[f.jsx("span",{children:"RUT"}),f.jsx("input",{ref:W,value:C.rut,onChange:A=>R(T=>({...T,rut:A.target.value})),required:!0})]}),f.jsxs("label",{className:"landing-label",children:[f.jsx("span",{children:"Nombre completo"}),f.jsx("input",{value:C.fullName,onChange:A=>R(T=>({...T,fullName:A.target.value})),required:!0})]}),f.jsxs("label",{className:"landing-label",children:[f.jsx("span",{children:"Direccin"}),f.jsx("input",{value:C.address,onChange:A=>R(T=>({...T,address:A.target.value})),required:!0})]}),f.jsxs("label",{className:"landing-label",children:[f.jsx("span",{children:"Email"}),f.jsx("input",{type:"email",value:C.email,onChange:A=>R(T=>({...T,email:A.target.value})),required:!0})]}),f.jsxs("label",{className:"landing-label",children:[f.jsx("span",{children:"Nombre de la empresa"}),f.jsx("input",{value:C.companyName,onChange:A=>R(T=>({...T,companyName:A.target.value})),required:!0})]}),f.jsxs("label",{className:"landing-label",children:[f.jsx("span",{children:"Contrasea"}),f.jsx("input",{type:"password",value:C.password,onChange:A=>R(T=>({...T,password:A.target.value})),required:!0,minLength:8})]}),f.jsxs("label",{className:"landing-label",children:[f.jsx("span",{children:"Repetir contrasea"}),f.jsx("input",{type:"password",value:C.confirmPassword,onChange:A=>R(T=>({...T,confirmPassword:A.target.value})),required:!0,minLength:8})]}),f.jsxs("label",{className:"landing-label landing-captcha",children:[f.jsxs("span",{className:"landing-captcha__label",children:["Captcha: Cunto es ",M.a," + ",M.b,"?"]}),f.jsx("input",{inputMode:"numeric",pattern:"\\\\d*",value:ye,onChange:A=>Q(A.target.value.replace(/[^0-9]/g,"")),required:le,"aria-required":le,"aria-label":`Captcha: Cunto es ${M.a} + ${M.b}?`})]}),!le&&f.jsx("p",{className:"landing-captcha__label",role:"status",children:"Captcha deshabilitado en este entorno (respuesta enviada automticamente)."}),I&&f.jsx("p",{className:"landing-error",role:"alert","aria-live":"assertive",children:I}),f.jsx("button",{className:"landing-button",type:"submit",disabled:z.isPending,children:z.isPending?"Enviando...":"Enviar solicitud"})]})]}),c==="success"&&f.jsxs("div",{className:"landing-card",role:"dialog","aria-modal":"true","aria-labelledby":"landing-success-title",children:[f.jsx("img",{src:Ae,alt:"PYMERP",className:"landing-logo landing-logo--small"}),f.jsx("h1",{id:"landing-success-title",children:"Solicitud enviada"}),f.jsx("p",{className:"landing-subtitle",children:$}),f.jsx("button",{className:"landing-button",type:"button",onClick:fs,children:r?"Ir al panel":"Volver al inicio de sesin"})]})]})]})]})}function dn(){return f.jsx("div",{className:"landing-placeholder","aria-hidden":!0})}const Ko=S.lazy(()=>Y(()=>import("./DashboardPage-NACPwGVH.js"),__vite__mapDeps([0,1,2,3,4]))),Ho=S.lazy(()=>Y(()=>import("./SalesPage-BmYVm5FE.js"),__vite__mapDeps([5,1,2,3,6,7,8,9,10,11,4]))),Vo=S.lazy(()=>Y(()=>import("./PurchasesPage-Cezg4E7L.js"),__vite__mapDeps([12,1,2,3,6,4,11,10,8]))),Qo=S.lazy(()=>Y(()=>import("./InventoryPage-Dfcalkrg.js"),__vite__mapDeps([13,1,2,3,6,11,4]))),Wo=S.lazy(()=>Y(()=>import("./InventoryMovementsPage-CYekkjFq.js"),__vite__mapDeps([14,1,2,3]))),Go=S.lazy(()=>Y(()=>import("./CustomersPage-BV_qc14R.js"),__vite__mapDeps([15,1,2,3,7,10,6,11,4]))),Jo=S.lazy(()=>Y(()=>import("./SuppliersPage-DuH3X4OY.js"),__vite__mapDeps([16,1,3,2,9,6]))),Yo=S.lazy(()=>Y(()=>import("./FinancesPage-klKUhVfR.js"),__vite__mapDeps([17,3,1,4]))),Xo=S.lazy(()=>Y(()=>import("./ReportsPage-D0t02EMA.js"),__vite__mapDeps([18,3,1]))),Zo=S.lazy(()=>Y(()=>import("./SettingsPage-TSniiZF3.js"),__vite__mapDeps([19,3,1,2,9,6]))),ei=[{index:!0,module:"dashboard",element:f.jsx(Ko,{})},{path:"sales",module:"sales",element:f.jsx(Ho,{})},{path:"purchases",module:"purchases",element:f.jsx(Vo,{})},{path:"inventory",module:"inventory",element:f.jsx(Qo,{})},{path:"inventory/movements",module:"inventory",element:f.jsx(Wo,{})},{path:"customers",module:"customers",element:f.jsx(Go,{})},{path:"suppliers",module:"suppliers",element:f.jsx(Jo,{})},{path:"finances",module:"finances",element:f.jsx(Yo,{})},{path:"reports",module:"reports",element:f.jsx(Xo,{})},{path:"settings",module:"settings",element:f.jsx(Zo,{})}];function ti(){const{isAuthenticated:e,session:t}=Nt(),n=t?.modules??[],s=S.useMemo(()=>{const a=new Set(n);return a.add("dashboard"),a},[n]),r=S.useMemo(()=>{const a=wt.find(o=>s.has(o.module));return a?a.to:"/app"},[s]);return f.jsx(S.Suspense,{fallback:f.jsx("div",{className:"page",children:f.jsx("p",{children:"Cargando..."})}),children:f.jsxs(gs,{children:[f.jsxs(te,{element:f.jsx(si,{}),children:[f.jsx(te,{index:!0,element:f.jsx(dn,{})}),f.jsx(te,{path:"login",element:f.jsx(dn,{})}),f.jsxs(te,{path:"app",element:e?f.jsx(qo,{}):f.jsx(Fe,{to:"/",replace:!0}),children:[ei.map(a=>{const o=s.has(a.module)?a.element:f.jsx(Fe,{to:r,replace:!0});return a.index?f.jsx(te,{index:!0,element:o},"index"):f.jsx(te,{path:a.path,element:o},a.path)}),f.jsx(te,{path:"*",element:f.jsx(Fe,{to:r,replace:!0})})]})]}),f.jsx(te,{path:"*",element:f.jsx(Fe,{to:e?r:"/",replace:!0})})]})})}function ni(){return f.jsx(ti,{})}function si(){const e=fn(),t=hn(),n=e.pathname==="/login",s=()=>t("/",{replace:!0});return f.jsx(zo,{forceLoginOnMount:n,onLoginClose:n?s:void 0,children:f.jsx(pn,{})})}const ri=new Ys;Es.createRoot(document.getElementById("root")).render(f.jsx(bs.StrictMode,{children:f.jsx(Zs,{client:ri,children:f.jsx(vs,{children:f.jsx(_o,{children:f.jsx(ni,{})})})})}));export{Ki as $,gc as A,yc as B,Pc as C,vc as D,Vi as E,$c as F,Gc as G,Hi as H,Kc as I,_c as J,qc as K,Uc as L,Fc as M,Bc as N,jc as O,Lc as P,zc as Q,Mc as R,Nt as S,Vc as T,Qc as U,Fi as V,Wc as W,Jc as X,Yc as Y,Xc as Z,iu as _,Sc as a,L as a$,k as a0,mc as a1,hc as a2,Bi as a3,eu as a4,su as a5,ru as a6,au as a7,ou as a8,nu as a9,cu as aA,uu as aB,lu as aC,du as aD,Ti as aE,Ri as aF,ji as aG,Mi as aH,_i as aI,Li as aJ,Di as aK,ki as aL,Ii as aM,Ni as aN,Ce as aO,Us as aP,Ds as aQ,Is as aR,ut as aS,K as aT,Ve as aU,Ts as aV,Ns as aW,ct as aX,gn as aY,Vs as aZ,Ls as a_,tu as aa,Zc as ab,zi as ac,dc as ad,fc as ae,pc as af,lc as ag,bt as ah,cc as ai,qt as aj,ci as ak,ii as al,Ji as am,Gi as an,Wi as ao,Qi as ap,ec as aq,Zi as ar,tc as as,nc as at,sc as au,rc as av,ac as aw,oc as ax,Yi as ay,Xi as az,Ec as b,_s as b0,Ut as c,uc as d,ic as e,Ui as f,wc as g,kc as h,Bo as i,f as j,qi as k,$i as l,Hc as m,Uo as n,Ac as o,Rc as p,oi as q,Cc as r,Ic as s,Tc as t,Xs as u,Nc as v,Dc as w,xc as x,bc as y,Oc as z};
