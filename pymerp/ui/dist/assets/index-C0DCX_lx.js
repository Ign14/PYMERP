const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/DashboardPage-hbZ5LIg4.js","assets/react-DFcFNn96.js","assets/useQuery-ClGZjTlq.js","assets/PageHeader-ZA88au4Z.js","assets/charts-CIawE-G5.js","assets/SalesPage-CNdJaLdM.js","assets/Modal-BfA53Mfc.js","assets/customersUtils-BBc7X2Xh.js","assets/useDebouncedValue-DwVyRO6o.js","assets/problemDetail-Cwi6PMoB.js","assets/table-sNnHzzJB.js","assets/currency-HwQAg_Xa.js","assets/PurchaseCreatePage-DR2OydzT.js","assets/PurchaseCreateForm-iUq2Fou4.js","assets/PurchasesPage-TUG7ONJe.js","assets/InventoryPage-C-LquPA8.js","assets/LocationsPage-Bif2xA1M.js","assets/inventory-DjR51aUj.js","assets/LotsListPage-DjIxIjd3.js","assets/InventoryMovementsPage-BWml6kIw.js","assets/CustomersPage-5bU3sUOd.js","assets/SuppliersPage-z47H6rMj.js","assets/FinancesPage-CeTjAa0q.js","assets/ReportsPage-BV6yLZH6.js","assets/SettingsPage-DWxfaxF0.js"])))=>i.map(i=>d[i]);
import{a as ys,b as gs,g as bs,r as S,u as pn,N as vs,O as hn,d as mn,e as ws,f as te,h as Fe,R as Ss,B as Ps}from"./react-DFcFNn96.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var st={exports:{}},we={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kt;function As(){if(kt)return we;kt=1;var e=ys(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,r=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function a(i,c,u){var l,p={},v=null,A=null;u!==void 0&&(v=""+u),c.key!==void 0&&(v=""+c.key),c.ref!==void 0&&(A=c.ref);for(l in c)s.call(c,l)&&!o.hasOwnProperty(l)&&(p[l]=c[l]);if(i&&i.defaultProps)for(l in c=i.defaultProps,c)p[l]===void 0&&(p[l]=c[l]);return{$$typeof:t,type:i,key:v,ref:A,props:p,_owner:r.current}}return we.Fragment=n,we.jsx=a,we.jsxs=a,we}var It;function Es(){return It||(It=1,st.exports=As()),st.exports}var f=Es(),Le={},Ft;function Cs(){if(Ft)return Le;Ft=1;var e=gs();return Le.createRoot=e.createRoot,Le.hydrateRoot=e.hydrateRoot,Le}var Os=Cs();const xs=bs(Os);var Ce=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Rs={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Ts=class{#e=Rs;#n=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,t){return this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}},ut=new Ts;function Ns(e){setTimeout(e,0)}var He=typeof window>"u"||"Deno"in globalThis;function K(){}function Ds(e,t){return typeof e=="function"?e(t):e}function ks(e){return typeof e=="number"&&e>=0&&e!==1/0}function Is(e,t){return Math.max(e+(t||0)-Date.now(),0)}function lt(e,t){return typeof e=="function"?e(t):e}function Fs(e,t){return typeof e=="function"?e(t):e}function Lt(e,t){const{type:n="all",exact:s,fetchStatus:r,predicate:o,queryKey:a,stale:i}=e;if(a){if(s){if(t.queryHash!==Pt(a,t.options))return!1}else if(!Ae(t.queryKey,a))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof i=="boolean"&&t.isStale()!==i||r&&r!==t.state.fetchStatus||o&&!o(t))}function jt(e,t){const{exact:n,status:s,predicate:r,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(n){if(ie(t.options.mutationKey)!==ie(o))return!1}else if(!Ae(t.options.mutationKey,o))return!1}return!(s&&t.state.status!==s||r&&!r(t))}function Pt(e,t){return(t?.queryKeyHashFn||ie)(e)}function ie(e){return JSON.stringify(e,(t,n)=>dt(n)?Object.keys(n).sort().reduce((s,r)=>(s[r]=n[r],s),{}):n)}function Ae(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>Ae(e[n],t[n])):!1}var Ls=Object.prototype.hasOwnProperty;function yn(e,t){if(e===t)return e;const n=_t(e)&&_t(t);if(!n&&!(dt(e)&&dt(t)))return t;const r=(n?e:Object.keys(e)).length,o=n?t:Object.keys(t),a=o.length,i=n?new Array(a):{};let c=0;for(let u=0;u<a;u++){const l=n?u:o[u],p=e[l],v=t[l];if(p===v){i[l]=p,(n?u<r:Ls.call(e,l))&&c++;continue}if(p===null||v===null||typeof p!="object"||typeof v!="object"){i[l]=v;continue}const A=yn(p,v);i[l]=A,A===p&&c++}return r===a&&c===r?e:i}function js(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function _t(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function dt(e){if(!Mt(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!Mt(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Mt(e){return Object.prototype.toString.call(e)==="[object Object]"}function _s(e){return new Promise(t=>{ut.setTimeout(t,e)})}function Ms(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?yn(e,t):t}function pi(e){return e}function qs(e,t,n=0){const s=[...e,t];return n&&s.length>n?s.slice(1):s}function Us(e,t,n=0){const s=[t,...e];return n&&s.length>n?s.slice(0,-1):s}var At=Symbol();function gn(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===At?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Bs(e,t){return typeof e=="function"?e(...t):!!e}var $s=class extends Ce{#e;#n;#t;constructor(){super(),this.#t=e=>{if(!He&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#n||this.setEventListener(this.#t)}onUnsubscribe(){this.hasListeners()||(this.#n?.(),this.#n=void 0)}setEventListener(e){this.#t=e,this.#n?.(),this.#n=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},bn=new $s;function zs(){let e,t;const n=new Promise((r,o)=>{e=r,t=o});n.status="pending",n.catch(()=>{});function s(r){Object.assign(n,r),delete n.resolve,delete n.reject}return n.resolve=r=>{s({status:"fulfilled",value:r}),e(r)},n.reject=r=>{s({status:"rejected",reason:r}),t(r)},n}var Vs=Ns;function Ks(){let e=[],t=0,n=i=>{i()},s=i=>{i()},r=Vs;const o=i=>{t?e.push(i):r(()=>{n(i)})},a=()=>{const i=e;e=[],i.length&&r(()=>{s(()=>{i.forEach(c=>{n(c)})})})};return{batch:i=>{let c;t++;try{c=i()}finally{t--,t||a()}return c},batchCalls:i=>(...c)=>{o(()=>{i(...c)})},schedule:o,setNotifyFunction:i=>{n=i},setBatchNotifyFunction:i=>{s=i},setScheduler:i=>{r=i}}}var L=Ks(),Hs=class extends Ce{#e=!0;#n;#t;constructor(){super(),this.#t=e=>{if(!He&&window.addEventListener){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#n||this.setEventListener(this.#t)}onUnsubscribe(){this.hasListeners()||(this.#n?.(),this.#n=void 0)}setEventListener(e){this.#t=e,this.#n?.(),this.#n=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(n=>{n(e)}))}isOnline(){return this.#e}},Be=new Hs;function Qs(e){return Math.min(1e3*2**e,3e4)}function vn(e){return(e??"online")==="online"?Be.isOnline():!0}var ft=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function wn(e){let t=!1,n=0,s;const r=zs(),o=()=>r.status!=="pending",a=b=>{if(!o()){const g=new ft(b);v(g),e.onCancel?.(g)}},i=()=>{t=!0},c=()=>{t=!1},u=()=>bn.isFocused()&&(e.networkMode==="always"||Be.isOnline())&&e.canRun(),l=()=>vn(e.networkMode)&&e.canRun(),p=b=>{o()||(s?.(),r.resolve(b))},v=b=>{o()||(s?.(),r.reject(b))},A=()=>new Promise(b=>{s=g=>{(o()||u())&&b(g)},e.onPause?.()}).then(()=>{s=void 0,o()||e.onContinue?.()}),h=()=>{if(o())return;let b;const g=n===0?e.initialPromise:void 0;try{b=g??e.fn()}catch(x){b=Promise.reject(x)}Promise.resolve(b).then(p).catch(x=>{if(o())return;const C=e.retry??(He?0:3),R=e.retryDelay??Qs,I=typeof R=="function"?R(n,x):R,D=C===!0||typeof C=="number"&&n<C||typeof C=="function"&&C(n,x);if(t||!D){v(x);return}n++,e.onFail?.(n,x),_s(I).then(()=>u()?void 0:A()).then(()=>{t?v(x):h()})})};return{promise:r,status:()=>r.status,cancel:a,continue:()=>(s?.(),r),cancelRetry:i,continueRetry:c,canStart:l,start:()=>(l()?h():A().then(h),r)}}var Sn=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),ks(this.gcTime)&&(this.#e=ut.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(He?1/0:300*1e3))}clearGcTimeout(){this.#e&&(ut.clearTimeout(this.#e),this.#e=void 0)}},Ws=class extends Sn{#e;#n;#t;#r;#s;#a;#i;constructor(e){super(),this.#i=!1,this.#a=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#r=e.client,this.#t=this.#r.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=qt(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#s?.promise}setOptions(e){if(this.options={...this.#a,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=qt(this.options);t.data!==void 0&&(this.setData(t.data,{updatedAt:t.dataUpdatedAt,manual:!0}),this.#e=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#t.remove(this)}setData(e,t){const n=Ms(this.state.data,e,this.options);return this.#o({data:n,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),n}setState(e,t){this.#o({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#s?.promise;return this.#s?.cancel(e),t?t.then(K).catch(K):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>Fs(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===At||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>lt(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Is(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#s?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#s?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#s&&(this.#i?this.#s.cancel({revert:!0}):this.#s.cancelRetry()),this.scheduleGc()),this.#t.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#o({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#s?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#s)return this.#s.continueRetry(),this.#s.promise}if(e&&this.setOptions(e),!this.options.queryFn){const i=this.observers.find(c=>c.options.queryFn);i&&this.setOptions(i.options)}const n=new AbortController,s=i=>{Object.defineProperty(i,"signal",{enumerable:!0,get:()=>(this.#i=!0,n.signal)})},r=()=>{const i=gn(this.options,t),u=(()=>{const l={client:this.#r,queryKey:this.queryKey,meta:this.meta};return s(l),l})();return this.#i=!1,this.options.persister?this.options.persister(i,u,this):i(u)},a=(()=>{const i={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:r};return s(i),i})();this.options.behavior?.onFetch(a,this),this.#n=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==a.fetchOptions?.meta)&&this.#o({type:"fetch",meta:a.fetchOptions?.meta}),this.#s=wn({initialPromise:t?.initialPromise,fn:a.fetchFn,onCancel:i=>{i instanceof ft&&i.revert&&this.setState({...this.#n,fetchStatus:"idle"}),n.abort()},onFail:(i,c)=>{this.#o({type:"failed",failureCount:i,error:c})},onPause:()=>{this.#o({type:"pause"})},onContinue:()=>{this.#o({type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0});try{const i=await this.#s.start();if(i===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(i),this.#t.config.onSuccess?.(i,this),this.#t.config.onSettled?.(i,this.state.error,this),i}catch(i){if(i instanceof ft){if(i.silent)return this.#s.promise;if(i.revert){if(this.state.data===void 0)throw i;return this.state.data}}throw this.#o({type:"error",error:i}),this.#t.config.onError?.(i,this),this.#t.config.onSettled?.(this.state.data,i,this),i}finally{this.scheduleGc()}}#o(e){const t=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Gs(n.data,this.options),fetchMeta:e.meta??null};case"success":const s={...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#n=e.manual?s:void 0,s;case"error":const r=e.error;return{...n,error:r,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=t(this.state),L.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#t.notify({query:this,type:"updated",action:e})})}};function Gs(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:vn(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function qt(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,s=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function Ut(e){return{onFetch:(t,n)=>{const s=t.options,r=t.fetchOptions?.meta?.fetchMore?.direction,o=t.state.data?.pages||[],a=t.state.data?.pageParams||[];let i={pages:[],pageParams:[]},c=0;const u=async()=>{let l=!1;const p=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(t.signal.aborted?l=!0:t.signal.addEventListener("abort",()=>{l=!0}),t.signal)})},v=gn(t.options,t.fetchOptions),A=async(h,b,g)=>{if(l)return Promise.reject();if(b==null&&h.pages.length)return Promise.resolve(h);const C=(()=>{const z={client:t.client,queryKey:t.queryKey,pageParam:b,direction:g?"backward":"forward",meta:t.options.meta};return p(z),z})(),R=await v(C),{maxPages:I}=t.options,D=g?Us:qs;return{pages:D(h.pages,R,I),pageParams:D(h.pageParams,b,I)}};if(r&&o.length){const h=r==="backward",b=h?Pn:pt,g={pages:o,pageParams:a},x=b(s,g);i=await A(g,x,h)}else{const h=e??o.length;do{const b=c===0?a[0]??s.initialPageParam:pt(s,i);if(c>0&&b==null)break;i=await A(i,b),c++}while(c<h)}return i};t.options.persister?t.fetchFn=()=>t.options.persister?.(u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n):t.fetchFn=u}}}function pt(e,{pages:t,pageParams:n}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,n[s],n):void 0}function Pn(e,{pages:t,pageParams:n}){return t.length>0?e.getPreviousPageParam?.(t[0],t,n[0],n):void 0}function hi(e,t){return t?pt(e,t)!=null:!1}function mi(e,t){return!t||!e.getPreviousPageParam?!1:Pn(e,t)!=null}var Js=class extends Sn{#e;#n;#t;#r;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#t=e.mutationCache,this.#n=[],this.state=e.state||An(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#n.includes(e)||(this.#n.push(e),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#n=this.#n.filter(t=>t!==e),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#n.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#s({type:"continue"})},n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#r=wn({fn:()=>this.options.mutationFn?this.options.mutationFn(e,n):Promise.reject(new Error("No mutationFn found")),onFail:(o,a)=>{this.#s({type:"failed",failureCount:o,error:a})},onPause:()=>{this.#s({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const s=this.state.status==="pending",r=!this.#r.canStart();try{if(s)t();else{this.#s({type:"pending",variables:e,isPaused:r}),await this.#t.config.onMutate?.(e,this,n);const a=await this.options.onMutate?.(e,n);a!==this.state.context&&this.#s({type:"pending",context:a,variables:e,isPaused:r})}const o=await this.#r.start();return await this.#t.config.onSuccess?.(o,e,this.state.context,this,n),await this.options.onSuccess?.(o,e,this.state.context,n),await this.#t.config.onSettled?.(o,null,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(o,null,e,this.state.context,n),this.#s({type:"success",data:o}),o}catch(o){try{throw await this.#t.config.onError?.(o,e,this.state.context,this,n),await this.options.onError?.(o,e,this.state.context,n),await this.#t.config.onSettled?.(void 0,o,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(void 0,o,e,this.state.context,n),o}finally{this.#s({type:"error",error:o})}}finally{this.#t.runNext(this)}}#s(e){const t=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),L.batch(()=>{this.#n.forEach(n=>{n.onMutationUpdate(e)}),this.#t.notify({mutation:this,type:"updated",action:e})})}};function An(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ys=class extends Ce{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#n=new Map,this.#t=0}#e;#n;#t;build(e,t,n){const s=new Js({client:e,mutationCache:this,mutationId:++this.#t,options:e.defaultMutationOptions(t),state:n});return this.add(s),s}add(e){this.#e.add(e);const t=je(e);if(typeof t=="string"){const n=this.#n.get(t);n?n.push(e):this.#n.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const t=je(e);if(typeof t=="string"){const n=this.#n.get(t);if(n)if(n.length>1){const s=n.indexOf(e);s!==-1&&n.splice(s,1)}else n[0]===e&&this.#n.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=je(e);if(typeof t=="string"){const s=this.#n.get(t)?.find(r=>r.state.status==="pending");return!s||s===e}else return!0}runNext(e){const t=je(e);return typeof t=="string"?this.#n.get(t)?.find(s=>s!==e&&s.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){L.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#n.clear()})}getAll(){return Array.from(this.#e)}find(e){const t={exact:!0,...e};return this.getAll().find(n=>jt(t,n))}findAll(e={}){return this.getAll().filter(t=>jt(e,t))}notify(e){L.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return L.batch(()=>Promise.all(e.map(t=>t.continue().catch(K))))}};function je(e){return e.options.scope?.id}var Xs=class extends Ce{#e;#n=void 0;#t;#r;constructor(t,n){super(),this.#e=t,this.setOptions(n),this.bindMethods(),this.#s()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const n=this.options;this.options=this.#e.defaultMutationOptions(t),js(this.options,n)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#t,observer:this}),n?.mutationKey&&this.options.mutationKey&&ie(n.mutationKey)!==ie(this.options.mutationKey)?this.reset():this.#t?.state.status==="pending"&&this.#t.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#t?.removeObserver(this)}onMutationUpdate(t){this.#s(),this.#a(t)}getCurrentResult(){return this.#n}reset(){this.#t?.removeObserver(this),this.#t=void 0,this.#s(),this.#a()}mutate(t,n){return this.#r=n,this.#t?.removeObserver(this),this.#t=this.#e.getMutationCache().build(this.#e,this.options),this.#t.addObserver(this),this.#t.execute(t)}#s(){const t=this.#t?.state??An();this.#n={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#a(t){L.batch(()=>{if(this.#r&&this.hasListeners()){const n=this.#n.variables,s=this.#n.context,r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};t?.type==="success"?(this.#r.onSuccess?.(t.data,n,s,r),this.#r.onSettled?.(t.data,null,n,s,r)):t?.type==="error"&&(this.#r.onError?.(t.error,n,s,r),this.#r.onSettled?.(void 0,t.error,n,s,r))}this.listeners.forEach(n=>{n(this.#n)})})}},Zs=class extends Ce{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,n){const s=t.queryKey,r=t.queryHash??Pt(s,t);let o=this.get(r);return o||(o=new Ws({client:e,queryKey:s,queryHash:r,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){L.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(n=>Lt(t,n))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(n=>Lt(e,n)):t}notify(e){L.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){L.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){L.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},er=class{#e;#n;#t;#r;#s;#a;#i;#o;constructor(e={}){this.#e=e.queryCache||new Zs,this.#n=e.mutationCache||new Ys,this.#t=e.defaultOptions||{},this.#r=new Map,this.#s=new Map,this.#a=0}mount(){this.#a++,this.#a===1&&(this.#i=bn.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#o=Be.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#a--,this.#a===0&&(this.#i?.(),this.#i=void 0,this.#o?.(),this.#o=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#n.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=this.#e.build(this,t),s=n.state.data;return s===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(lt(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(s))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:n})=>{const s=n.data;return[t,s]})}setQueryData(e,t,n){const s=this.defaultQueryOptions({queryKey:e}),o=this.#e.get(s.queryHash)?.state.data,a=Ds(t,o);if(a!==void 0)return this.#e.build(this,s).setData(a,{...n,manual:!0})}setQueriesData(e,t,n){return L.batch(()=>this.#e.findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,n)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;L.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=this.#e;return L.batch(()=>(n.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},s=L.batch(()=>this.#e.findAll(e).map(r=>r.cancel(n)));return Promise.all(s).then(K).catch(K)}invalidateQueries(e,t={}){return L.batch(()=>(this.#e.findAll(e).forEach(n=>{n.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},s=L.batch(()=>this.#e.findAll(e).filter(r=>!r.isDisabled()&&!r.isStatic()).map(r=>{let o=r.fetch(void 0,n);return n.throwOnError||(o=o.catch(K)),r.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(s).then(K)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=this.#e.build(this,t);return n.isStaleByTime(lt(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(K).catch(K)}fetchInfiniteQuery(e){return e.behavior=Ut(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(K).catch(K)}ensureInfiniteQueryData(e){return e.behavior=Ut(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Be.isOnline()?this.#n.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#n}getDefaultOptions(){return this.#t}setDefaultOptions(e){this.#t=e}setQueryDefaults(e,t){this.#r.set(ie(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#r.values()],n={};return t.forEach(s=>{Ae(e,s.queryKey)&&Object.assign(n,s.defaultOptions)}),n}setMutationDefaults(e,t){this.#s.set(ie(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#s.values()],n={};return t.forEach(s=>{Ae(e,s.mutationKey)&&Object.assign(n,s.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#t.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Pt(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===At&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#t.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#n.clear()}},En=S.createContext(void 0),tr=e=>{const t=S.useContext(En);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},nr=({client:e,children:t})=>(S.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),f.jsx(En.Provider,{value:e,children:t}));function Bt(e,t){const n=tr(),[s]=S.useState(()=>new Xs(n,e));S.useEffect(()=>{s.setOptions(e)},[s,e]);const r=S.useSyncExternalStore(S.useCallback(a=>s.subscribe(L.batchCalls(a)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),o=S.useCallback((a,i)=>{s.mutate(a,i).catch(K)},[s]);if(r.error&&Bs(s.options.throwOnError,[r.error]))throw r.error;return{...r,mutate:o,mutateAsync:r.mutate}}const sr="modulepreload",rr=function(e){return"/"+e},$t={},$=function(t,n,s){let r=Promise.resolve();if(n&&n.length>0){let c=function(u){return Promise.all(u.map(l=>Promise.resolve(l).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),i=a?.nonce||a?.getAttribute("nonce");r=c(n.map(u=>{if(u=rr(u),u in $t)return;$t[u]=!0;const l=u.endsWith(".css"),p=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${p}`))return;const v=document.createElement("link");if(v.rel=l?"stylesheet":sr,l||(v.as="script"),v.crossOrigin="",v.href=u,i&&v.setAttribute("nonce",i),document.head.appendChild(v),l)return new Promise((A,h)=>{v.addEventListener("load",A),v.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${u}`)))})}))}function o(a){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=a,window.dispatchEvent(i),!i.defaultPrevented)throw a}return r.then(a=>{for(const i of a||[])i.status==="rejected"&&o(i.reason);return t().catch(o)})};function Cn(e,t){return function(){return e.apply(t,arguments)}}const{toString:or}=Object.prototype,{getPrototypeOf:Et}=Object,{iterator:Qe,toStringTag:On}=Symbol,We=(e=>t=>{const n=or.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),H=e=>(e=e.toLowerCase(),t=>We(t)===e),Ge=e=>t=>typeof t===e,{isArray:pe}=Array,fe=Ge("undefined");function Oe(e){return e!==null&&!fe(e)&&e.constructor!==null&&!fe(e.constructor)&&q(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const xn=H("ArrayBuffer");function ar(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&xn(e.buffer),t}const ir=Ge("string"),q=Ge("function"),Rn=Ge("number"),xe=e=>e!==null&&typeof e=="object",cr=e=>e===!0||e===!1,Me=e=>{if(We(e)!=="object")return!1;const t=Et(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(On in e)&&!(Qe in e)},ur=e=>{if(!xe(e)||Oe(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},lr=H("Date"),dr=H("File"),fr=H("Blob"),pr=H("FileList"),hr=e=>xe(e)&&q(e.pipe),mr=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||q(e.append)&&((t=We(e))==="formdata"||t==="object"&&q(e.toString)&&e.toString()==="[object FormData]"))},yr=H("URLSearchParams"),[gr,br,vr,wr]=["ReadableStream","Request","Response","Headers"].map(H),Sr=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Re(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let s,r;if(typeof e!="object"&&(e=[e]),pe(e))for(s=0,r=e.length;s<r;s++)t.call(null,e[s],s,e);else{if(Oe(e))return;const o=n?Object.getOwnPropertyNames(e):Object.keys(e),a=o.length;let i;for(s=0;s<a;s++)i=o[s],t.call(null,e[i],i,e)}}function Tn(e,t){if(Oe(e))return null;t=t.toLowerCase();const n=Object.keys(e);let s=n.length,r;for(;s-- >0;)if(r=n[s],t===r.toLowerCase())return r;return null}const oe=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Nn=e=>!fe(e)&&e!==oe;function ht(){const{caseless:e,skipUndefined:t}=Nn(this)&&this||{},n={},s=(r,o)=>{const a=e&&Tn(n,o)||o;Me(n[a])&&Me(r)?n[a]=ht(n[a],r):Me(r)?n[a]=ht({},r):pe(r)?n[a]=r.slice():(!t||!fe(r))&&(n[a]=r)};for(let r=0,o=arguments.length;r<o;r++)arguments[r]&&Re(arguments[r],s);return n}const Pr=(e,t,n,{allOwnKeys:s}={})=>(Re(t,(r,o)=>{n&&q(r)?e[o]=Cn(r,n):e[o]=r},{allOwnKeys:s}),e),Ar=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Er=(e,t,n,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},Cr=(e,t,n,s)=>{let r,o,a;const i={};if(t=t||{},e==null)return t;do{for(r=Object.getOwnPropertyNames(e),o=r.length;o-- >0;)a=r[o],(!s||s(a,e,t))&&!i[a]&&(t[a]=e[a],i[a]=!0);e=n!==!1&&Et(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},Or=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const s=e.indexOf(t,n);return s!==-1&&s===n},xr=e=>{if(!e)return null;if(pe(e))return e;let t=e.length;if(!Rn(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},Rr=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Et(Uint8Array)),Tr=(e,t)=>{const s=(e&&e[Qe]).call(e);let r;for(;(r=s.next())&&!r.done;){const o=r.value;t.call(e,o[0],o[1])}},Nr=(e,t)=>{let n;const s=[];for(;(n=e.exec(t))!==null;)s.push(n);return s},Dr=H("HTMLFormElement"),kr=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,s,r){return s.toUpperCase()+r}),zt=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Ir=H("RegExp"),Dn=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),s={};Re(n,(r,o)=>{let a;(a=t(r,o,e))!==!1&&(s[o]=a||r)}),Object.defineProperties(e,s)},Fr=e=>{Dn(e,(t,n)=>{if(q(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const s=e[n];if(q(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Lr=(e,t)=>{const n={},s=r=>{r.forEach(o=>{n[o]=!0})};return pe(e)?s(e):s(String(e).split(t)),n},jr=()=>{},_r=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Mr(e){return!!(e&&q(e.append)&&e[On]==="FormData"&&e[Qe])}const qr=e=>{const t=new Array(10),n=(s,r)=>{if(xe(s)){if(t.indexOf(s)>=0)return;if(Oe(s))return s;if(!("toJSON"in s)){t[r]=s;const o=pe(s)?[]:{};return Re(s,(a,i)=>{const c=n(a,r+1);!fe(c)&&(o[i]=c)}),t[r]=void 0,o}}return s};return n(e,0)},Ur=H("AsyncFunction"),Br=e=>e&&(xe(e)||q(e))&&q(e.then)&&q(e.catch),kn=((e,t)=>e?setImmediate:t?((n,s)=>(oe.addEventListener("message",({source:r,data:o})=>{r===oe&&o===n&&s.length&&s.shift()()},!1),r=>{s.push(r),oe.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",q(oe.postMessage)),$r=typeof queueMicrotask<"u"?queueMicrotask.bind(oe):typeof process<"u"&&process.nextTick||kn,zr=e=>e!=null&&q(e[Qe]),d={isArray:pe,isArrayBuffer:xn,isBuffer:Oe,isFormData:mr,isArrayBufferView:ar,isString:ir,isNumber:Rn,isBoolean:cr,isObject:xe,isPlainObject:Me,isEmptyObject:ur,isReadableStream:gr,isRequest:br,isResponse:vr,isHeaders:wr,isUndefined:fe,isDate:lr,isFile:dr,isBlob:fr,isRegExp:Ir,isFunction:q,isStream:hr,isURLSearchParams:yr,isTypedArray:Rr,isFileList:pr,forEach:Re,merge:ht,extend:Pr,trim:Sr,stripBOM:Ar,inherits:Er,toFlatObject:Cr,kindOf:We,kindOfTest:H,endsWith:Or,toArray:xr,forEachEntry:Tr,matchAll:Nr,isHTMLForm:Dr,hasOwnProperty:zt,hasOwnProp:zt,reduceDescriptors:Dn,freezeMethods:Fr,toObjectSet:Lr,toCamelCase:kr,noop:jr,toFiniteNumber:_r,findKey:Tn,global:oe,isContextDefined:Nn,isSpecCompliantForm:Mr,toJSONObject:qr,isAsyncFn:Ur,isThenable:Br,setImmediate:kn,asap:$r,isIterable:zr};function E(e,t,n,s,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),s&&(this.request=s),r&&(this.response=r,this.status=r.status?r.status:null)}d.inherits(E,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:d.toJSONObject(this.config),code:this.code,status:this.status}}});const In=E.prototype,Fn={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Fn[e]={value:e}});Object.defineProperties(E,Fn);Object.defineProperty(In,"isAxiosError",{value:!0});E.from=(e,t,n,s,r,o)=>{const a=Object.create(In);d.toFlatObject(e,a,function(l){return l!==Error.prototype},u=>u!=="isAxiosError");const i=e&&e.message?e.message:"Error",c=t==null&&e?e.code:t;return E.call(a,i,c,n,s,r),e&&a.cause==null&&Object.defineProperty(a,"cause",{value:e,configurable:!0}),a.name=e&&e.name||"Error",o&&Object.assign(a,o),a};const Vr=null;function mt(e){return d.isPlainObject(e)||d.isArray(e)}function Ln(e){return d.endsWith(e,"[]")?e.slice(0,-2):e}function Vt(e,t,n){return e?e.concat(t).map(function(r,o){return r=Ln(r),!n&&o?"["+r+"]":r}).join(n?".":""):t}function Kr(e){return d.isArray(e)&&!e.some(mt)}const Hr=d.toFlatObject(d,{},null,function(t){return/^is[A-Z]/.test(t)});function Je(e,t,n){if(!d.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=d.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,g){return!d.isUndefined(g[b])});const s=n.metaTokens,r=n.visitor||l,o=n.dots,a=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&d.isSpecCompliantForm(t);if(!d.isFunction(r))throw new TypeError("visitor must be a function");function u(h){if(h===null)return"";if(d.isDate(h))return h.toISOString();if(d.isBoolean(h))return h.toString();if(!c&&d.isBlob(h))throw new E("Blob is not supported. Use a Buffer instead.");return d.isArrayBuffer(h)||d.isTypedArray(h)?c&&typeof Blob=="function"?new Blob([h]):Buffer.from(h):h}function l(h,b,g){let x=h;if(h&&!g&&typeof h=="object"){if(d.endsWith(b,"{}"))b=s?b:b.slice(0,-2),h=JSON.stringify(h);else if(d.isArray(h)&&Kr(h)||(d.isFileList(h)||d.endsWith(b,"[]"))&&(x=d.toArray(h)))return b=Ln(b),x.forEach(function(R,I){!(d.isUndefined(R)||R===null)&&t.append(a===!0?Vt([b],I,o):a===null?b:b+"[]",u(R))}),!1}return mt(h)?!0:(t.append(Vt(g,b,o),u(h)),!1)}const p=[],v=Object.assign(Hr,{defaultVisitor:l,convertValue:u,isVisitable:mt});function A(h,b){if(!d.isUndefined(h)){if(p.indexOf(h)!==-1)throw Error("Circular reference detected in "+b.join("."));p.push(h),d.forEach(h,function(x,C){(!(d.isUndefined(x)||x===null)&&r.call(t,x,d.isString(C)?C.trim():C,b,v))===!0&&A(x,b?b.concat(C):[C])}),p.pop()}}if(!d.isObject(e))throw new TypeError("data must be an object");return A(e),t}function Kt(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function Ct(e,t){this._pairs=[],e&&Je(e,this,t)}const jn=Ct.prototype;jn.append=function(t,n){this._pairs.push([t,n])};jn.toString=function(t){const n=t?function(s){return t.call(this,s,Kt)}:Kt;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function Qr(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function _n(e,t,n){if(!t)return e;const s=n&&n.encode||Qr;d.isFunction(n)&&(n={serialize:n});const r=n&&n.serialize;let o;if(r?o=r(t,n):o=d.isURLSearchParams(t)?t.toString():new Ct(t,n).toString(s),o){const a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class Ht{constructor(){this.handlers=[]}use(t,n,s){return this.handlers.push({fulfilled:t,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){d.forEach(this.handlers,function(s){s!==null&&t(s)})}}const Mn={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Wr=typeof URLSearchParams<"u"?URLSearchParams:Ct,Gr=typeof FormData<"u"?FormData:null,Jr=typeof Blob<"u"?Blob:null,Yr={isBrowser:!0,classes:{URLSearchParams:Wr,FormData:Gr,Blob:Jr},protocols:["http","https","file","blob","url","data"]},Ot=typeof window<"u"&&typeof document<"u",yt=typeof navigator=="object"&&navigator||void 0,Xr=Ot&&(!yt||["ReactNative","NativeScript","NS"].indexOf(yt.product)<0),Zr=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",eo=Ot&&window.location.href||"http://localhost",to=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ot,hasStandardBrowserEnv:Xr,hasStandardBrowserWebWorkerEnv:Zr,navigator:yt,origin:eo},Symbol.toStringTag,{value:"Module"})),j={...to,...Yr};function no(e,t){return Je(e,new j.classes.URLSearchParams,{visitor:function(n,s,r,o){return j.isNode&&d.isBuffer(n)?(this.append(s,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...t})}function so(e){return d.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function ro(e){const t={},n=Object.keys(e);let s;const r=n.length;let o;for(s=0;s<r;s++)o=n[s],t[o]=e[o];return t}function qn(e){function t(n,s,r,o){let a=n[o++];if(a==="__proto__")return!0;const i=Number.isFinite(+a),c=o>=n.length;return a=!a&&d.isArray(r)?r.length:a,c?(d.hasOwnProp(r,a)?r[a]=[r[a],s]:r[a]=s,!i):((!r[a]||!d.isObject(r[a]))&&(r[a]=[]),t(n,s,r[a],o)&&d.isArray(r[a])&&(r[a]=ro(r[a])),!i)}if(d.isFormData(e)&&d.isFunction(e.entries)){const n={};return d.forEachEntry(e,(s,r)=>{t(so(s),r,n,0)}),n}return null}function oo(e,t,n){if(d.isString(e))try{return(t||JSON.parse)(e),d.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(n||JSON.stringify)(e)}const Te={transitional:Mn,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const s=n.getContentType()||"",r=s.indexOf("application/json")>-1,o=d.isObject(t);if(o&&d.isHTMLForm(t)&&(t=new FormData(t)),d.isFormData(t))return r?JSON.stringify(qn(t)):t;if(d.isArrayBuffer(t)||d.isBuffer(t)||d.isStream(t)||d.isFile(t)||d.isBlob(t)||d.isReadableStream(t))return t;if(d.isArrayBufferView(t))return t.buffer;if(d.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let i;if(o){if(s.indexOf("application/x-www-form-urlencoded")>-1)return no(t,this.formSerializer).toString();if((i=d.isFileList(t))||s.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Je(i?{"files[]":t}:t,c&&new c,this.formSerializer)}}return o||r?(n.setContentType("application/json",!1),oo(t)):t}],transformResponse:[function(t){const n=this.transitional||Te.transitional,s=n&&n.forcedJSONParsing,r=this.responseType==="json";if(d.isResponse(t)||d.isReadableStream(t))return t;if(t&&d.isString(t)&&(s&&!this.responseType||r)){const a=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(t,this.parseReviver)}catch(i){if(a)throw i.name==="SyntaxError"?E.from(i,E.ERR_BAD_RESPONSE,this,null,this.response):i}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:j.classes.FormData,Blob:j.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};d.forEach(["delete","get","head","post","put","patch"],e=>{Te.headers[e]={}});const ao=d.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),io=e=>{const t={};let n,s,r;return e&&e.split(`
`).forEach(function(a){r=a.indexOf(":"),n=a.substring(0,r).trim().toLowerCase(),s=a.substring(r+1).trim(),!(!n||t[n]&&ao[n])&&(n==="set-cookie"?t[n]?t[n].push(s):t[n]=[s]:t[n]=t[n]?t[n]+", "+s:s)}),t},Qt=Symbol("internals");function Se(e){return e&&String(e).trim().toLowerCase()}function qe(e){return e===!1||e==null?e:d.isArray(e)?e.map(qe):String(e)}function co(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(e);)t[s[1]]=s[2];return t}const uo=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function rt(e,t,n,s,r){if(d.isFunction(s))return s.call(this,t,n);if(r&&(t=n),!!d.isString(t)){if(d.isString(s))return t.indexOf(s)!==-1;if(d.isRegExp(s))return s.test(t)}}function lo(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,s)=>n.toUpperCase()+s)}function fo(e,t){const n=d.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+n,{value:function(r,o,a){return this[s].call(this,t,r,o,a)},configurable:!0})})}let U=class{constructor(t){t&&this.set(t)}set(t,n,s){const r=this;function o(i,c,u){const l=Se(c);if(!l)throw new Error("header name must be a non-empty string");const p=d.findKey(r,l);(!p||r[p]===void 0||u===!0||u===void 0&&r[p]!==!1)&&(r[p||c]=qe(i))}const a=(i,c)=>d.forEach(i,(u,l)=>o(u,l,c));if(d.isPlainObject(t)||t instanceof this.constructor)a(t,n);else if(d.isString(t)&&(t=t.trim())&&!uo(t))a(io(t),n);else if(d.isObject(t)&&d.isIterable(t)){let i={},c,u;for(const l of t){if(!d.isArray(l))throw TypeError("Object iterator must return a key-value pair");i[u=l[0]]=(c=i[u])?d.isArray(c)?[...c,l[1]]:[c,l[1]]:l[1]}a(i,n)}else t!=null&&o(n,t,s);return this}get(t,n){if(t=Se(t),t){const s=d.findKey(this,t);if(s){const r=this[s];if(!n)return r;if(n===!0)return co(r);if(d.isFunction(n))return n.call(this,r,s);if(d.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Se(t),t){const s=d.findKey(this,t);return!!(s&&this[s]!==void 0&&(!n||rt(this,this[s],s,n)))}return!1}delete(t,n){const s=this;let r=!1;function o(a){if(a=Se(a),a){const i=d.findKey(s,a);i&&(!n||rt(s,s[i],i,n))&&(delete s[i],r=!0)}}return d.isArray(t)?t.forEach(o):o(t),r}clear(t){const n=Object.keys(this);let s=n.length,r=!1;for(;s--;){const o=n[s];(!t||rt(this,this[o],o,t,!0))&&(delete this[o],r=!0)}return r}normalize(t){const n=this,s={};return d.forEach(this,(r,o)=>{const a=d.findKey(s,o);if(a){n[a]=qe(r),delete n[o];return}const i=t?lo(o):String(o).trim();i!==o&&delete n[o],n[i]=qe(r),s[i]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return d.forEach(this,(s,r)=>{s!=null&&s!==!1&&(n[r]=t&&d.isArray(s)?s.join(", "):s)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const s=new this(t);return n.forEach(r=>s.set(r)),s}static accessor(t){const s=(this[Qt]=this[Qt]={accessors:{}}).accessors,r=this.prototype;function o(a){const i=Se(a);s[i]||(fo(r,a),s[i]=!0)}return d.isArray(t)?t.forEach(o):o(t),this}};U.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);d.reduceDescriptors(U.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[n]=s}}});d.freezeMethods(U);function ot(e,t){const n=this||Te,s=t||n,r=U.from(s.headers);let o=s.data;return d.forEach(e,function(i){o=i.call(n,o,r.normalize(),t?t.status:void 0)}),r.normalize(),o}function Un(e){return!!(e&&e.__CANCEL__)}function he(e,t,n){E.call(this,e??"canceled",E.ERR_CANCELED,t,n),this.name="CanceledError"}d.inherits(he,E,{__CANCEL__:!0});function Bn(e,t,n){const s=n.config.validateStatus;!n.status||!s||s(n.status)?e(n):t(new E("Request failed with status code "+n.status,[E.ERR_BAD_REQUEST,E.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function po(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function ho(e,t){e=e||10;const n=new Array(e),s=new Array(e);let r=0,o=0,a;return t=t!==void 0?t:1e3,function(c){const u=Date.now(),l=s[o];a||(a=u),n[r]=c,s[r]=u;let p=o,v=0;for(;p!==r;)v+=n[p++],p=p%e;if(r=(r+1)%e,r===o&&(o=(o+1)%e),u-a<t)return;const A=l&&u-l;return A?Math.round(v*1e3/A):void 0}}function mo(e,t){let n=0,s=1e3/t,r,o;const a=(u,l=Date.now())=>{n=l,r=null,o&&(clearTimeout(o),o=null),e(...u)};return[(...u)=>{const l=Date.now(),p=l-n;p>=s?a(u,l):(r=u,o||(o=setTimeout(()=>{o=null,a(r)},s-p)))},()=>r&&a(r)]}const $e=(e,t,n=3)=>{let s=0;const r=ho(50,250);return mo(o=>{const a=o.loaded,i=o.lengthComputable?o.total:void 0,c=a-s,u=r(c),l=a<=i;s=a;const p={loaded:a,total:i,progress:i?a/i:void 0,bytes:c,rate:u||void 0,estimated:u&&i&&l?(i-a)/u:void 0,event:o,lengthComputable:i!=null,[t?"download":"upload"]:!0};e(p)},n)},Wt=(e,t)=>{const n=e!=null;return[s=>t[0]({lengthComputable:n,total:e,loaded:s}),t[1]]},Gt=e=>(...t)=>d.asap(()=>e(...t)),yo=j.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,j.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(j.origin),j.navigator&&/(msie|trident)/i.test(j.navigator.userAgent)):()=>!0,go=j.hasStandardBrowserEnv?{write(e,t,n,s,r,o){const a=[e+"="+encodeURIComponent(t)];d.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),d.isString(s)&&a.push("path="+s),d.isString(r)&&a.push("domain="+r),o===!0&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function bo(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function vo(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function $n(e,t,n){let s=!bo(t);return e&&(s||n==!1)?vo(e,t):t}const Jt=e=>e instanceof U?{...e}:e;function ce(e,t){t=t||{};const n={};function s(u,l,p,v){return d.isPlainObject(u)&&d.isPlainObject(l)?d.merge.call({caseless:v},u,l):d.isPlainObject(l)?d.merge({},l):d.isArray(l)?l.slice():l}function r(u,l,p,v){if(d.isUndefined(l)){if(!d.isUndefined(u))return s(void 0,u,p,v)}else return s(u,l,p,v)}function o(u,l){if(!d.isUndefined(l))return s(void 0,l)}function a(u,l){if(d.isUndefined(l)){if(!d.isUndefined(u))return s(void 0,u)}else return s(void 0,l)}function i(u,l,p){if(p in t)return s(u,l);if(p in e)return s(void 0,u)}const c={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:i,headers:(u,l,p)=>r(Jt(u),Jt(l),p,!0)};return d.forEach(Object.keys({...e,...t}),function(l){const p=c[l]||r,v=p(e[l],t[l],l);d.isUndefined(v)&&p!==i||(n[l]=v)}),n}const zn=e=>{const t=ce({},e);let{data:n,withXSRFToken:s,xsrfHeaderName:r,xsrfCookieName:o,headers:a,auth:i}=t;if(t.headers=a=U.from(a),t.url=_n($n(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),i&&a.set("Authorization","Basic "+btoa((i.username||"")+":"+(i.password?unescape(encodeURIComponent(i.password)):""))),d.isFormData(n)){if(j.hasStandardBrowserEnv||j.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(d.isFunction(n.getHeaders)){const c=n.getHeaders(),u=["content-type","content-length"];Object.entries(c).forEach(([l,p])=>{u.includes(l.toLowerCase())&&a.set(l,p)})}}if(j.hasStandardBrowserEnv&&(s&&d.isFunction(s)&&(s=s(t)),s||s!==!1&&yo(t.url))){const c=r&&o&&go.read(o);c&&a.set(r,c)}return t},wo=typeof XMLHttpRequest<"u",So=wo&&function(e){return new Promise(function(n,s){const r=zn(e);let o=r.data;const a=U.from(r.headers).normalize();let{responseType:i,onUploadProgress:c,onDownloadProgress:u}=r,l,p,v,A,h;function b(){A&&A(),h&&h(),r.cancelToken&&r.cancelToken.unsubscribe(l),r.signal&&r.signal.removeEventListener("abort",l)}let g=new XMLHttpRequest;g.open(r.method.toUpperCase(),r.url,!0),g.timeout=r.timeout;function x(){if(!g)return;const R=U.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),D={data:!i||i==="text"||i==="json"?g.responseText:g.response,status:g.status,statusText:g.statusText,headers:R,config:e,request:g};Bn(function(M){n(M),b()},function(M){s(M),b()},D),g=null}"onloadend"in g?g.onloadend=x:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(x)},g.onabort=function(){g&&(s(new E("Request aborted",E.ECONNABORTED,e,g)),g=null)},g.onerror=function(I){const D=I&&I.message?I.message:"Network Error",z=new E(D,E.ERR_NETWORK,e,g);z.event=I||null,s(z),g=null},g.ontimeout=function(){let I=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const D=r.transitional||Mn;r.timeoutErrorMessage&&(I=r.timeoutErrorMessage),s(new E(I,D.clarifyTimeoutError?E.ETIMEDOUT:E.ECONNABORTED,e,g)),g=null},o===void 0&&a.setContentType(null),"setRequestHeader"in g&&d.forEach(a.toJSON(),function(I,D){g.setRequestHeader(D,I)}),d.isUndefined(r.withCredentials)||(g.withCredentials=!!r.withCredentials),i&&i!=="json"&&(g.responseType=r.responseType),u&&([v,h]=$e(u,!0),g.addEventListener("progress",v)),c&&g.upload&&([p,A]=$e(c),g.upload.addEventListener("progress",p),g.upload.addEventListener("loadend",A)),(r.cancelToken||r.signal)&&(l=R=>{g&&(s(!R||R.type?new he(null,e,g):R),g.abort(),g=null)},r.cancelToken&&r.cancelToken.subscribe(l),r.signal&&(r.signal.aborted?l():r.signal.addEventListener("abort",l)));const C=po(r.url);if(C&&j.protocols.indexOf(C)===-1){s(new E("Unsupported protocol "+C+":",E.ERR_BAD_REQUEST,e));return}g.send(o||null)})},Po=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let s=new AbortController,r;const o=function(u){if(!r){r=!0,i();const l=u instanceof Error?u:this.reason;s.abort(l instanceof E?l:new he(l instanceof Error?l.message:l))}};let a=t&&setTimeout(()=>{a=null,o(new E(`timeout ${t} of ms exceeded`,E.ETIMEDOUT))},t);const i=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(o):u.removeEventListener("abort",o)}),e=null)};e.forEach(u=>u.addEventListener("abort",o));const{signal:c}=s;return c.unsubscribe=()=>d.asap(i),c}},Ao=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let s=0,r;for(;s<n;)r=s+t,yield e.slice(s,r),s=r},Eo=async function*(e,t){for await(const n of Co(e))yield*Ao(n,t)},Co=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:s}=await t.read();if(n)break;yield s}}finally{await t.cancel()}},Yt=(e,t,n,s)=>{const r=Eo(e,t);let o=0,a,i=c=>{a||(a=!0,s&&s(c))};return new ReadableStream({async pull(c){try{const{done:u,value:l}=await r.next();if(u){i(),c.close();return}let p=l.byteLength;if(n){let v=o+=p;n(v)}c.enqueue(new Uint8Array(l))}catch(u){throw i(u),u}},cancel(c){return i(c),r.return()}},{highWaterMark:2})},Xt=64*1024,{isFunction:_e}=d,Oo=(({Request:e,Response:t})=>({Request:e,Response:t}))(d.global),{ReadableStream:Zt,TextEncoder:en}=d.global,tn=(e,...t)=>{try{return!!e(...t)}catch{return!1}},xo=e=>{e=d.merge.call({skipUndefined:!0},Oo,e);const{fetch:t,Request:n,Response:s}=e,r=t?_e(t):typeof fetch=="function",o=_e(n),a=_e(s);if(!r)return!1;const i=r&&_e(Zt),c=r&&(typeof en=="function"?(h=>b=>h.encode(b))(new en):async h=>new Uint8Array(await new n(h).arrayBuffer())),u=o&&i&&tn(()=>{let h=!1;const b=new n(j.origin,{body:new Zt,method:"POST",get duplex(){return h=!0,"half"}}).headers.has("Content-Type");return h&&!b}),l=a&&i&&tn(()=>d.isReadableStream(new s("").body)),p={stream:l&&(h=>h.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(h=>{!p[h]&&(p[h]=(b,g)=>{let x=b&&b[h];if(x)return x.call(b);throw new E(`Response type '${h}' is not supported`,E.ERR_NOT_SUPPORT,g)})});const v=async h=>{if(h==null)return 0;if(d.isBlob(h))return h.size;if(d.isSpecCompliantForm(h))return(await new n(j.origin,{method:"POST",body:h}).arrayBuffer()).byteLength;if(d.isArrayBufferView(h)||d.isArrayBuffer(h))return h.byteLength;if(d.isURLSearchParams(h)&&(h=h+""),d.isString(h))return(await c(h)).byteLength},A=async(h,b)=>{const g=d.toFiniteNumber(h.getContentLength());return g??v(b)};return async h=>{let{url:b,method:g,data:x,signal:C,cancelToken:R,timeout:I,onDownloadProgress:D,onUploadProgress:z,responseType:M,headers:_,withCredentials:Q="same-origin",fetchOptions:ye}=zn(h),W=t||fetch;M=M?(M+"").toLowerCase():"text";let se=Po([C,R&&R.toAbortSignal()],I),X=null;const G=se&&se.unsubscribe&&(()=>{se.unsubscribe()});let ge;try{if(z&&u&&g!=="get"&&g!=="head"&&(ge=await A(_,x))!==0){let J=new n(b,{method:"POST",body:x,duplex:"half"}),Z;if(d.isFormData(x)&&(Z=J.headers.get("content-type"))&&_.setContentType(Z),J.body){const[be,ue]=Wt(ge,$e(Gt(z)));x=Yt(J.body,Xt,be,ue)}}d.isString(Q)||(Q=Q?"include":"omit");const B=o&&"credentials"in n.prototype,re={...ye,signal:se,method:g.toUpperCase(),headers:_.normalize().toJSON(),body:x,duplex:"half",credentials:B?Q:void 0};X=o&&new n(b,re);let V=await(o?W(X,ye):W(b,re));const Ne=l&&(M==="stream"||M==="response");if(l&&(D||Ne&&G)){const J={};["status","statusText","headers"].forEach(ke=>{J[ke]=V[ke]});const Z=d.toFiniteNumber(V.headers.get("content-length")),[be,ue]=D&&Wt(Z,$e(Gt(D),!0))||[];V=new s(Yt(V.body,Xt,be,()=>{ue&&ue(),G&&G()}),J)}M=M||"text";let De=await p[d.findKey(p,M)||"text"](V,h);return!Ne&&G&&G(),await new Promise((J,Z)=>{Bn(J,Z,{data:De,headers:U.from(V.headers),status:V.status,statusText:V.statusText,config:h,request:X})})}catch(B){throw G&&G(),B&&B.name==="TypeError"&&/Load failed|fetch/i.test(B.message)?Object.assign(new E("Network Error",E.ERR_NETWORK,h,X),{cause:B.cause||B}):E.from(B,B&&B.code,h,X)}}},Ro=new Map,Vn=e=>{let t=e?e.env:{};const{fetch:n,Request:s,Response:r}=t,o=[s,r,n];let a=o.length,i=a,c,u,l=Ro;for(;i--;)c=o[i],u=l.get(c),u===void 0&&l.set(c,u=i?new Map:xo(t)),l=u;return u};Vn();const gt={http:Vr,xhr:So,fetch:{get:Vn}};d.forEach(gt,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const nn=e=>`- ${e}`,To=e=>d.isFunction(e)||e===null||e===!1,Kn={getAdapter:(e,t)=>{e=d.isArray(e)?e:[e];const{length:n}=e;let s,r;const o={};for(let a=0;a<n;a++){s=e[a];let i;if(r=s,!To(s)&&(r=gt[(i=String(s)).toLowerCase()],r===void 0))throw new E(`Unknown adapter '${i}'`);if(r&&(d.isFunction(r)||(r=r.get(t))))break;o[i||"#"+a]=r}if(!r){const a=Object.entries(o).map(([c,u])=>`adapter ${c} `+(u===!1?"is not supported by the environment":"is not available in the build"));let i=n?a.length>1?`since :
`+a.map(nn).join(`
`):" "+nn(a[0]):"as no adapter specified";throw new E("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return r},adapters:gt};function at(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new he(null,e)}function sn(e){return at(e),e.headers=U.from(e.headers),e.data=ot.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Kn.getAdapter(e.adapter||Te.adapter,e)(e).then(function(s){return at(e),s.data=ot.call(e,e.transformResponse,s),s.headers=U.from(s.headers),s},function(s){return Un(s)||(at(e),s&&s.response&&(s.response.data=ot.call(e,e.transformResponse,s.response),s.response.headers=U.from(s.response.headers))),Promise.reject(s)})}const Hn="1.12.2",Ye={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Ye[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const rn={};Ye.transitional=function(t,n,s){function r(o,a){return"[Axios v"+Hn+"] Transitional option '"+o+"'"+a+(s?". "+s:"")}return(o,a,i)=>{if(t===!1)throw new E(r(a," has been removed"+(n?" in "+n:"")),E.ERR_DEPRECATED);return n&&!rn[a]&&(rn[a]=!0,console.warn(r(a," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(o,a,i):!0}};Ye.spelling=function(t){return(n,s)=>(console.warn(`${s} is likely a misspelling of ${t}`),!0)};function No(e,t,n){if(typeof e!="object")throw new E("options must be an object",E.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let r=s.length;for(;r-- >0;){const o=s[r],a=t[o];if(a){const i=e[o],c=i===void 0||a(i,o,e);if(c!==!0)throw new E("option "+o+" must be "+c,E.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new E("Unknown option "+o,E.ERR_BAD_OPTION)}}const Ue={assertOptions:No,validators:Ye},Y=Ue.validators;let ae=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Ht,response:new Ht}}async request(t,n){try{return await this._request(t,n)}catch(s){if(s instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const o=r.stack?r.stack.replace(/^.+\n/,""):"";try{s.stack?o&&!String(s.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+o):s.stack=o}catch{}}throw s}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=ce(this.defaults,n);const{transitional:s,paramsSerializer:r,headers:o}=n;s!==void 0&&Ue.assertOptions(s,{silentJSONParsing:Y.transitional(Y.boolean),forcedJSONParsing:Y.transitional(Y.boolean),clarifyTimeoutError:Y.transitional(Y.boolean)},!1),r!=null&&(d.isFunction(r)?n.paramsSerializer={serialize:r}:Ue.assertOptions(r,{encode:Y.function,serialize:Y.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Ue.assertOptions(n,{baseUrl:Y.spelling("baseURL"),withXsrfToken:Y.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=o&&d.merge(o.common,o[n.method]);o&&d.forEach(["delete","get","head","post","put","patch","common"],h=>{delete o[h]}),n.headers=U.concat(a,o);const i=[];let c=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(n)===!1||(c=c&&b.synchronous,i.unshift(b.fulfilled,b.rejected))});const u=[];this.interceptors.response.forEach(function(b){u.push(b.fulfilled,b.rejected)});let l,p=0,v;if(!c){const h=[sn.bind(this),void 0];for(h.unshift(...i),h.push(...u),v=h.length,l=Promise.resolve(n);p<v;)l=l.then(h[p++],h[p++]);return l}v=i.length;let A=n;for(;p<v;){const h=i[p++],b=i[p++];try{A=h(A)}catch(g){b.call(this,g);break}}try{l=sn.call(this,A)}catch(h){return Promise.reject(h)}for(p=0,v=u.length;p<v;)l=l.then(u[p++],u[p++]);return l}getUri(t){t=ce(this.defaults,t);const n=$n(t.baseURL,t.url,t.allowAbsoluteUrls);return _n(n,t.params,t.paramsSerializer)}};d.forEach(["delete","get","head","options"],function(t){ae.prototype[t]=function(n,s){return this.request(ce(s||{},{method:t,url:n,data:(s||{}).data}))}});d.forEach(["post","put","patch"],function(t){function n(s){return function(o,a,i){return this.request(ce(i||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:o,data:a}))}}ae.prototype[t]=n(),ae.prototype[t+"Form"]=n(!0)});let Do=class Qn{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const s=this;this.promise.then(r=>{if(!s._listeners)return;let o=s._listeners.length;for(;o-- >0;)s._listeners[o](r);s._listeners=null}),this.promise.then=r=>{let o;const a=new Promise(i=>{s.subscribe(i),o=i}).then(r);return a.cancel=function(){s.unsubscribe(o)},a},t(function(o,a,i){s.reason||(s.reason=new he(o,a,i),n(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=s=>{t.abort(s)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new Qn(function(r){t=r}),cancel:t}}};function ko(e){return function(n){return e.apply(null,n)}}function Io(e){return d.isObject(e)&&e.isAxiosError===!0}const bt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(bt).forEach(([e,t])=>{bt[t]=e});function Wn(e){const t=new ae(e),n=Cn(ae.prototype.request,t);return d.extend(n,ae.prototype,t,{allOwnKeys:!0}),d.extend(n,t,null,{allOwnKeys:!0}),n.create=function(r){return Wn(ce(e,r))},n}const k=Wn(Te);k.Axios=ae;k.CanceledError=he;k.CancelToken=Do;k.isCancel=Un;k.VERSION=Hn;k.toFormData=Je;k.AxiosError=E;k.Cancel=k.CanceledError;k.all=function(t){return Promise.all(t)};k.spread=ko;k.isAxiosError=Io;k.mergeConfig=ce;k.AxiosHeaders=U;k.formToJSON=e=>qn(d.isHTMLForm(e)?new FormData(e):e);k.getAdapter=Kn.getAdapter;k.HttpStatusCode=bt;k.default=k;const{Axios:vi,AxiosError:wi,CanceledError:Si,isCancel:Pi,CancelToken:Ai,VERSION:Ei,all:Ci,Cancel:Oi,isAxiosError:xi,spread:Ri,toFormData:Ti,AxiosHeaders:Ni,HttpStatusCode:Di,formToJSON:ki,getAdapter:Ii,mergeConfig:Fi}=k,Fo="http://localhost:8081",Xe="00000000-0000-0000-0000-000000000001",xt="admin@dev.local",Gn="Admin1234",Lo="dev-session-token",Jn="dev-session-refresh-token",Rt=Xe,jo=["admin"],_o=["sales","purchases","inventory","customers","suppliers","finances","reports","settings"],on=globalThis.structuredClone;function Mo(e){return typeof on=="function"?on(e):JSON.parse(JSON.stringify(e))}let ze=!1;function Yn(e){ze?console.info(`[API] Using offline demo data for ${e}.`):(ze=!0,console.warn(`[API] Network unreachable during ${e}. Switching to in-memory demo data so the workspace keeps working.`))}function an(e){return Mo(e)}function Xn(e){return Array.isArray(e)?e:[]}function qo(e){if(typeof e!="string")return null;const t=e.match(/filename\*=UTF-8''([^;]+)/i);if(t&&t[1])try{return decodeURIComponent(t[1])}catch(s){console.warn("[API] Failed to decode UTF-8 filename",s)}const n=e.match(/filename="?([^";]+)"?/i);return n&&n[1]?n[1]:null}function Zn(e,t){const n=e.data,s=typeof n?.type=="string"&&n.type?n.type:void 0,r=typeof e.headers["content-type"]=="string"?e.headers["content-type"]:void 0,o=s||r||"application/octet-stream",a=qo(e.headers["content-disposition"])||t;return{blob:n,filename:a,mimeType:o}}function Tt(e,t){const n=t==="preview"?"Vista previa no disponible":"Descarga no disponible",r=`<!DOCTYPE html><html lang="es"><head><meta charset="utf-8" /><title>${n}</title></head><body><main style="font-family:system-ui,sans-serif;padding:24px;max-width:640px;margin:auto;"><h1 style="margin-bottom:16px;">${n}</h1><p style="margin-bottom:16px;">${t==="preview"?"No hay contenido disponible sin conexin para mostrar este documento.":"No hay archivo disponible para descargar sin conexin."}</p><p style="color:#555;">Documento: ${e}</p></main></body></html>`;return{blob:new Blob([r],{type:"text/html"}),filename:`${t}-documento-${e}.html`,mimeType:"text/html"}}const es="offline://document";function cn(e,t){return`${es}/${t}/${encodeURIComponent(e)}`}function Uo(e){if(typeof e!="string"||!e.startsWith(es))return null;const t=e.split("/");if(t.length<4)return null;const n=t[2],s=decodeURIComponent(t.slice(3).join("/"));return n!=="LOCAL"&&n!=="OFFICIAL"||!s?null:{id:s,version:n}}function Bo(e){return{localPdf:cn(e,"LOCAL"),officialPdf:cn(e,"OFFICIAL")}}const $o=new Date,O=e=>e.toISOString();function N(e){const t=new Date($o);return t.setDate(t.getDate()-e),t}const m={companies:[{id:"cmp-demo-001",businessName:"Demo Comercial SpA",rut:"76.123.456-0",businessActivity:"Retail",address:"Av. Siempre Viva 742, Santiago",commune:"Providencia",phone:"+56 2 2345 6677",email:"contacto@democomercial.cl",receiptFooterMessage:"Gracias por tu compra!",createdAt:O(N(180)),updatedAt:O(N(20))},{id:"cmp-demo-002",businessName:"Servicios Norte Ltda.",rut:"77.987.654-3",businessActivity:"Servicios",address:"Av. Costanera 1200, Antofagasta",commune:"Antofagasta",phone:"+56 55 278 9900",email:"administracion@serviciosnorte.cl",receiptFooterMessage:"Servicio garantizado",createdAt:O(N(95)),updatedAt:O(N(10))},{id:"cmp-demo-003",businessName:"Distribuidora Andina",rut:"78.321.654-K",businessActivity:"Logstica",address:"Camino a Melipilla 15000, Maip",commune:"Maip",phone:"+56 2 2388 1122",email:"ventas@andina.cl",receiptFooterMessage:"Despachos en 24 horas",createdAt:O(N(45)),updatedAt:O(N(3))}],userAccounts:[{id:"usr-demo-001",email:xt,name:"Dev Admin",role:"admin",status:"active",roles:["ROLE_ADMIN"],createdAt:O(N(120)),password:Gn},{id:"usr-demo-002",email:"ventas@dev.local",name:"Vendedora Demo",role:"sales",status:"active",roles:["ROLE_SALES","ROLE_REPORTS"],createdAt:O(N(45)),password:"Ventas123"}],products:[{id:"prd-demo-001",sku:"SKU-1001",name:"Caf en grano premium 1Kg",description:"Tueste medio alto, origen Colombia",category:"Alimentos",barcode:"7800001001002",currentPrice:11990,imageUrl:void 0,qrUrl:void 0,stock:120,criticalStock:40,active:!0},{id:"prd-demo-002",sku:"SKU-1002",name:"Azcar orgnica 1Kg",description:"Certificada comercio justo",category:"Alimentos",barcode:"7800001002001",currentPrice:3290,imageUrl:void 0,qrUrl:void 0,stock:68,criticalStock:25,active:!0},{id:"prd-demo-003",sku:"SKU-2040",name:"Vasos biodegradables 12oz (pack 50)",description:"Pulpa de caa, compostable",category:"Insumos",barcode:"7801234567005",currentPrice:8990,imageUrl:void 0,qrUrl:void 0,stock:22,criticalStock:30,active:!0},{id:"prd-demo-004",sku:"SKU-3055",name:"Botella vidrio reusable 600ml",description:"Incluye funda trmica",category:"Retail",barcode:"7801231234568",currentPrice:7490,imageUrl:void 0,qrUrl:void 0,stock:6,criticalStock:15,active:!1}],productPrices:{"prd-demo-001":[{id:"pp-001",productId:"prd-demo-001",price:10990,validFrom:O(N(90))},{id:"pp-002",productId:"prd-demo-001",price:11990,validFrom:O(N(28))}],"prd-demo-002":[{id:"pp-003",productId:"prd-demo-002",price:2990,validFrom:O(N(120))},{id:"pp-004",productId:"prd-demo-002",price:3290,validFrom:O(N(32))}],"prd-demo-003":[{id:"pp-005",productId:"prd-demo-003",price:8990,validFrom:O(N(62))}],"prd-demo-004":[{id:"pp-006",productId:"prd-demo-004",price:7490,validFrom:O(N(200))}]},suppliers:[{id:"sup-demo-001",name:"Proveedor Andes",rut:"76.555.111-1",businessActivity:"Distribucin de alimentos",address:"Av. Los Leones 1200, Providencia",commune:"Providencia",phone:"+56 2 2456 7788",email:"ventas@proveedorandes.cl",createdAt:O(N(140))},{id:"sup-demo-002",name:"Granos Latino",rut:"77.444.333-2",businessActivity:"Importacin de granos",address:"Camino a Noviciado 2345, Pudahuel",commune:"Pudahuel",phone:"+56 2 2988 1100",email:"contacto@granoslatino.cl",createdAt:O(N(60))},{id:"sup-demo-003",name:"Eco Packaging",rut:"79.222.888-5",businessActivity:"Envases sustentables",address:"Av. Repblica 980, Santiago",commune:"Santiago",phone:"+56 2 2311 4455",email:"ventas@ecopackaging.cl",createdAt:O(N(12))}],customers:[{id:"cus-demo-001",name:"Cafetera Plaza",address:"Av. Providencia 1234, Santiago",lat:-33.4263,lng:-70.6209,phone:"+56 2 2345 6677",email:"contacto@cafeteriaplaza.cl",segment:"HORECA",document:"76.123.456-0",commune:"Providencia"},{id:"cus-demo-002",name:"MiniMarket Central",address:"Av. Alemania 890, Temuco",phone:"+56 45 212 3344",email:"compras@mmcentral.cl",segment:"Retail",document:"77.987.654-3",commune:"Temuco"},{id:"cus-demo-003",name:"Corporacin Sur",address:"Los Carrera 450, Concepcin",phone:"+56 41 276 0011",email:"abastecimiento@corsur.cl",segment:"Empresas",document:"59.456.789-1",commune:"Concepcin"},{id:"cus-demo-004",name:"Coffeelab Boutique",address:"Av. Peru 345, Antofagasta",phone:"+56 55 284 9988",email:"ventas@coffeelab.cl",segment:"HORECA",document:"65.432.109-4",commune:"Antofagasta"},{id:"cus-demo-005",name:"Vecinos Gourmet",address:"Av. Italia 987, Santiago",phone:"+56 2 2567 7789",email:"hola@vecinosgourmet.cl",document:"79.321.654-2",commune:"Providencia"}],sales:[{id:"sal-demo-001",customerId:"cus-demo-001",customerName:"Cafetera Plaza",docNumber:"F-1200",docType:"Factura",paymentMethod:"transferencia",status:"emitida",net:95e4,vat:180500,total:1130500,issuedAt:O(N(2))},{id:"sal-demo-002",customerId:"cus-demo-004",customerName:"Coffeelab Boutique",docNumber:"B-2301",docType:"Boleta",paymentMethod:"tarjeta",status:"emitida",net:28e4,vat:53200,total:333200,issuedAt:O(N(4))},{id:"sal-demo-003",customerId:"cus-demo-002",customerName:"MiniMarket Central",docNumber:"F-4502",docType:"Factura",paymentMethod:"credito",status:"cancelled",net:41e4,vat:77900,total:487900,issuedAt:O(N(9))}],saleDetails:{"sal-demo-001":{id:"sal-demo-001",issuedAt:O(N(2)),docType:"Factura",docNumber:"F-1200",paymentMethod:"transferencia",status:"emitida",customer:{id:"cus-demo-001",name:"Cafetera Plaza"},items:[{productId:"prd-demo-001",productName:"Caf en grano premium 1Kg",qty:80,unitPrice:11990,discount:0,lineTotal:959200},{productId:"prd-demo-003",productName:"Vasos biodegradables 12oz (pack 50)",qty:50,unitPrice:8990,discount:0,lineTotal:449500}],net:95e4,vat:180500,total:1130500,thermalTicket:`PYMERP
Venta sal-demo-001
Cliente: Cafetera Plaza
Total: $1.130.500
Gracias por su compra`},"sal-demo-002":{id:"sal-demo-002",issuedAt:O(N(4)),docType:"Boleta",docNumber:"B-2301",paymentMethod:"tarjeta",status:"emitida",customer:{id:"cus-demo-004",name:"Coffeelab Boutique"},items:[{productId:"prd-demo-001",productName:"Caf en grano premium 1Kg",qty:20,unitPrice:11990,discount:0,lineTotal:239800},{productId:"prd-demo-002",productName:"Azcar orgnica 1Kg",qty:40,unitPrice:3290,discount:0,lineTotal:131600}],net:28e4,vat:53200,total:333200,thermalTicket:`PYMERP
Venta sal-demo-002
Total: $333.200
Emitida con POS`},"sal-demo-003":{id:"sal-demo-003",issuedAt:O(N(9)),docType:"Factura",docNumber:"F-4502",paymentMethod:"credito",status:"cancelled",customer:{id:"cus-demo-002",name:"MiniMarket Central"},items:[{productId:"prd-demo-003",productName:"Vasos biodegradables 12oz (pack 50)",qty:25,unitPrice:8990,discount:0,lineTotal:224750},{productId:"prd-demo-002",productName:"Azcar orgnica 1Kg",qty:60,unitPrice:3290,discount:0,lineTotal:197400}],net:41e4,vat:77900,total:487900,thermalTicket:`PYMERP
Venta sal-demo-003
ESTADO: Cancelada`}},purchases:[{id:"pur-demo-001",supplierId:"sup-demo-001",supplierName:"Proveedor Andes",docType:"Factura",docNumber:"F-4432",status:"received",net:54e4,vat:102600,total:642600,issuedAt:O(N(6))},{id:"pur-demo-002",supplierId:"sup-demo-003",supplierName:"Eco Packaging",docType:"Factura",docNumber:"F-8891",status:"received",net:215e3,vat:40850,total:255850,issuedAt:O(N(11))},{id:"pur-demo-003",supplierId:"sup-demo-002",supplierName:"Granos Latino",docType:"Factura",docNumber:"F-5501",status:"cancelled",net:18e4,vat:34200,total:214200,issuedAt:O(N(18))}],inventorySummary:{totalValue:1585e3,activeProducts:3,inactiveProducts:1,totalProducts:4,lowStockAlerts:2,lowStockThreshold:12},inventoryAlerts:[{lotId:"lot-demo-001",productId:"prd-demo-002",qtyAvailable:8,createdAt:O(N(1)),expDate:O(N(-60))},{lotId:"lot-demo-002",productId:"prd-demo-003",qtyAvailable:5,createdAt:O(N(3)),expDate:O(N(-120))}],inventorySettings:{lowStockThreshold:12,updatedAt:O(N(5))},salesDaily:Array.from({length:14}).map((e,t)=>{const n=13-t,s=35e4+t%5*42e3;return{date:O(N(n)).slice(0,10),total:s,count:4+t%3}}),purchaseDaily:Array.from({length:14}).map((e,t)=>{const n=13-t,s=22e4+t%4*38e3;return{date:O(N(n)).slice(0,10),total:s,count:2+t%2}})};function ne(e){return`${e}-${Math.random().toString(36).slice(2,10)}`}function F(e){return e?.toLowerCase().normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"")??""}function Ze(e,t){return t?e?F(e).includes(t):!1:!0}function me(e,t=0,n=20){const s=n>0?n:20,r=t*s,o=e.slice(r,r+s),a=e.length,i=s>0?Math.ceil(a/s):0;return{content:o,totalElements:a,totalPages:i,size:s,number:t,hasNext:i>0?t+1<i:!1}}function w(e,t,n){return ze?Promise.resolve(an(n())):t().catch(s=>{if(nt(s))return Yn(e),an(n());throw s})}function et(e,t,n){return ze?(n(),Promise.resolve()):t().catch(s=>{if(nt(s)){Yn(e),n();return}throw s})}function tt(){const e=m.products.filter(t=>t.active).length;m.inventorySummary={totalValue:Number(m.inventorySummary.totalValue)||0,activeProducts:e,inactiveProducts:m.products.length-e,totalProducts:m.products.length,lowStockAlerts:m.inventoryAlerts.length,lowStockThreshold:m.inventorySettings.lowStockThreshold}}O(N(0));function zo(e){const t=m.companies.find(n=>n.id===e);if(!t)throw new Error("Company not found");return t}function Vo(e,t){const n=m.companies.findIndex(o=>o.id===e);if(n===-1)throw new Error("Company not found");const r={...m.companies[n],businessName:t.businessName,rut:t.rut,businessActivity:t.businessActivity,address:t.address,commune:t.commune,phone:t.phone,email:t.email?.toLowerCase(),receiptFooterMessage:t.receiptFooterMessage,updatedAt:new Date().toISOString()};return m.companies=[...m.companies.slice(0,n),r,...m.companies.slice(n+1)],r}const Ko=["ROLE_ADMIN","ROLE_SALES","ROLE_SELLER","ROLE_PURCHASES","ROLE_BUYER","ROLE_INVENTORY","ROLE_FINANCE","ROLE_REPORTS","ROLE_SETTINGS"];function Nt(e){return{id:e.id,email:e.email,name:e.name,role:e.role,status:e.status,roles:[...e.roles],createdAt:e.createdAt}}function ts(e){if(!e||!e.trim())throw new Error("Email is required");return e.trim().toLowerCase()}function ns(e){if(!e||!e.trim())throw new Error("Name is required");return e.trim()}function ss(e){if(!e||!e.trim())return"active";const t=e.trim().toLowerCase();if(t==="active")return"active";if(t==="disabled"||t==="inactive")return"disabled";throw new Error(`Unsupported status: ${e}`)}function rs(e){const t=Array.isArray(e)&&e.length>0?e:["ROLE_ADMIN"],n=[];for(const s of t){if(!s||!s.trim())continue;let r=s.trim().toUpperCase();if(r.startsWith("ROLE_")||(r=`ROLE_${r}`),!Ko.includes(r))throw new Error(`Unsupported role: ${s}`);n.includes(r)||n.push(r)}return n.length===0&&n.push("ROLE_ADMIN"),n}function os(e,t){if(e&&e.trim())return e.trim();const n=t[0]??"ROLE_ADMIN";return n.startsWith("ROLE_")&&n.length>5?n.substring(5).toLowerCase():n.toLowerCase()}function as(e,t){const n=m.userAccounts.find(s=>s.email.toLowerCase()===e.toLowerCase());if(n&&n.id!==t)throw new Error("Email already registered")}function is(e){if(!e||e.trim().length<8)throw new Error("Password must be at least 8 characters long")}function Ho(){return m.userAccounts.map(e=>Nt(e))}function Qo(e){const t=ts(e.email);as(t);const n=ns(e.name),s=rs(e.roles??void 0),r=ss(e.status??void 0);is(e.password);const o={id:ne("usr-demo"),email:t,name:n,role:os(e.role??null,s),status:r,roles:s,createdAt:new Date().toISOString(),password:e.password};return m.userAccounts=[...m.userAccounts,o],Nt(o)}function Wo(e,t){const n=m.userAccounts.findIndex(u=>u.id===e);if(n===-1)throw new Error("User not found");const s=ts(t.email);as(s,e);const r=ns(t.name),o=rs(t.roles??void 0),a=ss(t.status??void 0),c={...m.userAccounts[n],email:s,name:r,role:os(t.role??null,o),status:a,roles:o};return m.userAccounts=[...m.userAccounts.slice(0,n),c,...m.userAccounts.slice(n+1)],Nt(c)}function Go(e,t){const n=m.userAccounts.findIndex(r=>r.id===e);if(n===-1)throw new Error("User not found");is(t.password);const s=m.userAccounts[n];m.userAccounts[n]={...s,password:t.password}}function Jo(e){const t=F(e?.q??""),n=e?.status??"active",s=m.products.filter(a=>n!=="all"&&a.active!==(n==="active")?!1:t?[a.name,a.sku,a.barcode,a.description].some(i=>Ze(i,t)):!0),r=e?.page??0,o=e?.size??20;return me(s,r,o)}function Yo(e,t){const n=F(e);if(!n)return null;const s=r=>F(r??"")===n;return m.products.find(r=>t==="barcode"?s(r.barcode??null):t==="sku"?s(r.sku):t==="qr"?s(r.qrUrl??null):!1)??null}function Xo(e){const t={id:ne("prd-demo"),sku:e.sku||`SKU-${Math.floor(Math.random()*9999)}`,name:e.name,description:e.description,category:e.category,barcode:e.barcode,imageUrl:e.imageUrl,qrUrl:void 0,stock:0,criticalStock:0,currentPrice:0,active:!0};return m.products=[t,...m.products],m.productPrices[t.id]=[],tt(),t}function Zo(e,t){const n=m.products.findIndex(r=>r.id===e);if(n===-1)throw new Error("Producto no encontrado");const s={...m.products[n],...t};return m.products=m.products.map((r,o)=>o===n?s:r),tt(),s}function it(e){if(typeof e!="string")return;const t=e.trim();return t.length>0?t:void 0}function cs(e){const t={sku:e.sku.trim(),name:e.name.trim(),description:it(e.description),category:it(e.category),barcode:it(e.barcode)};if(e.imageFile)t.imageUrl=null;else if(e.imageUrl===null)t.imageUrl=null;else if(typeof e.imageUrl=="string"){const n=e.imageUrl.trim();t.imageUrl=n.length>0?n:null}return t}function us(e,t){const n=new FormData;return n.append("product",new Blob([JSON.stringify(e)],{type:"application/json"})),t instanceof File&&n.append("image",t),n}function ea(e){const t=[{lotId:`${e}-lot-1`,quantity:42,locationCode:"BC",locationName:"Bodega central",expDate:new Date(Date.now()+10368e6).toISOString()},{lotId:`${e}-lot-2`,quantity:18,locationCode:"TP",locationName:"Tienda principal",expDate:new Date(Date.now()+3888e6).toISOString()}],n=t.reduce((r,o)=>r+o.quantity,0),s=m.products.findIndex(r=>r.id===e);return s!==-1&&(m.products=m.products.map((r,o)=>o===s?{...r,stock:n}:r)),{productId:e,total:n,lots:t}}function ta(e,t){const n=Xn(m.productPrices[e]).sort((s,r)=>r.validFrom.localeCompare(s.validFrom));return me(n,t?.page??0,t?.size??n.length)}function na(e,t){const n={id:ne("pp-demo"),productId:e,price:t.price,validFrom:t.validFrom??new Date().toISOString()},s=Xn(m.productPrices[e]);m.productPrices[e]=[n,...s];const r=m.products.findIndex(o=>o.id===e);if(r!==-1){const o={...m.products[r],currentPrice:t.price};m.products=m.products.map((a,i)=>i===r?o:a)}return n}function sa(){return m.suppliers}function ra(e){const t={id:ne("sup-demo"),name:e.name,rut:e.rut,address:e.address??null,commune:e.commune??null,businessActivity:e.businessActivity??null,phone:e.phone??null,email:e.email??null,createdAt:O(new Date)};return m.suppliers=[...m.suppliers,t],t}function oa(e,t){const n=m.suppliers.findIndex(r=>r.id===e);if(n===-1)throw new Error("Proveedor no encontrado");const s={...m.suppliers[n],...t};return m.suppliers=m.suppliers.map((r,o)=>o===n?s:r),s}function aa(e){m.suppliers=m.suppliers.filter(t=>t.id!==e)}function ia(e={}){const t=F(e.q??""),n=e.segment?.trim(),s=m.customers.filter(r=>{if(n&&n.length>0){if(n===vt){if(r.segment&&r.segment.trim())return!1}else if(F(r.segment)!==F(n))return!1}return t?[r.name,r.email,r.phone,r.address,r.document,r.commune].some(o=>Ze(o,t)):!0});return me(s,e.page??0,e.size??20)}function ca(e){const t={id:ne("cus-demo"),name:e.name,address:e.address,lat:e.lat??null,lng:e.lng??null,phone:e.phone,email:e.email,segment:e.segment,document:e.document??null,commune:e.commune??null};return m.customers=[t,...m.customers],t}function ua(e,t){const n=m.customers.findIndex(r=>r.id===e);if(n===-1)throw new Error("Cliente no encontrado");const s={...m.customers[n],...t,lat:t.lat??null,lng:t.lng??null};return m.customers=m.customers.map((r,o)=>o===n?s:r),s}function la(e){m.customers=m.customers.filter(t=>t.id!==e)}function da(){const e=new Map;for(const t of m.customers){const n=t.segment&&t.segment.trim()?t.segment:vt,s=n;if(!e.has(s)){const r=n===vt?"Sin segmentar":t.segment??"Sin segmentar";e.set(s,{code:s,name:r,segment:r,total:0,color:null})}e.get(s).total+=1}return Array.from(e.values())}function ls(e){return["PYMERP DEMO",`Documento: ${e.docType}`,`Venta: ${e.id}`,`Cliente: ${e.customer?.name??"Mostrador"}`,`Total: $${Number(e.total).toLocaleString("es-CL")}`,"Gracias por utilizar el modo demo"].join(`
`)}function fa(e={}){const t=F(e.search??""),n=m.sales.filter(s=>e.status&&e.status.trim()&&F(s.status)!==F(e.status)||e.docType&&e.docType.trim()&&F(s.docType)!==F(e.docType)||e.paymentMethod&&e.paymentMethod.trim()&&F(s.paymentMethod)!==F(e.paymentMethod)||e.from&&s.issuedAt<e.from||e.to&&s.issuedAt>e.to?!1:t?[s.docType,s.paymentMethod,s.customerName,s.customerId,s.id].filter(Boolean).some(r=>Ze(String(r),t)):!0);return me(n,e.page??0,e.size??20)}function pa(e){const t=m.saleDetails[e];if(!t)throw new Error("Venta no encontrada");return t}function ha(e){const t=ne("sal-demo"),n=e.items.reduce((u,l)=>u+l.qty*l.unitPrice-(l.discount??0),0),s=Math.round(n*.19),r=n-s,a=`${(e.docType||"DOC").slice(0,3).toUpperCase()}-${t.slice(-4).toUpperCase()}`,i={id:t,customerId:e.customerId,customerName:m.customers.find(u=>u.id===e.customerId)?.name,docNumber:a,docType:e.docType,paymentMethod:e.paymentMethod??"transferencia",status:"emitida",net:r,vat:s,total:n,issuedAt:new Date().toISOString()};m.sales=[i,...m.sales];const c={...i,docType:e.docType,paymentMethod:i.paymentMethod??"transferencia",customer:i.customerId?{id:i.customerId,name:i.customerName??"Cliente"}:null,items:e.items.map(u=>({productId:u.productId,productName:m.products.find(l=>l.id===u.productId)?.name??u.productId,qty:u.qty,unitPrice:u.unitPrice,discount:u.discount??0,lineTotal:u.qty*u.unitPrice-(u.discount??0)})),thermalTicket:""};return c.thermalTicket=ls(c),m.saleDetails[t]=c,{id:t,customerId:i.customerId,customerName:i.customerName,status:i.status,net:i.net,vat:i.vat,total:i.total,issuedAt:i.issuedAt,docType:i.docType??"Factura",paymentMethod:i.paymentMethod??"transferencia",docNumber:i.docNumber}}function ds(e,t){const n=m.sales.findIndex(o=>o.id===e);if(n===-1)throw new Error("Venta no encontrada");const s={...m.sales[n],...t};m.sales=m.sales.map((o,a)=>a===n?s:o);const r=m.saleDetails[e];return r&&(m.saleDetails[e]={...r,docType:s.docType??r.docType,docNumber:s.docNumber??r.docNumber,paymentMethod:s.paymentMethod??r.paymentMethod,status:s.status??r.status,thermalTicket:ls({...r,...s})}),{id:s.id,customerId:s.customerId,customerName:s.customerName,status:s.status,net:s.net,vat:s.vat,total:s.total,issuedAt:s.issuedAt,docType:s.docType??"Factura",paymentMethod:s.paymentMethod??"transferencia",docNumber:s.docNumber}}function ma(e){return ds(e,{status:"cancelled"})}function ya(e=14){return m.salesDaily.slice(-e)}function ga(e,t){return!e||!t||e>t?[]:m.salesDaily.filter(n=>n.date>=e&&n.date<=t)}function ba(e){const t=e.trim(),n=/^(\d+)\s*d$/i.exec(t);if(!n)return 14;const s=Number.parseInt(n[1],10);return Number.isNaN(s)?14:Math.max(1,s)}function un(e,t){if(!e||!t)return null;const n=new Date(`${e}T00:00:00Z`),s=new Date(`${t}T00:00:00Z`);if(Number.isNaN(n.getTime())||Number.isNaN(s.getTime()))return null;const r=n.getTime(),o=s.getTime()+86399999;return r<=o?{start:r,end:o}:{start:o,end:r}}function va({from:e,to:t}){const n=un(e,t);if(!n)return{totalDay:0,topProduct:null,topPaymentMethods:[]};const s=new Set(["boleta","factura"]),r=m.sales.filter(p=>{if(!p.issuedAt||p.status==="cancelled")return!1;const v=F(p.docType);if(v&&!s.has(v))return!1;const A=new Date(p.issuedAt).getTime();return A>=n.start&&A<=n.end}),o=un(t,t),a=r.reduce((p,v)=>{if(!o)return p;const A=new Date(v.issuedAt).getTime();return A>=o.start&&A<=o.end?p+(v.total??0):p},0),i=new Map;r.forEach(p=>{(m.saleDetails[p.id]?.items??[]).forEach(h=>{const b=h.productId??h.productName;if(!b)return;const g=i.get(b)??{id:b,name:h.productName,qty:0};g.qty+=h.qty??0,g.name=h.productName,i.set(b,g)})});let c=null;i.forEach(p=>{(!c||p.qty>c.qty)&&(c=p)});const u=new Map;r.forEach(p=>{const v=p.paymentMethod?.trim().length?p.paymentMethod:"Sin mtodo";u.set(v,(u.get(v)??0)+1)});const l=Array.from(u.entries()).sort((p,v)=>v[1]-p[1]).map(([p,v])=>({method:p,count:v}));return{totalDay:a,topProduct:c,topPaymentMethods:l}}function wa({from:e,to:t}){if(!e||!t||e>t)return{purchase:[],sale:[]};const n=m.purchaseDaily.filter(r=>r.date>=e&&r.date<=t).map(r=>({date:r.date,value:r.total})),s=m.salesDaily.filter(r=>r.date>=e&&r.date<=t).map(r=>({date:r.date,value:r.total}));return{purchase:n,sale:s}}function Sa(e){const t=ba(e),n=ya(t),s=n.reduce((a,i)=>a+(i.total??0),0),r=n.reduce((a,i)=>a+(i.count??0),0),o=t>0?s/t:0;return{window:e,totalWithTax:s,dailyAverage:o,documentCount:r}}function Pa(e){const t=new Date,n=new Date(t),s=new Date(t);switch(s.setHours(0,0,0,0),e){case"week":s.setDate(s.getDate()-6);break;case"month":s.setDate(1);break}const r=n.getTime(),o=s.getTime(),a=new Set(["boleta","factura"]),i=m.sales.filter(l=>{if(!l.issuedAt||l.status?.toLowerCase()==="cancelled")return!1;const p=F(l.docType);if(p&&!a.has(p))return!1;const v=new Date(l.issuedAt).getTime();return Number.isNaN(v)?!1:v>=o&&v<=r}),c=i.reduce((l,p)=>l+(p.total??0),0),u=i.reduce((l,p)=>l+(p.net??0),0);return{period:e,total:c,net:u,count:i.length}}function Aa(e,t=20){if(!e)return[];const n=t>0?t:20,s=new Map(m.products.map(o=>[o.id,o])),r=new Map;return Object.values(m.saleDetails).forEach(o=>{if(o.customer?.id!==e||o.status?.toLowerCase()==="cancelled")return;const a=o.issuedAt??new Date().toISOString();o.items.forEach(i=>{if(!i.productId)return;const c=s.get(i.productId),u=r.get(i.productId)??{productId:i.productId,name:c?.name??i.productName??i.productId,sku:c?.sku??"",totalPurchases:0,totalQty:0,lastPurchasedAt:a,lastUnitPrice:void 0,lastQty:void 0},l=Number(i.qty)||0;u.totalPurchases+=1,u.totalQty+=l;const p=new Date(u.lastPurchasedAt).getTime(),v=new Date(a).getTime();(!u.lastPurchasedAt||Number.isNaN(p)||v>=p)&&(u.lastPurchasedAt=a,u.lastUnitPrice=Number(i.unitPrice)||(c?.currentPrice?Number(c.currentPrice):void 0),u.lastQty=l>0?l:u.lastQty,u.name=c?.name??i.productName??u.name,u.sku=c?.sku??u.sku),r.set(i.productId,u)})}),Array.from(r.values()).sort((o,a)=>{if(a.totalPurchases!==o.totalPurchases)return a.totalPurchases-o.totalPurchases;const i=new Date(o.lastPurchasedAt).getTime();return new Date(a.lastPurchasedAt).getTime()-i}).slice(0,n).map(o=>({productId:o.productId,name:o.name,sku:o.sku,lastPurchasedAt:o.lastPurchasedAt,totalPurchases:o.totalPurchases,avgQty:o.totalPurchases>0?o.totalQty/o.totalPurchases:void 0,lastUnitPrice:o.lastUnitPrice,lastQty:o.lastQty}))}function Ea(e){return e.documentNumber&&e.documentNumber.trim()?e.documentNumber:e.docNumber&&e.docNumber.trim()?e.docNumber:e.series&&(e.folio??"")!==""?`${e.series}-${e.folio}`:e.id}function Ca(e={}){const t=e.size&&e.size>0?e.size:10,n=e.page??0,s=e.sort?.toLowerCase()??"date,desc",o=[...m.sales].sort((a,i)=>{const c=a.issuedAt??"",u=i.issuedAt??"";return s==="date,asc"?c.localeCompare(u):u.localeCompare(c)}).map(a=>({id:a.id,documentNumber:Ea(a),docNumber:a.docNumber,series:a.series,folio:a.folio,date:a.issuedAt,customerName:a.customerName??a.customerId??"",total:a.total,status:a.status,docType:a.docType,links:Bo(a.id)}));return me(o,n,t)}function Oa(e){return Tt(e,"preview")}function xa(e,t="OFFICIAL"){const n=t==="LOCAL"?"preview":"download",s=`${e}-${t.toLowerCase()}`;return Tt(s,n)}function Ra(e={}){const t=F(e.search??""),n=m.purchases.filter(s=>e.status&&e.status.trim()&&F(s.status)!==F(e.status)||e.docType&&e.docType.trim()&&F(s.docType)!==F(e.docType)||e.from&&s.issuedAt<e.from||e.to&&s.issuedAt>e.to?!1:t?[s.docNumber,s.supplierName,s.supplierId].some(r=>Ze(r,t)):!0);return me(n,e.page??0,e.size??20)}function fs(e,t){const n=m.purchases.findIndex(r=>r.id===e);if(n===-1)throw new Error("Compra no encontrada");const s={...m.purchases[n],...t};return m.purchases=m.purchases.map((r,o)=>o===n?s:r),s}function Ta(e){return fs(e,{status:"cancelled"})}function Na(e){const t=ne("pur-demo"),n={id:t,supplierId:e.supplierId,supplierName:m.suppliers.find(s=>s.id===e.supplierId)?.name,docType:e.docType,docNumber:e.docNumber,status:"received",net:e.net,vat:e.vat,total:e.total,issuedAt:e.issuedAt};return m.purchases=[n,...m.purchases],{id:t}}function Da(e=14){return m.purchaseDaily.slice(-e)}function ka(e){return typeof e=="number"?m.inventoryAlerts.filter(t=>Number(t.qtyAvailable)<=e):m.inventoryAlerts}function Ia(){return tt(),m.inventorySummary}function Fa(){return m.inventorySettings}function La(e){const t=e.direction??"increase",n=t==="decrease"?-Math.abs(e.quantity):Math.abs(e.quantity),s=m.inventoryAlerts.findIndex(r=>r.productId===e.productId);if(s!==-1){const r=m.inventoryAlerts[s],o=Number(r.qtyAvailable)+n;m.inventoryAlerts[s]={...r,qtyAvailable:o,createdAt:new Date().toISOString(),expDate:e.expDate??r.expDate??null}}else t==="decrease"&&(m.inventoryAlerts=[...m.inventoryAlerts,{lotId:ne("lot-demo"),productId:e.productId,qtyAvailable:Math.max(0,e.quantity),createdAt:new Date().toISOString(),expDate:e.expDate??null}]);return tt(),{productId:e.productId,appliedQuantity:e.quantity,direction:t}}function nt(e){return k.isAxiosError(e)&&!e.response}function ps(){return{token:Lo,expiresIn:86400,refreshToken:Jn,refreshExpiresIn:2592e3,companyId:Rt,email:xt,name:"Administrador Demo",roles:[...jo],modules:[..._o]}}let Ve=null,Ke=Xe;const y=k.create({baseURL:Fo,timeout:1e4});y.interceptors.request.use(e=>{const t=e.headers??{};return Ve&&(t.Authorization=`Bearer ${Ve}`),Ke&&(t["X-Company-Id"]=Ke),e.headers=t,e});const vt="__UNASSIGNED__";function Ee(e){Object.prototype.hasOwnProperty.call(e,"token")&&(Ve=e.token??null),Object.prototype.hasOwnProperty.call(e,"companyId")&&(Ke=e.companyId??Xe),Object.prototype.hasOwnProperty.call(e,"refreshToken")&&e.refreshToken}function ja(){Ve=null,Ke=Xe}async function _a(e){try{const{data:t}=await y.post("/v1/auth/login",e);return Ee({token:t.token,companyId:t.companyId,refreshToken:t.refreshToken}),t}catch(t){if(nt(t)&&e.email===xt&&e.password===Gn){const n=ps();return console.warn("Login API unreachable. Using local development session."),Ee({token:n.token,companyId:n.companyId,refreshToken:n.refreshToken}),n}throw t}}async function Ma(e){if(!e.refreshToken)throw new Error("Refresh token is required");try{const{data:t}=await y.post("/v1/auth/refresh",null,{headers:{"X-Refresh-Token":e.refreshToken}});return Ee({token:t.token,companyId:t.companyId,refreshToken:t.refreshToken}),t}catch(t){if(nt(t)&&e.refreshToken===Jn){const n=ps();return console.warn("Refresh API unreachable. Keeping local development session active."),Ee({token:n.token,companyId:n.companyId,refreshToken:n.refreshToken}),n}throw t}}async function qa(e){const t={rut:e.rut,fullName:e.fullName,address:e.address,email:e.email,companyName:e.companyName,password:e.password,confirmPassword:e.confirmPassword,captcha:e.captcha},{data:n}=await y.post("/v1/requests",t);return n}function Li(e){return w("fetchCompany",async()=>{const{data:t}=await y.get(`/v1/companies/${e}`);return t},()=>zo(e))}function ji(e,t){return w("updateCompany",async()=>{const{data:n}=await y.put(`/v1/companies/${e}`,t);return n},()=>Vo(e,t))}function _i(){return w("listCompaniesWithDetails",async()=>{const{data:e}=await y.get("/v1/companies");return e},()=>[])}function Mi(e){return w("createCompanyWithDetails",async()=>{const{data:t}=await y.post("/v1/companies",e);return t},()=>({id:`company-${Date.now()}`,...e,parentLocations:e.parentLocations?.map((t,n)=>({id:`loc-${n}`,...t}))||[]}))}function qi(e,t){return w("updateCompanyWithDetails",async()=>{const{data:n}=await y.put(`/v1/companies/${e}`,t);return n},()=>({id:e,...t,parentLocations:t.parentLocations?.map((n,s)=>({id:`loc-${s}`,...n}))||[]}))}function Ui(e){return et("deleteCompanyWithDetails",async()=>{await y.delete(`/v1/companies/${e}`)},()=>Promise.resolve())}function Bi(){return w("listUserAccounts",async()=>{const{data:e}=await y.get("/v1/users");return e},()=>Ho())}function $i(e){return w("createUserAccount",async()=>{const{data:t}=await y.post("/v1/users",e);return t},()=>Qo(e))}function zi(e,t){return w("updateUserAccount",async()=>{const{data:n}=await y.put(`/v1/users/${e}`,t);return n},()=>Wo(e,t))}function Vi(e,t){return et("updateUserPassword",async()=>{await y.post(`/v1/users/${e}/password`,t)},()=>Go(e,t))}function Ki(e){return w("listProducts",async()=>{const{data:t}=await y.get("/v1/products",{params:e});return t},()=>Jo(e))}function Hi(e){return w("lookupProduct",async()=>{try{const{data:t}=await y.get("/v1/products/lookup",{params:{q:e.query,type:e.type}});return t??null}catch(t){if(k.isAxiosError(t)&&t.response?.status===404)return null;throw t}},()=>Yo(e.query,e.type))}function Qi(e){const t=cs(e);return w("createProduct",async()=>{const n=us(t,e.imageFile??null),{data:s}=await y.post("/v1/products",n,{headers:{"Content-Type":"multipart/form-data"}});return s},()=>Xo(t))}function Wi(e,t){const n=cs(t);return w("updateProduct",async()=>{const s=us(n,t.imageFile??null),{data:r}=await y.put(`/v1/products/${e}`,s,{headers:{"Content-Type":"multipart/form-data"}});return r},()=>Zo(e,n))}function Gi(e){return w("fetchProductStock",async()=>{const{data:t}=await y.get(`/v1/products/${e}/stock`);return t},()=>ea(e))}function Ji(){return w("listLowStockProducts",async()=>{const{data:e}=await y.get("/v1/products/low-stock");return e},()=>[])}function Yi(e){return w("listInventoryMovements",async()=>{const{data:t}=await y.get("/v1/inventory/movements",{params:e||{}});return t},()=>({content:[],totalElements:0,totalPages:0,size:20,number:0}))}async function Xi(e,t){await y.post(`/v1/inventory/lots/${e}/transfer`,t)}function Zi(e,t){return w("listSuppliers",async()=>{const n={};e&&(n.query=e),t!==void 0&&(n.active=t);const{data:s}=await y.get("/v1/suppliers",{params:Object.keys(n).length>0?n:void 0});return s},()=>sa())}function ec(e){return w("createSupplier",async()=>{const{data:t}=await y.post("/v1/suppliers",e);return t},()=>ra(e))}function tc(e,t){return w("updateSupplier",async()=>{const{data:n}=await y.put(`/v1/suppliers/${e}`,t);return n},()=>oa(e,t))}function nc(e){return et("deleteSupplier",()=>y.delete(`/v1/suppliers/${e}`),()=>aa(e))}function sc(e){return w("listSupplierContacts",async()=>{const{data:t}=await y.get(`/v1/suppliers/${e}/contacts`);return t},()=>[])}function rc(e,t){return w("createSupplierContact",async()=>{const{data:n}=await y.post(`/v1/suppliers/${e}/contacts`,t);return n},()=>({id:crypto.randomUUID(),supplierId:e,...t}))}function oc(e,t){const n={};return y.get("/v1/suppliers/export",{params:Object.keys(n).length>0?n:void 0,responseType:"blob"}).then(s=>s.data)}async function ac(e){const t=new FormData;t.append("file",e);const{data:n}=await y.post("/v1/suppliers/import",t,{headers:{"Content-Type":"multipart/form-data"}});return n}function ic(e){return w("getSupplierMetrics",async()=>{const{data:t}=await y.get(`/v1/suppliers/${e}/metrics`);return t},()=>({totalPurchases:0,totalAmount:0,averageOrderValue:0,lastPurchaseDate:null,purchasesLastMonth:0,amountLastMonth:0,purchasesPreviousMonth:0,amountPreviousMonth:0}))}function cc(){return w("getSupplierAlerts",async()=>{const{data:e}=await y.get("/v1/suppliers/alerts");return e},()=>[])}function uc(e="volume"){return w("getSupplierRanking",async()=>{const{data:t}=await y.get("/v1/suppliers/ranking",{params:{criteria:e}});return t},()=>[])}function lc(){return w("getSupplierRiskAnalysis",async()=>{const{data:e}=await y.get("/v1/suppliers/risk-analysis");return e},()=>({categoryA:[],categoryB:[],categoryC:[],concentrationIndex:0,singleSourceProductsCount:0,totalPurchaseVolume:0}))}function dc(e,t){return w("getSupplierPriceHistory",async()=>{const{data:n}=await y.get(`/v1/suppliers/${e}/price-history`,{params:{productId:t}});return n},()=>({supplierId:e,supplierName:"Proveedor",productId:t,productName:"Producto",priceHistory:[],currentPrice:0,averagePrice:0,minPrice:0,maxPrice:0,trend:"STABLE",trendPercentage:0}))}function fc(){return w("getNegotiationOpportunities",async()=>{const{data:e}=await y.get("/v1/suppliers/negotiation-opportunities");return e},()=>[])}function pc(){return w("getSingleSourceProducts",async()=>{const{data:e}=await y.get("/v1/suppliers/single-source-products");return e},()=>[])}function hc(e){return w(`getSupplierForecast-${e}`,async()=>{const{data:t}=await y.get(`/v1/suppliers/${e}/forecast`);return t},()=>({supplierId:e,supplierName:"Proveedor",monthlyForecasts:[],averageMonthlySpend:0,projectedNextMonthSpend:0,averageMonthlyOrders:0,trend:"STABLE",recommendation:""}))}function mc(e={}){return w("listCustomers",async()=>{const t=e.page??0,n=e.size??20,s={page:t,size:n,sort:e.sort??"createdAt,desc"};e.q&&e.q.trim()&&(s.q=e.q.trim()),e.segment&&e.segment.trim()&&(s.segment=e.segment.trim());const{data:r}=await y.get("/v1/customers",{params:s}),o=r,a=o.content??o.items??[],i=o.size??n,c=typeof o.totalElements=="number"?o.totalElements:typeof o.total=="number"?o.total:a.length,u=typeof o.number=="number"?o.number:typeof o.page=="number"?o.page:t,l=typeof o.totalPages=="number"?o.totalPages:i>0?Math.ceil(c/i):0,p=typeof o.hasNext=="boolean"?o.hasNext:l>0?u+1<l:a.length===i;return{...o,content:a,size:i,totalElements:c,totalPages:l,number:u,hasNext:p}},()=>ia(e))}function yc(){return w("listCustomerSegments",async()=>{const{data:e}=await y.get("/v1/customer-segments/stats");return e},()=>da())}function gc(e){return w("createCustomer",async()=>{const{data:t}=await y.post("/v1/customers",e);return t},()=>ca(e))}function bc(e,t){return w("updateCustomer",async()=>{const{data:n}=await y.put(`/v1/customers/${e}`,t);return n},()=>ua(e,t))}function vc(e){return et("deleteCustomer",()=>y.delete(`/v1/customers/${e}`),()=>la(e))}async function wc(e){const{data:t}=await y.get(`/v1/customers/${e}/stats`);return t}async function Sc(e,t=0,n=10){const{data:s}=await y.get(`/v1/customers/${e}/sales`,{params:{page:t,size:n}});return s}function Pc(e,t){return w("listProductPrices",async()=>{const{data:n}=await y.get(`/v1/products/${e}/prices`,{params:t});return n},()=>ta(e,t))}function Ac(e,t){return w("createProductPrice",async()=>{const{data:n}=await y.post(`/v1/products/${e}/prices`,t);return n},()=>na(e,t))}function Ec(e={}){return w("listSales",async()=>{const{data:t}=await y.get("/v1/sales",{params:e});return t},()=>fa(e))}function Cc(e,t){return w("updateSale",async()=>{const{data:n}=await y.put(`/v1/sales/${e}`,t);return n},()=>ds(e,t))}function Oc(e){return w("cancelSale",async()=>{const{data:t}=await y.post(`/v1/sales/${e}/cancel`,{});return t},()=>ma(e))}function xc(e){return w("getSaleDetail",async()=>{const{data:t}=await y.get(`/v1/sales/${e}`);return t},()=>pa(e))}function Rc(e){return w("getDashboardSalesMetrics",async()=>{const{data:t}=await y.get("/v1/sales/metrics",{params:e});return t},()=>va(e))}function Tc(e){return w("getPurchaseSaleTrend",async()=>{const{data:t}=await y.get("/v1/trend",{params:e});return t},()=>wa(e))}function Nc(e="14d"){const t=e&&e.trim().length>0?e:"14d";return w("getSalesWindowMetrics",async()=>{const{data:n}=await y.get("/v1/sales/metrics",{params:{window:t}});return n},()=>Sa(t))}function Dc(e){return w("getSalesSummaryByPeriod",async()=>{const{data:t}=await y.get("/v1/sales/metrics/summary",{params:{period:e}});return t},()=>Pa(e))}function kc(e){return e?w("getFrequentProducts",async()=>{const{data:t}=await y.get(`/v1/customers/${e}/frequent-products`,{params:{limit:20}});return t},()=>Aa(e,20)):Promise.resolve([])}function Ic(e={}){const{page:t=0,size:n=10,sort:s="date,DESC"}=e;return w("listSaleDocuments",async()=>{const{data:r}=await y.get("/v1/documents",{params:{type:"SALE",page:t,size:n,sort:s}});return r},()=>Ca({page:t,size:n,sort:s}))}function Fc(e){return w("getDocumentPreview",async()=>{const t=await y.get(`/v1/documents/${e}`,{responseType:"blob"});return Zn(t,`${e}.pdf`)},()=>Oa(e))}function Ua(e,t={}){const{fallbackName:n="document.pdf",offlineId:s,version:r="OFFICIAL"}=t;return w("downloadDocument",async()=>{const o=await y.get(e,{responseType:"blob"});return Zn(o,n)},()=>{const a=Uo(e)??(s?{id:s,version:r}:null);return a?xa(a.id,a.version):Tt(n.replace(/\.pdf$/i,""),"download")})}function Lc(e,t="OFFICIAL"){const n=`/v1/billing/documents/${e}/files/${t}`,s=`${e}-${t.toLowerCase()}.pdf`;return Ua(n,{fallbackName:s,offlineId:e,version:t})}function jc(e,t){return w("listSalesDailyByDateRange",async()=>{const{data:n}=await y.get("/v1/sales/metrics/daily-range",{params:{from:e,to:t}});return n},()=>ga(e,t))}function _c(e,t){return w("getSalesKPIs",async()=>{const n={},{data:s}=await y.get("/v1/sales/kpis",{params:n});return s},()=>({totalRevenue:0,totalCost:0,grossProfit:0,profitMargin:0,totalOrders:0,averageTicket:0,salesGrowth:0,uniqueCustomers:0,customerRetentionRate:0,topProductName:"N/A",topProductRevenue:0,topCustomerName:"N/A",topCustomerRevenue:0,conversionRate:0,periodStart:"",periodEnd:""}))}function Mc(e,t){return w("getSalesABCAnalysis",async()=>{const n={},{data:s}=await y.get("/v1/sales/abc-analysis",{params:n});return s},()=>[])}function qc(e,t,n){return w("getSalesProductForecast",async()=>{const s={},{data:r}=await y.get("/v1/sales/forecast",{params:s});return r},()=>[])}function Uc(e){return w("createSale",async()=>{const{data:t}=await y.post("/v1/sales",e);return t},()=>ha(e))}async function Bc(e={}){return(await y.get("/v1/sales/export",{params:e,responseType:"blob"})).data}function $c(e={}){return w("listPurchases",async()=>{const{data:t}=await y.get("/v1/purchases",{params:e});return t},()=>Ra(e))}function zc(e,t){return w("updatePurchase",async()=>{const{data:n}=await y.put(`/v1/purchases/${e}`,t);return n},()=>fs(e,t))}function Vc(e){return w("cancelPurchase",async()=>{const{data:t}=await y.post(`/v1/purchases/${e}/cancel`,{});return t},()=>Ta(e))}function Kc(e){return w("getPurchaseDetail",async()=>{const{data:t}=await y.get(`/v1/purchases/${e}/detail`);return t},()=>({id:e,issuedAt:new Date().toISOString(),docType:"Factura",paymentTermDays:30,status:"received",items:[],net:0,vat:0,total:0}))}function Hc(e,t){return w("getPurchaseKPIs",async()=>{const{data:n}=await y.get("/v1/purchases/kpis",{params:{from:e,to:t}});return n},()=>({totalSpent:0,totalQuantity:0,totalOrders:0,averageOrderValue:0,purchaseGrowth:0,uniqueSuppliers:0,supplierConcentration:0,topSupplierName:"N/A",topSupplierSpent:0,topCategoryName:"N/A",topCategorySpent:0,onTimeDeliveryRate:0,costPerUnit:0,pendingOrders:0,periodStart:"",periodEnd:""}))}function Qc(e,t){return w("getPurchaseABCAnalysis",async()=>{const{data:n}=await y.get("/v1/purchases/abc-analysis",{params:{from:e,to:t}});return n},()=>[])}function Wc(e,t,n){return w("getPurchaseSupplierForecast",async()=>{const{data:s}=await y.get("/v1/purchases/forecast",{params:{from:e,to:t,horizonDays:n}});return s},()=>[])}function Gc(e=14){return w("listPurchaseDaily",async()=>{const{data:t}=await y.get("/v1/purchases/metrics/daily",{params:{days:e}});return t},()=>Da(e))}function Jc(e,t){return w("createPurchase",async()=>{if(t){const n=new FormData;n.append("data",new Blob([JSON.stringify(e)],{type:"application/json"})),n.append("file",t);const{data:s}=await y.post("/v1/purchases",n,{headers:{"Content-Type":"multipart/form-data"}});return s}else{const{data:n}=await y.post("/v1/purchases",e);return n}},()=>Na(e))}async function Yc(e={}){return(await y.get("/v1/purchases/export",{params:e,responseType:"blob"})).data}async function Xc(e){const t=new FormData;t.append("file",e);const{data:n}=await y.post("/v1/purchases/import",t,{headers:{"Content-Type":"multipart/form-data"}});return n}async function Zc(e){return w("listLocations",async()=>{const{data:t}=await y.get("/api/v1/inventory/locations",{params:e});return t},()=>[])}async function eu(e){return w("listServices",async()=>{const{data:t}=await y.get("/api/v1/services",{params:e});return t},()=>[])}async function tu(e){return w("createService",async()=>{const{data:t}=await y.post("/api/v1/services",e);return t},()=>({id:crypto.randomUUID(),companyId:Rt,code:e.code,name:e.name,description:e.description??null,category:e.category??null,unitPrice:e.unitPrice,status:e.status??"ACTIVE",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}))}async function nu(e,t){return w("updateService",async()=>{const{data:n}=await y.put(`/api/v1/services/${e}`,t);return n},()=>({id:e,companyId:Rt,code:t.code,name:t.name,description:t.description??null,category:t.category??null,unitPrice:t.unitPrice,status:t.status??"ACTIVE",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}))}async function su(e){return w("deleteService",async()=>{await y.delete(`/api/v1/services/${e}`)},()=>{})}function ru(e){return w("listInventoryAlerts",async()=>{const t=typeof e=="number"?{threshold:e}:{},{data:n}=await y.get("/v1/inventory/alerts",{params:t});return n},()=>ka(e))}function ou(){return w("getInventorySummary",async()=>{const{data:e}=await y.get("/v1/inventory/summary");return e},()=>Ia())}function au(){return w("getInventorySettings",async()=>{const{data:e}=await y.get("/v1/inventory/settings");return e},()=>Fa())}function iu(){return w("getInventoryKPIs",async()=>{const{data:e}=await y.get("/v1/inventory/kpis");return e},()=>({stockCoverageDays:null,turnoverRatio:0,deadStockValue:0,deadStockCount:0,averageLeadTimeDays:0,totalInventoryValue:0,activeProducts:0,criticalStockProducts:0,daysInventoryOnHand:null,overstockValue:0,overstockCount:0}))}function cu(){return w("getStockMovementStats",async()=>{const{data:e}=await y.get("/v1/inventory/movement-stats");return e},()=>({totalInflows:0,totalOutflows:0,inflowTransactions:0,outflowTransactions:0,topInflowProducts:[],topOutflowProducts:[],categoryVelocities:[]}))}function uu(e){return w("getABCAnalysis",async()=>{const t={},{data:n}=await y.get("/v1/inventory/abc-analysis",{params:t});return n},()=>[])}function lu(e,t){return w("getForecastAnalysis",async()=>{const n={},{data:s}=await y.get("/v1/inventory/forecast",{params:n});return s},()=>[])}function du(e){return w("createInventoryAdjustment",async()=>{const{data:t}=await y.post("/v1/inventory/adjustments",e);return t},()=>La(e))}async function fu(){const{data:e}=await y.get("/v1/finances/summary");return e}async function pu(e){const{data:t}=await y.get("/v1/finances/receivables",{params:e});return t}async function hu(e){const{data:t}=await y.get("/v1/finances/payables",{params:e});return t}async function mu(e=30){const{data:t}=await y.get("/v1/finances/cashflow",{params:{days:e}});return t}const wt="pymes.auth.session",hs=S.createContext(void 0);function Ba(){try{const e=localStorage.getItem(wt);if(!e)return null;const t=JSON.parse(e),n={...t,modules:Array.isArray(t.modules)?t.modules:[]};if(!n?.token||!n?.expiresAt||!n?.refreshToken||!n?.refreshExpiresAt)return null;const s=Date.now();return n.expiresAt<=s||n.refreshExpiresAt<=s?null:n}catch{return null}}function ln(e){if(!e){localStorage.removeItem(wt);return}localStorage.setItem(wt,JSON.stringify(e))}function $a({children:e}){const[t,n]=S.useState(()=>Ba());S.useEffect(()=>{t?(Ee({token:t.token,companyId:t.companyId,refreshToken:t.refreshToken}),ln(t)):(ja(),ln(null))},[t]);const s=S.useCallback(async i=>{const c=await _a(i),u=Date.now(),l={...c,modules:Array.isArray(c.modules)?c.modules:[],expiresAt:u+c.expiresIn*1e3,refreshExpiresAt:u+c.refreshExpiresIn*1e3};n(l)},[]),r=S.useCallback(()=>{n(null)},[]),o=S.useCallback(async()=>{if(!t)return;const i={refreshToken:t.refreshToken},c=await Ma(i),u=Date.now(),l={...c,modules:Array.isArray(c.modules)?c.modules:[],expiresAt:u+c.expiresIn*1e3,refreshExpiresAt:u+c.refreshExpiresIn*1e3};n(l)},[t]);S.useEffect(()=>{if(!t)return;const i=Date.now();if(t.refreshExpiresAt<=i){n(null);return}const c=Math.max(t.expiresAt-i-6e4,5e3),u=window.setTimeout(()=>{o().catch(()=>n(null))},c);return()=>window.clearTimeout(u)},[t,o]);const a=S.useMemo(()=>({session:t,isAuthenticated:!!t,login:s,logout:r}),[t,s,r]);return f.jsx(hs.Provider,{value:a,children:e})}function Dt(){const e=S.useContext(hs);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}const Pe="/assets/logo-BW3rfr0A.png",St=[{to:"/app",label:"Panel",icon:"DB",module:"dashboard"},{to:"/app/sales",label:"Ventas",icon:"VE",module:"sales"},{to:"/app/purchases",label:"Compras",icon:"CO",module:"purchases"},{to:"/app/inventory",label:"Inventario",icon:"IN",module:"inventory"},{to:"/app/customers",label:"Clientes",icon:"CL",module:"customers"},{to:"/app/suppliers",label:"Proveedores",icon:"PR",module:"suppliers"},{to:"/app/finances",label:"Finanzas",icon:"FI",module:"finances"},{to:"/app/reports",label:"Reportes",icon:"RP",module:"reports"},{to:"/app/settings",label:"Configuracion",icon:"CF",module:"settings"}];function za(){const{session:e,logout:t}=Dt(),[n,s]=S.useState(!1),r=pn(),o=S.useMemo(()=>r.pathname.length>1&&r.pathname.endsWith("/")?r.pathname.replace(/\/+$/,""):r.pathname,[r.pathname]),a=S.useMemo(()=>{const c=new Set(e?.modules??[]);return c.add("dashboard"),c},[e?.modules]),i=S.useMemo(()=>!a||a.size===0?St:St.filter(c=>a.has(c.module)),[a]);return f.jsxs("div",{className:"layout",children:[f.jsxs("aside",{className:`sidebar ${n?"open":""}`,children:[f.jsxs("div",{className:"sidebar-header",children:[f.jsx("img",{src:Pe,alt:"Logo empresa",className:"brand-logo brand-logo--sidebar"}),f.jsx("button",{className:"icon-btn mobile-only",onClick:()=>s(!1),"aria-label":"Cerrar menu",children:"Close"})]}),f.jsx("nav",{children:i.map(c=>{const u=c.to==="/app",l=o===c.to||!u&&o.startsWith(c.to);return f.jsxs(vs,{to:c.to,className:`nav-item ${l?"active":""}`,onClick:()=>s(!1),end:u,children:[f.jsx("span",{className:"nav-icon","aria-hidden":!0,children:c.icon}),f.jsx("span",{children:c.label})]},c.to)})})]}),f.jsxs("div",{className:"content",children:[f.jsxs("header",{className:"topbar",children:[f.jsxs("div",{className:"topbar-left",children:[f.jsx("button",{className:"icon-btn desktop-hidden",onClick:()=>s(!0),"aria-label":"Abrir menu",children:"Menu"}),f.jsxs("div",{className:"topbar-brand",children:[f.jsx("img",{src:Pe,alt:"Logo empresa",className:"brand-logo brand-logo--topbar"}),f.jsx("p",{className:"muted small",children:"Control integral de operaciones y finanzas"})]})]}),f.jsxs("div",{className:"topbar-right",children:[f.jsx("span",{className:"muted small hide-mobile",children:e?.email}),f.jsx("button",{className:"btn ghost",onClick:t,children:"Salir"})]})]}),f.jsx("main",{className:"page",children:f.jsx(hn,{})})]})]})}function Va(e){const t=e.replace(/\./g,"").replace(/-/g,"").trim().toUpperCase();if(t.length<=1)return t;const n=t.slice(0,-1),s=t.slice(-1);return`${n}-${s}`}function Ka(e){if(!e)return!1;const t=e.replace(/\./g,"").replace(/-/g,"").trim().toUpperCase();if(!/^\d{7,8}[0-9K]$/.test(t))return!1;const n=t.slice(0,-1),s=t.slice(-1);return Ha(n)===s}function Ha(e){let t=0,n=2;for(let r=e.length-1;r>=0;r-=1)t+=parseInt(e[r],10)*n,n=n===7?2:n+1;const s=11-t%11;return s===11?"0":s===10?"K":String(s)}const dn="Muchas gracias! Te contactaremos lo antes posible. PYMERP.cl",le="true".toLowerCase()!=="false",ct={rut:"",fullName:"",address:"",email:"",companyName:"",password:"",confirmPassword:""};function de(){const e=Math.floor(Math.random()*7)+3,t=Math.floor(Math.random()*6)+2;return{a:e,b:t}}function Qa({children:e,forceLoginOnMount:t=!1,onLoginClose:n}){const{login:s,isAuthenticated:r}=Dt(),o=mn(),[a,i]=S.useState(!0),[c,u]=S.useState("none"),[l,p]=S.useState({email:"",password:""}),[v,A]=S.useState(null),[h,b]=S.useState(0),[g,x]=S.useState(0),[C,R]=S.useState(ct),[I,D]=S.useState(null),[z,M]=S.useState(dn),[_,Q]=S.useState(()=>de()),[ye,W]=S.useState(""),se=S.useRef(null),X=S.useRef(null),G=S.useRef(null),ge=S.useRef("none"),B=S.useRef(!1),re=Bt({mutationFn:P=>s(P),onSuccess:()=>{A(null),b(0),x(0),u("none"),o("/app")},onError:P=>{if(k.isAxiosError(P))if(!P.response)A("No se pudo conectar con el servidor. Intenta nuevamente.");else{const T=P.response.data?.detail??P.response.data?.message??"Credenciales invlidas";A(T)}else A(P.message);b(T=>{const ee=T+1;if(ee>=3){const ve=Math.min(30,(ee-2)*5);x(Ie=>Math.max(Ie,ve))}return ee})}}),V=Bt({mutationFn:qa,onSuccess:P=>{D(null),M(P?.message??dn),u("success"),R(ct),Q(de()),W("")},onError:P=>{if(Q(de()),W(""),k.isAxiosError(P)){const T=P.response?.data,ee=T?.detail??T?.message??T?.error;D(ee??"No se pudo enviar la solicitud. Intenta nuevamente ms tarde.")}else D(P.message)}});S.useEffect(()=>{r?(p({email:"",password:""}),A(null)):(i(!0),u("none"))},[r]),S.useEffect(()=>{if(!t){B.current=!1;return}i(!0),u("login"),B.current=!0},[t]),S.useEffect(()=>{c==="login"&&(se.current??X.current)?.focus(),c==="request"&&G.current?.focus()},[c]),S.useEffect(()=>{if(c==="none")return;const P=T=>{T.key==="Escape"&&(T.preventDefault(),c==="request"?u("login"):c==="login"?u("none"):c==="success"&&(u(r?"none":"login"),r&&i(!1)))};return window.addEventListener("keydown",P),()=>window.removeEventListener("keydown",P)},[c,r]),S.useEffect(()=>{le||W(String(_.a+_.b))},[_]),S.useEffect(()=>{if(g<=0)return;const P=window.setInterval(()=>{x(T=>T<=1?0:T-1)},1e3);return()=>window.clearInterval(P)},[g]);const Ne=S.useMemo(()=>r?"Haz clic aqu para acceder y entrar.":"Haz clic para iniciar sesin",[r]),De=()=>{c==="none"&&(r?(i(!1),o("/app")):o("/login"))},J=P=>{c==="none"?(P.preventDefault(),De()):P.stopPropagation()},Z=async P=>{P.preventDefault(),!(re.isPending||g>0)&&(A(null),await re.mutateAsync({email:l.email.trim(),password:l.password}))},be=P=>{P.preventDefault(),D(null);const T=Va(C.rut);if(!Ka(T)){D("El RUT ingresado no es vlido"),Q(de()),W("");return}if(C.password!==C.confirmPassword){D("Las contraseas no coinciden");return}const ee=_.a+_.b,ve=ye.trim();if(le){const Ie=Number.parseInt(ve,10);if(!ve||Number.isNaN(Ie)||Ie!==ee){D("Debes resolver el captcha correctamente"),Q(de()),W("");return}}V.mutate({rut:T,fullName:C.fullName.trim(),address:C.address.trim(),email:C.email.trim().toLowerCase(),companyName:C.companyName.trim(),password:C.password,confirmPassword:C.confirmPassword,captcha:{a:_.a,b:_.b,answer:le?ve:String(ee)}})},ue=()=>{D(null),R(ct),Q(de()),W(""),u("request")},ke=()=>{u("login")},ms=()=>{u(r?"none":"login"),r&&i(!1)};return S.useEffect(()=>{!r&&ge.current==="login"&&c==="none"&&n?.(),ge.current=c},[c,n,r]),f.jsxs(f.Fragment,{children:[e,a&&f.jsxs("div",{className:"landing-overlay",onClick:De,role:"presentation",children:[f.jsx("div",{className:"landing-overlay__gradient"}),f.jsxs("div",{className:`landing-overlay__panel ${c==="none"?"landing-overlay__panel--compact":""}`,onClick:J,children:[c==="none"&&f.jsxs("div",{className:"landing-welcome","aria-live":"polite",children:[f.jsx("img",{src:Pe,alt:"PYMERP",className:"landing-logo"}),f.jsx("p",{className:"landing-hint",children:Ne})]}),c==="login"&&f.jsxs("div",{className:"landing-card",role:"dialog","aria-modal":"true","aria-labelledby":"landing-login-title",children:[f.jsx("img",{src:Pe,alt:"PYMERP",className:"landing-logo landing-logo--small"}),f.jsx("h1",{id:"landing-login-title",children:"Iniciar sesin"}),f.jsx("p",{className:"landing-subtitle",children:"Bienvenid@! Ingresa tus credenciales para acceder."}),f.jsxs("form",{className:"landing-form",onSubmit:Z,children:[f.jsxs("label",{className:"landing-label",children:[f.jsx("span",{children:"Email"}),f.jsx("input",{ref:se,type:"email",autoComplete:"email",required:!0,value:l.email,onChange:P=>p(T=>({...T,email:P.target.value}))})]}),f.jsxs("label",{className:"landing-label",children:[f.jsx("span",{children:"Contrasea"}),f.jsx("input",{ref:X,type:"password",autoComplete:"current-password",required:!0,value:l.password,onChange:P=>p(T=>({...T,password:P.target.value}))})]}),v&&f.jsx("p",{className:"landing-error",role:"alert","aria-live":"assertive",children:v}),f.jsx("button",{className:"landing-button",type:"submit",disabled:re.isPending||g>0,children:re.isPending?"Ingresando...":g>0?`Reintentar en ${g}s`:"Entrar"}),g>0&&f.jsxs("p",{className:"landing-hint",role:"status","aria-live":"polite",children:["Demasiados intentos fallidos. Espera ",g,"s antes de reintentar."]})]}),f.jsx("button",{type:"button",className:"landing-link",onClick:ue,children:"No tienes cuenta o tienes problemas para acceder? Haz clic aqu"})]}),c==="request"&&f.jsxs("div",{className:"landing-card",role:"dialog","aria-modal":"true","aria-labelledby":"landing-request-title",children:[f.jsxs("div",{className:"landing-card__header",children:[f.jsx("h1",{id:"landing-request-title",children:"Solicitud de registro o recuperacin de cuenta"}),f.jsx("button",{type:"button",className:"landing-close","aria-label":"Cerrar",onClick:ke,children:""})]}),f.jsx("p",{className:"landing-subtitle",children:"Completa los datos para registro/recuperacin."}),f.jsxs("form",{className:"landing-form",onSubmit:be,children:[f.jsxs("label",{className:"landing-label",children:[f.jsx("span",{children:"RUT"}),f.jsx("input",{ref:G,value:C.rut,onChange:P=>R(T=>({...T,rut:P.target.value})),required:!0})]}),f.jsxs("label",{className:"landing-label",children:[f.jsx("span",{children:"Nombre completo"}),f.jsx("input",{value:C.fullName,onChange:P=>R(T=>({...T,fullName:P.target.value})),required:!0})]}),f.jsxs("label",{className:"landing-label",children:[f.jsx("span",{children:"Direccin"}),f.jsx("input",{value:C.address,onChange:P=>R(T=>({...T,address:P.target.value})),required:!0})]}),f.jsxs("label",{className:"landing-label",children:[f.jsx("span",{children:"Email"}),f.jsx("input",{type:"email",value:C.email,onChange:P=>R(T=>({...T,email:P.target.value})),required:!0})]}),f.jsxs("label",{className:"landing-label",children:[f.jsx("span",{children:"Nombre de la empresa"}),f.jsx("input",{value:C.companyName,onChange:P=>R(T=>({...T,companyName:P.target.value})),required:!0})]}),f.jsxs("label",{className:"landing-label",children:[f.jsx("span",{children:"Contrasea"}),f.jsx("input",{type:"password",value:C.password,onChange:P=>R(T=>({...T,password:P.target.value})),required:!0,minLength:8})]}),f.jsxs("label",{className:"landing-label",children:[f.jsx("span",{children:"Repetir contrasea"}),f.jsx("input",{type:"password",value:C.confirmPassword,onChange:P=>R(T=>({...T,confirmPassword:P.target.value})),required:!0,minLength:8})]}),f.jsxs("label",{className:"landing-label landing-captcha",children:[f.jsxs("span",{className:"landing-captcha__label",children:["Captcha: Cunto es ",_.a," + ",_.b,"?"]}),f.jsx("input",{inputMode:"numeric",pattern:"\\\\d*",value:ye,onChange:P=>W(P.target.value.replace(/[^0-9]/g,"")),required:le,"aria-required":le,"aria-label":`Captcha: Cunto es ${_.a} + ${_.b}?`})]}),!le&&f.jsx("p",{className:"landing-captcha__label",role:"status",children:"Captcha deshabilitado en este entorno (respuesta enviada automticamente)."}),I&&f.jsx("p",{className:"landing-error",role:"alert","aria-live":"assertive",children:I}),f.jsx("button",{className:"landing-button",type:"submit",disabled:V.isPending,children:V.isPending?"Enviando...":"Enviar solicitud"})]})]}),c==="success"&&f.jsxs("div",{className:"landing-card",role:"dialog","aria-modal":"true","aria-labelledby":"landing-success-title",children:[f.jsx("img",{src:Pe,alt:"PYMERP",className:"landing-logo landing-logo--small"}),f.jsx("h1",{id:"landing-success-title",children:"Solicitud enviada"}),f.jsx("p",{className:"landing-subtitle",children:z}),f.jsx("button",{className:"landing-button",type:"button",onClick:ms,children:r?"Ir al panel":"Volver al inicio de sesin"})]})]})]})]})}function fn(){return f.jsx("div",{className:"landing-placeholder","aria-hidden":!0})}const Wa=S.lazy(()=>$(()=>import("./DashboardPage-hbZ5LIg4.js"),__vite__mapDeps([0,1,2,3,4]))),Ga=S.lazy(()=>$(()=>import("./SalesPage-CNdJaLdM.js"),__vite__mapDeps([5,1,2,3,6,7,8,9,10,11,4]))),Ja=S.lazy(()=>$(()=>import("./PurchaseCreatePage-DR2OydzT.js"),__vite__mapDeps([12,1,3,13,2]))),Ya=S.lazy(()=>$(()=>import("./PurchasesPage-TUG7ONJe.js"),__vite__mapDeps([14,1,2,3,6,13,4,11,10,8]))),Xa=S.lazy(()=>$(()=>import("./InventoryPage-C-LquPA8.js"),__vite__mapDeps([15,1,2,3,16,6,17,18,11,4]))),Za=S.lazy(()=>$(()=>import("./LotsListPage-DjIxIjd3.js"),__vite__mapDeps([18,1,2,6,17]))),ei=S.lazy(()=>$(()=>import("./LocationsPage-Bif2xA1M.js"),__vite__mapDeps([16,1,2,6,17]))),ti=S.lazy(()=>$(()=>import("./InventoryMovementsPage-BWml6kIw.js"),__vite__mapDeps([19,1,2,3]))),ni=S.lazy(()=>$(()=>import("./CustomersPage-5bU3sUOd.js"),__vite__mapDeps([20,1,2,3,7,10,6,11,4]))),si=S.lazy(()=>$(()=>import("./SuppliersPage-z47H6rMj.js"),__vite__mapDeps([21,1,3,2,9,6]))),ri=S.lazy(()=>$(()=>import("./FinancesPage-CeTjAa0q.js"),__vite__mapDeps([22,3,1,4]))),oi=S.lazy(()=>$(()=>import("./ReportsPage-BV6yLZH6.js"),__vite__mapDeps([23,3,1]))),ai=S.lazy(()=>$(()=>import("./SettingsPage-DWxfaxF0.js"),__vite__mapDeps([24,3,1,2,9,6]))),ii=[{index:!0,module:"dashboard",element:f.jsx(Wa,{})},{path:"sales",module:"sales",element:f.jsx(Ga,{})},{path:"purchases/new",module:"purchases",element:f.jsx(Ja,{})},{path:"purchases",module:"purchases",element:f.jsx(Ya,{})},{path:"inventory",module:"inventory",element:f.jsx(Xa,{})},{path:"inventory/lots",module:"inventory",element:f.jsx(Za,{})},{path:"inventory/locations",module:"inventory",element:f.jsx(ei,{})},{path:"inventory/movements",module:"inventory",element:f.jsx(ti,{})},{path:"customers",module:"customers",element:f.jsx(ni,{})},{path:"suppliers",module:"suppliers",element:f.jsx(si,{})},{path:"finances",module:"finances",element:f.jsx(ri,{})},{path:"reports",module:"reports",element:f.jsx(oi,{})},{path:"settings",module:"settings",element:f.jsx(ai,{})}];function ci(){const{isAuthenticated:e,session:t}=Dt(),n=t?.modules??[],s=S.useMemo(()=>{const o=new Set(n);return o.add("dashboard"),o},[n]),r=S.useMemo(()=>{const o=St.find(a=>s.has(a.module));return o?o.to:"/app"},[s]);return f.jsx(S.Suspense,{fallback:f.jsx("div",{className:"page",children:f.jsx("p",{children:"Cargando..."})}),children:f.jsxs(ws,{children:[f.jsxs(te,{element:f.jsx(li,{}),children:[f.jsx(te,{index:!0,element:f.jsx(fn,{})}),f.jsx(te,{path:"login",element:f.jsx(fn,{})}),f.jsxs(te,{path:"app",element:e?f.jsx(za,{}):f.jsx(Fe,{to:"/",replace:!0}),children:[ii.map(o=>{const a=s.has(o.module)?o.element:f.jsx(Fe,{to:r,replace:!0});return o.index?f.jsx(te,{index:!0,element:a},"index"):f.jsx(te,{path:o.path,element:a},o.path)}),f.jsx(te,{path:"*",element:f.jsx(Fe,{to:r,replace:!0})})]})]}),f.jsx(te,{path:"*",element:f.jsx(Fe,{to:e?r:"/",replace:!0})})]})})}function ui(){return f.jsx(ci,{})}function li(){const e=pn(),t=mn(),n=e.pathname==="/login",s=()=>t("/",{replace:!0});return f.jsx(Qa,{forceLoginOnMount:n,onLoginClose:n?s:void 0,children:f.jsx(hn,{})})}const di=new er;xs.createRoot(document.getElementById("root")).render(f.jsx(Ss.StrictMode,{children:f.jsx(nr,{client:di,children:f.jsx(Ps,{children:f.jsx($a,{children:f.jsx(ui,{})})})})}));export{Wi as $,Cc as A,Ec as B,Dc as C,xc as D,Xc as E,Hc as F,Qc as G,Wc as H,$c as I,Gc as J,Zi as K,nu as L,tu as M,su as N,eu as O,Vc as P,zc as Q,Yc as R,Kc as S,ec as T,Jc as U,du as V,Xi as W,k as X,Ac as Y,Pc as Z,Gi as _,Tc as a,Qi as a0,ou as a1,iu as a2,cu as a3,uu as a4,lu as a5,au as a6,ru as a7,y as a8,Yi as a9,mu as aA,ji as aB,Li as aC,Dt as aD,$i as aE,zi as aF,Vi as aG,Bi as aH,Mi as aI,qi as aJ,Ui as aK,_i as aL,Ce as aM,zs as aN,Fs as aO,js as aP,lt as aQ,K as aR,He as aS,ks as aT,Is as aU,ut as aV,bn as aW,Gs as aX,Ms as aY,L as aZ,Bs as a_,vc as aa,wc as ab,Sc as ac,bc as ad,vt as ae,yc as af,Ut as ag,mi as ah,hi as ai,rc as aj,sc as ak,nc as al,tc as am,cc as an,ic as ao,uc as ap,lc as aq,dc as ar,fc as as,pc as at,hc as au,oc as av,ac as aw,fu as ax,pu as ay,hu as az,kc as b,Bt as c,gc as d,mc as e,Hi as f,Rc as g,Uc as h,Ka as i,f as j,Ki as k,Ji as l,Zc as m,Va as n,Nc as o,jc as p,pi as q,Ic as r,Bc as s,_c as t,tr as u,Mc as v,qc as w,Lc as x,Oc as y,Fc as z};
