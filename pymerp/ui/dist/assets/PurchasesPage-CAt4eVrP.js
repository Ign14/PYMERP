import{c as $,j as e,z as je,A as ye,h as ve,B as be,C as Ne,k as fe,p as ce,D as Ce,u as Se,E as Ie,F as De,G as Fe,H as Te}from"./index-OfXnknKF.js";import{r as a,L as we}from"./react-DFcFNn96.js";import{u as b}from"./useQuery-7A7SEbdC.js";import{P as Pe}from"./PageHeader-DR0dkBli.js";import{M as Ae}from"./Modal-BCEKQ7aJ.js";import{u as ke,f as oe,g as Le}from"./table-BQREnrjO.js";import{u as Ee}from"./useDebouncedValue-DwVyRO6o.js";import{R as qe,B as Re,C as $e,X as _e,Y as ze,T as Ve,e as Ke}from"./charts-BeDQCoM6.js";const Oe=["Factura","Boleta","Cotización","Orden de Compra","Guía de Despacho"];function Me({open:n,onClose:o,onCreated:u}){const[x,g]=a.useState(""),[m,v]=a.useState(!1),[l,p]=a.useState(""),[j,d]=a.useState(""),[i,w]=a.useState("Factura"),[P,A]=a.useState(""),[k,L]=a.useState(()=>new Date().toISOString().slice(0,16)),[N,f]=a.useState(()=>new Date().toISOString().slice(0,16)),[s,r]=a.useState([]),[h,D]=a.useState("product"),[_,z]=a.useState(""),[V,K]=a.useState(""),[O,M]=a.useState(1),[B,Q]=a.useState(0),[de,Xe]=a.useState(19),[Z,W]=a.useState(""),[J,U]=a.useState(""),[E,ee]=a.useState(!0),[C,te]=a.useState("amount"),[q,se]=a.useState(0),ue=b({queryKey:["products",{dialog:"purchases"}],queryFn:()=>ve({size:200}),enabled:n}),ae=b({queryKey:["services",{dialog:"purchases"}],queryFn:()=>be(!0),enabled:n}),ne=b({queryKey:["suppliers",{dialog:"purchases"}],queryFn:()=>Ne(),enabled:n}),re=b({queryKey:["locations",{dialog:"purchases"}],queryFn:()=>fe(),enabled:n}),G=$({mutationFn:t=>je(t),onSuccess:t=>{g(t.id),v(!1),p(""),d(""),ne.refetch()}});a.useEffect(()=>{if(n){const t=new Date().toISOString().slice(0,16);L(t),f(t)}},[n]);const F=$({mutationFn:t=>ye(t),onSuccess:()=>{u(),ie(),o()}}),le=ue.data?.content??[],me=ne.data??[],y=a.useMemo(()=>{const t=s.reduce((Y,R)=>Y+R.qty*R.unitCost,0);let c=0;C==="percentage"?c=t*(q/100):c=q;const S=t-c,I=E?S*.19:0,H=S+I;return{subtotal:t,discountAmount:c,net:S,vat:I,total:H}},[s,E,C,q]),pe=()=>{if(h==="product"&&!_||h==="service"&&!V||O<=0||B<=0)return;const t={qty:O,unitCost:B,vatRate:de};h==="product"?(t.productId=_,t.expDate=Z||void 0,t.locationId=J||void 0):t.serviceId=V,r(c=>[...c,t]),z(""),K(""),M(1),Q(0),W(""),U("")},he=t=>{r(c=>c.filter((S,I)=>I!==t))},ie=()=>{g(""),v(!1),p(""),d(""),w("Factura"),A(""),r([]),D("product"),z(""),K(""),M(1),Q(0),W(""),U(""),ee(!0),te("amount"),se(0)},xe=()=>{!l.trim()||!j.trim()||G.mutate({name:l,rut:j})},ge=t=>{if(t.preventDefault(),!x||s.length===0)return;const c={supplierId:x,docType:i,docNumber:P,issuedAt:new Date(k).toISOString(),receivedAt:N?new Date(N).toISOString():void 0,net:Number(y.net.toFixed(2)),vat:Number(y.vat.toFixed(2)),total:Number(y.total.toFixed(2)),items:s};F.mutate(c)};return e.jsx(Ae,{open:n,onClose:o,title:"Registrar Compra",children:e.jsxs("form",{className:"form-grid",onSubmit:ge,children:[e.jsx("div",{style:{gridColumn:"1 / -1"},children:e.jsx("h3",{style:{marginBottom:"0.5rem",fontSize:"0.9rem",fontWeight:"600"},children:"Información del Proveedor"})}),m?e.jsxs(e.Fragment,{children:[e.jsxs("label",{style:{gridColumn:"1 / -1"},children:[e.jsx("span",{children:"Nombre Proveedor *"}),e.jsx("input",{className:"input",value:l,onChange:t=>p(t.target.value),placeholder:"Nombre del proveedor"})]}),e.jsxs("label",{style:{gridColumn:"1 / -1"},children:[e.jsx("span",{children:"RUT *"}),e.jsx("input",{className:"input",value:j,onChange:t=>d(t.target.value),placeholder:"12.345.678-9"})]}),e.jsxs("div",{style:{gridColumn:"1 / -1",display:"flex",gap:"0.5rem"},children:[e.jsx("button",{type:"button",className:"btn",onClick:xe,disabled:G.isPending,children:G.isPending?"Creando...":"Crear Proveedor"}),e.jsx("button",{type:"button",className:"btn ghost",onClick:()=>{v(!1),p(""),d("")},children:"Cancelar"})]})]}):e.jsx(e.Fragment,{children:e.jsxs("label",{style:{gridColumn:"1 / -1"},children:[e.jsx("span",{children:"Proveedor *"}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsxs("select",{className:"input",value:x,onChange:t=>g(t.target.value),required:!0,style:{flex:1},children:[e.jsx("option",{value:"",children:"Selecciona proveedor"}),me.map(t=>e.jsxs("option",{value:t.id,children:[t.name," ",t.rut?`(${t.rut})`:""]},t.id))]}),e.jsx("button",{type:"button",className:"btn",onClick:()=>v(!0),style:{whiteSpace:"nowrap"},children:"+ Nuevo"})]})]})}),e.jsx("div",{className:"line",style:{gridColumn:"1 / -1"}}),e.jsx("div",{style:{gridColumn:"1 / -1"},children:e.jsx("h3",{style:{marginBottom:"0.5rem",fontSize:"0.9rem",fontWeight:"600"},children:"Información del Documento"})}),e.jsxs("label",{children:[e.jsx("span",{children:"Tipo de Documento *"}),e.jsx("select",{className:"input",value:i,onChange:t=>w(t.target.value),required:!0,children:Oe.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("label",{children:[e.jsx("span",{children:"Número de Documento"}),e.jsx("input",{className:"input",value:P,onChange:t=>A(t.target.value.slice(0,35)),maxLength:35,placeholder:"Ej: OC-2025-001 o 12345"})]}),e.jsxs("label",{children:[e.jsx("span",{children:"Fecha de Emisión *"}),e.jsx("input",{className:"input",type:"datetime-local",value:k,onChange:t=>L(t.target.value),required:!0})]}),e.jsxs("label",{children:[e.jsx("span",{children:"Fecha de Recepción"}),e.jsx("input",{className:"input",type:"datetime-local",value:N,onChange:t=>f(t.target.value)})]}),e.jsx("div",{className:"line",style:{gridColumn:"1 / -1"}}),e.jsx("div",{style:{gridColumn:"1 / -1"},children:e.jsx("h3",{style:{marginBottom:"0.5rem",fontSize:"0.9rem",fontWeight:"600"},children:"Items de Compra"})}),e.jsxs("div",{className:"item-builder",style:{gridColumn:"1 / -1",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"0.5rem"},children:[e.jsxs("div",{style:{gridColumn:"1 / -1",display:"flex",gap:"1rem",marginBottom:"0.5rem"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[e.jsx("input",{type:"radio",name:"itemType",value:"product",checked:h==="product",onChange:t=>D(t.target.value)}),e.jsx("span",{children:"Producto"})]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[e.jsx("input",{type:"radio",name:"itemType",value:"service",checked:h==="service",onChange:t=>D(t.target.value)}),e.jsx("span",{children:"Servicio"})]})]}),h==="product"?e.jsxs("select",{className:"input",value:_,onChange:t=>z(t.target.value),style:{gridColumn:"1 / -1"},children:[e.jsx("option",{value:"",children:"Seleccionar producto"}),le.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}):e.jsxs("select",{className:"input",value:V,onChange:t=>K(t.target.value),style:{gridColumn:"1 / -1"},children:[e.jsx("option",{value:"",children:"Seleccionar servicio"}),ae.data?.map(t=>e.jsxs("option",{value:t.id,children:[t.code," - ",t.name]},t.id))]}),e.jsx("input",{className:"input",type:"number",min:1,value:O,onChange:t=>M(Number(t.target.value)),placeholder:"Cantidad"}),e.jsx("input",{className:"input",type:"number",step:"0.01",min:0,value:B,onChange:t=>Q(Number(t.target.value)),placeholder:"Costo unitario"}),h==="product"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"0.85rem",color:"#666",marginBottom:"0.25rem",display:"block"},children:"Vencimiento"}),e.jsx("input",{className:"input",type:"date",value:Z,onChange:t=>W(t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"0.85rem",color:"#666",marginBottom:"0.25rem",display:"block"},children:"Ubicación"}),e.jsxs("select",{className:"input",value:J,onChange:t=>U(t.target.value),children:[e.jsx("option",{value:"",children:"Sin ubicación"}),re.data?.map(t=>e.jsxs("option",{value:t.id,children:[t.code," - ",t.name," (",t.type,")"]},t.id))]})]})]}),e.jsxs("button",{type:"button",className:"btn",onClick:pe,style:{gridColumn:"1 / -1"},children:["+ Agregar ",h==="product"?"Producto":"Servicio"]})]}),s.length>0&&e.jsx("div",{style:{gridColumn:"1 / -1",overflowX:"auto"},children:e.jsxs("table",{className:"table",style:{minWidth:"600px"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Tipo"}),e.jsx("th",{children:"Item"}),e.jsx("th",{style:{textAlign:"right"},children:"Cantidad"}),e.jsx("th",{style:{textAlign:"right"},children:"Costo Unit."}),e.jsx("th",{style:{textAlign:"right"},children:"Subtotal"}),e.jsx("th",{children:"Info"}),e.jsx("th",{})]})}),e.jsx("tbody",{children:s.map((t,c)=>{const S=t.productId?le.find(T=>T.id===t.productId):null,I=t.serviceId?ae.data?.find(T=>T.id===t.serviceId):null,H=t.qty*t.unitCost,Y=S?.name??I?.name??(t.productId||t.serviceId),R=t.productId?"Producto":"Servicio";return e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("span",{className:"badge",style:{backgroundColor:t.productId?"#e3f2fd":"#fff3e0",color:t.productId?"#1976d2":"#f57c00"},children:R})}),e.jsx("td",{children:Y}),e.jsx("td",{className:"mono",style:{textAlign:"right"},children:t.qty}),e.jsxs("td",{className:"mono",style:{textAlign:"right"},children:["$",t.unitCost.toFixed(2)]}),e.jsxs("td",{className:"mono",style:{textAlign:"right",fontWeight:"600"},children:["$",H.toFixed(2)]}),e.jsxs("td",{className:"mono",style:{fontSize:"0.85rem",color:"#666"},children:[t.productId&&t.expDate&&`Venc: ${new Date(t.expDate).toLocaleDateString("es-CL")}`,t.productId&&t.locationId&&re.data?.find(T=>T.id===t.locationId)?.code,t.serviceId&&"-"]}),e.jsx("td",{children:e.jsx("button",{type:"button",className:"btn ghost",onClick:()=>he(c),style:{padding:"0.25rem 0.5rem"},children:"Quitar"})})]},`item-${c}`)})})]})}),e.jsx("div",{className:"line",style:{gridColumn:"1 / -1"}}),e.jsx("div",{style:{gridColumn:"1 / -1"},children:e.jsx("h3",{style:{marginBottom:"0.5rem",fontSize:"0.9rem",fontWeight:"600"},children:"Descuentos e Impuestos"})}),e.jsxs("label",{style:{gridColumn:"span 1"},children:[e.jsx("span",{children:"Tipo de Descuento"}),e.jsxs("select",{className:"input",value:C,onChange:t=>te(t.target.value),children:[e.jsx("option",{value:"amount",children:"Monto Fijo ($)"}),e.jsx("option",{value:"percentage",children:"Porcentaje (%)"})]})]}),e.jsxs("label",{style:{gridColumn:"span 1"},children:[e.jsxs("span",{children:["Descuento ",C==="percentage"?"(%)":"($)"]}),e.jsx("input",{className:"input",type:"number",step:"0.01",min:0,max:C==="percentage"?100:void 0,value:q,onChange:t=>se(Number(t.target.value)),placeholder:C==="percentage"?"0-100":"0.00"})]}),e.jsxs("label",{style:{gridColumn:"1 / -1",display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:E,onChange:t=>ee(t.target.checked),style:{width:"auto"}}),e.jsx("span",{style:{fontWeight:"600"},children:"Aplicar IVA 19%"})]}),e.jsx("div",{style:{gridColumn:"1 / -1",backgroundColor:"#f8f9fa",padding:"1rem",borderRadius:"8px",marginTop:"0.5rem"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("span",{className:"muted small",children:"Subtotal"}),e.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:"600"},children:["$",y.subtotal.toFixed(2)]})]}),y.discountAmount>0&&e.jsxs("div",{children:[e.jsx("span",{className:"muted small",children:"Descuento"}),e.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:"600",color:"#dc3545"},children:["-$",y.discountAmount.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"muted small",children:"Neto"}),e.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:"600"},children:["$",y.net.toFixed(2)]})]}),E&&e.jsxs("div",{children:[e.jsx("span",{className:"muted small",children:"IVA (19%)"}),e.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:"600"},children:["$",y.vat.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"muted small",children:"Total"}),e.jsxs("div",{style:{fontSize:"1.3rem",fontWeight:"700",color:"#0066cc"},children:["$",y.total.toFixed(2)]})]})]})}),F.isError&&e.jsx("p",{className:"error",style:{gridColumn:"1 / -1"},children:F.error.message}),e.jsxs("div",{className:"buttons",style:{gridColumn:"1 / -1"},children:[e.jsx("button",{className:"btn",type:"submit",disabled:F.isPending||s.length===0,children:F.isPending?"Guardando...":"Registrar Compra"}),e.jsx("button",{className:"btn ghost",type:"button",onClick:ie,children:"Limpiar Formulario"})]})]})})}function Be(n,o={}){const{page:u=0,size:x=5,enabled:g=!0,keepPrevious:m=!0}=o;return b({queryKey:["documents",n,u,x],queryFn:()=>{if(!n)throw new Error("Debe especificar el tipo de documento.");return Ce({type:n,page:u,size:x})},enabled:!!n&&g,placeholderData:m?ce:void 0})}const Qe=new Intl.DateTimeFormat("es-CL",{dateStyle:"medium"}),We=new Intl.NumberFormat("es-CL",{style:"currency",currency:"CLP",maximumFractionDigits:0});function Ue(n){if(!n)return"—";const o=Date.parse(n);return Number.isNaN(o)?n:Qe.format(new Date(o))}function Ge(n){return n==null||Number.isNaN(n)?"—":We.format(n)}function He({title:n,type:o,viewAllTo:u,limit:x=5,emptyMessage:g="No hay documentos registrados.",onViewAllClick:m,viewAllRef:v}){const l=Be(o,{size:x}),p=l.data?.content??[],j=l.data?.totalElements??0,d=a.useMemo(()=>l.isLoading?"Cargando...":l.isError?"—":j.toLocaleString("es-CL"),[l.isError,l.isLoading,j]);return e.jsxs("section",{className:"card documents-card","aria-busy":l.isLoading,"aria-live":"polite",children:[e.jsxs("header",{className:"documents-card__header",children:[e.jsxs("div",{children:[e.jsx("h3",{children:n}),e.jsx("p",{className:"documents-card__total",children:d}),e.jsx("span",{className:"muted small",children:"Total documentos"})]}),e.jsx(we,{className:"btn ghost",to:u,ref:v,onClick:i=>{m&&(i.preventDefault(),m(i))},children:"Ver todos"})]}),e.jsxs("div",{className:"documents-card__content",children:[l.isLoading&&e.jsx("p",{className:"muted",role:"status",children:"Cargando documentos..."}),l.isError&&e.jsx("p",{className:"error",role:"alert",children:l.error?.message??"No se pudieron obtener los documentos."}),!l.isLoading&&!l.isError&&p.length===0&&e.jsx("p",{className:"muted",children:g}),!l.isLoading&&!l.isError&&p.length>0&&e.jsx("ul",{className:"documents-card__list",children:p.map(i=>e.jsxs("li",{className:"documents-card__item",children:[e.jsxs("div",{className:"documents-card__item-info",children:[e.jsxs("span",{className:"documents-card__item-title",children:[i.type," ",i.number??i.id]}),e.jsxs("span",{className:"documents-card__item-meta",children:[e.jsx("span",{children:Ue(i.issuedAt)}),i.status&&e.jsx("span",{className:`status ${i.status.toLowerCase()}`,"aria-label":i.status,children:i.status})]})]}),e.jsx("span",{className:"documents-card__item-total",children:Ge(i.total)})]},i.id))})]})]})}const X=10,Ye=[{value:"",label:"Todos"},{value:"received",label:"Recibida"},{value:"cancelled",label:"Cancelada"}];function lt(){const n=Se(),[o,u]=a.useState(0),[x,g]=a.useState(!1),[m,v]=a.useState("received"),[l,p]=a.useState(""),j=Ee(l,300);a.useEffect(()=>{u(0)},[m,j]);const d=b({queryKey:["purchases",o,m,j],queryFn:()=>Fe({page:o,size:X,status:m||void 0,search:j||void 0}),placeholderData:ce}),i=b({queryKey:["purchases","metrics",14],queryFn:()=>Te(14)}),w=$({mutationFn:s=>Ie(s),onSuccess:()=>n.invalidateQueries({queryKey:["purchases"]})}),P=$({mutationFn:({id:s,payload:r})=>De(s,r),onSuccess:()=>n.invalidateQueries({queryKey:["purchases"]})}),A=s=>{if(s.status?.toLowerCase()==="cancelled"){window.alert("La compra ya fue cancelada.");return}window.confirm(`Cancelar compra ${s.docNumber??s.id}?`)&&w.mutate(s.id)},k=s=>{const r=window.prompt("Documento",s.docType??"");if(r===null)return;const h=window.prompt("Numero",s.docNumber??"");if(h===null)return;const D={docType:r.trim()||s.docType,docNumber:h.trim()||s.docNumber};P.mutate({id:s.id,payload:D})},L=a.useMemo(()=>[{header:"Documento",accessorKey:"docType",cell:s=>s.getValue()??"Factura"},{header:"Numero",accessorKey:"docNumber",cell:s=>s.getValue()??"-"},{header:"Proveedor",accessorFn:s=>s.supplierName??s.supplierId??"-",cell:s=>s.getValue()??"-"},{header:"Estado",accessorKey:"status",cell:s=>{const r=s.getValue()??"";return e.jsx("span",{className:`status ${r.toLowerCase()}`,children:r})}},{header:"Neto",accessorKey:"net",cell:s=>`$${Number(s.getValue()).toLocaleString()}`},{header:"IVA",accessorKey:"vat",cell:s=>`$${Number(s.getValue()).toLocaleString()}`},{header:"Total",accessorKey:"total",cell:s=>`$${Number(s.getValue()).toLocaleString()}`},{header:"Emitida",accessorKey:"issuedAt",cell:s=>new Date(s.getValue()).toLocaleString()},{id:"actions",header:"Acciones",cell:({row:s})=>e.jsxs("div",{className:"table-actions",children:[e.jsx("button",{className:"btn ghost",type:"button",onClick:()=>k(s.original),children:"Editar"}),e.jsx("button",{className:"btn ghost",type:"button",onClick:()=>A(s.original),children:"Cancelar"})]})}],[]),N=ke({data:d.data?.content??[],columns:L,getCoreRowModel:Le(),manualPagination:!0,pageCount:d.data?.totalPages??-1,state:{pagination:{pageIndex:o,pageSize:X}},onPaginationChange:s=>{const r=typeof s=="function"?s({pageIndex:o,pageSize:X}).pageIndex:s.pageIndex;u(r)}}),f=a.useMemo(()=>(i.data??[]).map(s=>({date:s.date,total:Number(s.total??0),count:s.count})),[i.data]);return e.jsxs("div",{className:"page-section",children:[e.jsx(Pe,{title:"Compras y abastecimiento",description:"Controla ordenes, recepciones y presupuestos para evitar quiebres.",actions:e.jsx("button",{className:"btn",onClick:()=>g(!0),children:"+ Nueva orden"})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"filter-bar",children:[e.jsx("input",{className:"input",placeholder:"Buscar (doc, numero, proveedor)",value:l,onChange:s=>p(s.target.value)}),l&&e.jsx("button",{className:"btn ghost",type:"button",onClick:()=>p(""),children:"Limpiar"}),e.jsx("select",{className:"input",value:m,onChange:s=>v(s.target.value),children:Ye.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]})}),e.jsxs("section",{className:"kpi-grid",children:[e.jsxs("div",{className:"card stat",children:[e.jsx("h3",{children:"Ordenes en curso"}),e.jsx("p",{className:"stat-value",children:d.data?.totalElements??0}),e.jsx("span",{className:"stat-trend",children:"Total registros listados"})]}),e.jsxs("div",{className:"card stat",children:[e.jsx("h3",{children:"Gasto 14 dias"}),e.jsxs("p",{className:"stat-value",children:["$",f.reduce((s,r)=>s+r.total,0).toLocaleString()]}),e.jsx("span",{className:"stat-trend",children:"Incluye impuestos"})]}),e.jsxs("div",{className:"card stat",children:[e.jsx("h3",{children:"Ordenes diarias"}),e.jsx("p",{className:"stat-value",children:f.reduce((s,r)=>s+r.count,0)}),e.jsx("span",{className:"stat-trend",children:"Ultimas 2 semanas"})]})]}),e.jsx(He,{title:"Órdenes de compra",type:"PURCHASE",viewAllTo:"/app/purchases?type=PURCHASE",emptyMessage:"No hay órdenes de compra."}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{children:"Tendencia de compras"}),e.jsx("div",{style:{height:260},children:e.jsx(qe,{width:"100%",height:"100%",children:e.jsxs(Re,{data:f,children:[e.jsx($e,{strokeDasharray:"3 3",stroke:"#1f2937"}),e.jsx(_e,{dataKey:"date",stroke:"#9aa0a6",tick:{fontSize:12}}),e.jsx(ze,{stroke:"#9aa0a6",tickFormatter:s=>`$${(s/1e3).toFixed(0)}k`}),e.jsx(Ve,{formatter:s=>`$${s.toLocaleString()}`}),e.jsx(Ke,{dataKey:"total",fill:"#a855f7",radius:[6,6,0,0]})]})})})]}),e.jsxs("div",{className:"card table-card",children:[e.jsx("h3",{children:"Ordenes recientes"}),e.jsx("div",{className:"table-wrapper",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:N.getHeaderGroups().map(s=>e.jsx("tr",{children:s.headers.map(r=>e.jsx("th",{children:oe(r.column.columnDef.header,r.getContext())},r.id))},s.id))}),e.jsx("tbody",{children:N.getRowModel().rows.map(s=>e.jsx("tr",{children:s.getVisibleCells().map(r=>e.jsx("td",{children:oe(r.column.columnDef.cell,r.getContext())},r.id))},s.id))})]})}),e.jsxs("div",{className:"pagination",children:[e.jsx("button",{className:"btn",disabled:o===0,onClick:()=>u(s=>Math.max(0,s-1)),children:"Anterior"}),e.jsxs("span",{className:"muted",children:["Pagina ",o+1," de ",d.data?.totalPages??1]}),e.jsx("button",{className:"btn",disabled:o+1>=(d.data?.totalPages??1),onClick:()=>u(s=>s+1),children:"Siguiente"})]})]}),e.jsx(Me,{open:x,onClose:()=>g(!1),onCreated:()=>n.invalidateQueries({queryKey:["purchases"]})})]})}export{lt as default};
