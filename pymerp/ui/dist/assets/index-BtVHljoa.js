const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/DashboardPage-BAyT_4Yb.js","assets/react-D8kvZI4c.js","assets/useQuery-Dnian6zg.js","assets/PageHeader-BlxDVWRK.js","assets/charts-BH7DIlZU.js","assets/SalesPage-Bf9lCKAP.js","assets/Modal-B2h9NkJO.js","assets/customersUtils-cyr8bVhJ.js","assets/useDebouncedValue-DnjRONvw.js","assets/problemDetail-C-xKLZeL.js","assets/table-DbsuG4jc.js","assets/currency-HwQAg_Xa.js","assets/PurchasesPage-DVp-T4iM.js","assets/InventoryPage-chaD6y0s.js","assets/InventoryMovementsPage-DIymsVov.js","assets/CustomersPage-Bku7UpQ_.js","assets/SuppliersPage-CjOYU5jW.js","assets/FinancesPage-BU7eDD8A.js","assets/ReportsPage-UJ0D2phP.js","assets/SettingsPage-CkCNzoqR.js"])))=>i.map(i=>d[i]);
import{a as ys,b as gs,g as bs,r as S,u as pn,N as vs,O as hn,d as mn,e as ws,f as te,h as je,R as Ss,B as Ps}from"./react-D8kvZI4c.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var rt={exports:{}},Se={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kt;function As(){if(kt)return Se;kt=1;var e=ys(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,r=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function a(i,c,u){var l,h={},w=null,A=null;u!==void 0&&(w=""+u),c.key!==void 0&&(w=""+c.key),c.ref!==void 0&&(A=c.ref);for(l in c)s.call(c,l)&&!o.hasOwnProperty(l)&&(h[l]=c[l]);if(i&&i.defaultProps)for(l in c=i.defaultProps,c)h[l]===void 0&&(h[l]=c[l]);return{$$typeof:t,type:i,key:w,ref:A,props:h,_owner:r.current}}return Se.Fragment=n,Se.jsx=a,Se.jsxs=a,Se}var It;function Es(){return It||(It=1,rt.exports=As()),rt.exports}var f=Es(),Me={},Ft;function Cs(){if(Ft)return Me;Ft=1;var e=gs();return Me.createRoot=e.createRoot,Me.hydrateRoot=e.hydrateRoot,Me}var xs=Cs();const Os=bs(xs);var xe=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Rs={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Ts=class{#e=Rs;#n=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,t){return this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}},lt=new Ts;function Ns(e){setTimeout(e,0)}var We=typeof window>"u"||"Deno"in globalThis;function K(){}function Ds(e,t){return typeof e=="function"?e(t):e}function ks(e){return typeof e=="number"&&e>=0&&e!==1/0}function Is(e,t){return Math.max(e+(t||0)-Date.now(),0)}function dt(e,t){return typeof e=="function"?e(t):e}function Fs(e,t){return typeof e=="function"?e(t):e}function Lt(e,t){const{type:n="all",exact:s,fetchStatus:r,predicate:o,queryKey:a,stale:i}=e;if(a){if(s){if(t.queryHash!==At(a,t.options))return!1}else if(!Ee(t.queryKey,a))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof i=="boolean"&&t.isStale()!==i||r&&r!==t.state.fetchStatus||o&&!o(t))}function jt(e,t){const{exact:n,status:s,predicate:r,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(n){if(ie(t.options.mutationKey)!==ie(o))return!1}else if(!Ee(t.options.mutationKey,o))return!1}return!(s&&t.state.status!==s||r&&!r(t))}function At(e,t){return(t?.queryKeyHashFn||ie)(e)}function ie(e){return JSON.stringify(e,(t,n)=>ft(n)?Object.keys(n).sort().reduce((s,r)=>(s[r]=n[r],s),{}):n)}function Ee(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>Ee(e[n],t[n])):!1}var Ls=Object.prototype.hasOwnProperty;function yn(e,t){if(e===t)return e;const n=Mt(e)&&Mt(t);if(!n&&!(ft(e)&&ft(t)))return t;const r=(n?e:Object.keys(e)).length,o=n?t:Object.keys(t),a=o.length,i=n?new Array(a):{};let c=0;for(let u=0;u<a;u++){const l=n?u:o[u],h=e[l],w=t[l];if(h===w){i[l]=h,(n?u<r:Ls.call(e,l))&&c++;continue}if(h===null||w===null||typeof h!="object"||typeof w!="object"){i[l]=w;continue}const A=yn(h,w);i[l]=A,A===h&&c++}return r===a&&c===r?e:i}function js(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function Mt(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function ft(e){if(!_t(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!_t(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function _t(e){return Object.prototype.toString.call(e)==="[object Object]"}function Ms(e){return new Promise(t=>{lt.setTimeout(t,e)})}function _s(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?yn(e,t):t}function mi(e){return e}function qs(e,t,n=0){const s=[...e,t];return n&&s.length>n?s.slice(1):s}function Us(e,t,n=0){const s=[t,...e];return n&&s.length>n?s.slice(0,-1):s}var Et=Symbol();function gn(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===Et?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Bs(e,t){return typeof e=="function"?e(...t):!!e}var $s=class extends xe{#e;#n;#t;constructor(){super(),this.#t=e=>{if(!We&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#n||this.setEventListener(this.#t)}onUnsubscribe(){this.hasListeners()||(this.#n?.(),this.#n=void 0)}setEventListener(e){this.#t=e,this.#n?.(),this.#n=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},bn=new $s;function zs(){let e,t;const n=new Promise((r,o)=>{e=r,t=o});n.status="pending",n.catch(()=>{});function s(r){Object.assign(n,r),delete n.resolve,delete n.reject}return n.resolve=r=>{s({status:"fulfilled",value:r}),e(r)},n.reject=r=>{s({status:"rejected",reason:r}),t(r)},n}var Ks=Ns;function Hs(){let e=[],t=0,n=i=>{i()},s=i=>{i()},r=Ks;const o=i=>{t?e.push(i):r(()=>{n(i)})},a=()=>{const i=e;e=[],i.length&&r(()=>{s(()=>{i.forEach(c=>{n(c)})})})};return{batch:i=>{let c;t++;try{c=i()}finally{t--,t||a()}return c},batchCalls:i=>(...c)=>{o(()=>{i(...c)})},schedule:o,setNotifyFunction:i=>{n=i},setBatchNotifyFunction:i=>{s=i},setScheduler:i=>{r=i}}}var L=Hs(),Vs=class extends xe{#e=!0;#n;#t;constructor(){super(),this.#t=e=>{if(!We&&window.addEventListener){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#n||this.setEventListener(this.#t)}onUnsubscribe(){this.hasListeners()||(this.#n?.(),this.#n=void 0)}setEventListener(e){this.#t=e,this.#n?.(),this.#n=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(n=>{n(e)}))}isOnline(){return this.#e}},ze=new Vs;function Qs(e){return Math.min(1e3*2**e,3e4)}function vn(e){return(e??"online")==="online"?ze.isOnline():!0}var pt=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function wn(e){let t=!1,n=0,s;const r=zs(),o=()=>r.status!=="pending",a=v=>{if(!o()){const g=new pt(v);w(g),e.onCancel?.(g)}},i=()=>{t=!0},c=()=>{t=!1},u=()=>bn.isFocused()&&(e.networkMode==="always"||ze.isOnline())&&e.canRun(),l=()=>vn(e.networkMode)&&e.canRun(),h=v=>{o()||(s?.(),r.resolve(v))},w=v=>{o()||(s?.(),r.reject(v))},A=()=>new Promise(v=>{s=g=>{(o()||u())&&v(g)},e.onPause?.()}).then(()=>{s=void 0,o()||e.onContinue?.()}),m=()=>{if(o())return;let v;const g=n===0?e.initialPromise:void 0;try{v=g??e.fn()}catch(O){v=Promise.reject(O)}Promise.resolve(v).then(h).catch(O=>{if(o())return;const C=e.retry??(We?0:3),R=e.retryDelay??Qs,I=typeof R=="function"?R(n,O):R,D=C===!0||typeof C=="number"&&n<C||typeof C=="function"&&C(n,O);if(t||!D){w(O);return}n++,e.onFail?.(n,O),Ms(I).then(()=>u()?void 0:A()).then(()=>{t?w(O):m()})})};return{promise:r,status:()=>r.status,cancel:a,continue:()=>(s?.(),r),cancelRetry:i,continueRetry:c,canStart:l,start:()=>(l()?m():A().then(m),r)}}var Sn=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),ks(this.gcTime)&&(this.#e=lt.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(We?1/0:300*1e3))}clearGcTimeout(){this.#e&&(lt.clearTimeout(this.#e),this.#e=void 0)}},Ws=class extends Sn{#e;#n;#t;#r;#s;#a;#i;constructor(e){super(),this.#i=!1,this.#a=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#r=e.client,this.#t=this.#r.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=qt(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#s?.promise}setOptions(e){if(this.options={...this.#a,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=qt(this.options);t.data!==void 0&&(this.setData(t.data,{updatedAt:t.dataUpdatedAt,manual:!0}),this.#e=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#t.remove(this)}setData(e,t){const n=_s(this.state.data,e,this.options);return this.#o({data:n,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),n}setState(e,t){this.#o({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#s?.promise;return this.#s?.cancel(e),t?t.then(K).catch(K):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>Fs(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Et||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>dt(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Is(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#s?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#s?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#s&&(this.#i?this.#s.cancel({revert:!0}):this.#s.cancelRetry()),this.scheduleGc()),this.#t.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#o({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#s?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#s)return this.#s.continueRetry(),this.#s.promise}if(e&&this.setOptions(e),!this.options.queryFn){const i=this.observers.find(c=>c.options.queryFn);i&&this.setOptions(i.options)}const n=new AbortController,s=i=>{Object.defineProperty(i,"signal",{enumerable:!0,get:()=>(this.#i=!0,n.signal)})},r=()=>{const i=gn(this.options,t),u=(()=>{const l={client:this.#r,queryKey:this.queryKey,meta:this.meta};return s(l),l})();return this.#i=!1,this.options.persister?this.options.persister(i,u,this):i(u)},a=(()=>{const i={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:r};return s(i),i})();this.options.behavior?.onFetch(a,this),this.#n=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==a.fetchOptions?.meta)&&this.#o({type:"fetch",meta:a.fetchOptions?.meta}),this.#s=wn({initialPromise:t?.initialPromise,fn:a.fetchFn,onCancel:i=>{i instanceof pt&&i.revert&&this.setState({...this.#n,fetchStatus:"idle"}),n.abort()},onFail:(i,c)=>{this.#o({type:"failed",failureCount:i,error:c})},onPause:()=>{this.#o({type:"pause"})},onContinue:()=>{this.#o({type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0});try{const i=await this.#s.start();if(i===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(i),this.#t.config.onSuccess?.(i,this),this.#t.config.onSettled?.(i,this.state.error,this),i}catch(i){if(i instanceof pt){if(i.silent)return this.#s.promise;if(i.revert){if(this.state.data===void 0)throw i;return this.state.data}}throw this.#o({type:"error",error:i}),this.#t.config.onError?.(i,this),this.#t.config.onSettled?.(this.state.data,i,this),i}finally{this.scheduleGc()}}#o(e){const t=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Gs(n.data,this.options),fetchMeta:e.meta??null};case"success":const s={...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#n=e.manual?s:void 0,s;case"error":const r=e.error;return{...n,error:r,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=t(this.state),L.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#t.notify({query:this,type:"updated",action:e})})}};function Gs(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:vn(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function qt(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,s=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function Ut(e){return{onFetch:(t,n)=>{const s=t.options,r=t.fetchOptions?.meta?.fetchMore?.direction,o=t.state.data?.pages||[],a=t.state.data?.pageParams||[];let i={pages:[],pageParams:[]},c=0;const u=async()=>{let l=!1;const h=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(t.signal.aborted?l=!0:t.signal.addEventListener("abort",()=>{l=!0}),t.signal)})},w=gn(t.options,t.fetchOptions),A=async(m,v,g)=>{if(l)return Promise.reject();if(v==null&&m.pages.length)return Promise.resolve(m);const C=(()=>{const $={client:t.client,queryKey:t.queryKey,pageParam:v,direction:g?"backward":"forward",meta:t.options.meta};return h($),$})(),R=await w(C),{maxPages:I}=t.options,D=g?Us:qs;return{pages:D(m.pages,R,I),pageParams:D(m.pageParams,v,I)}};if(r&&o.length){const m=r==="backward",v=m?Pn:ht,g={pages:o,pageParams:a},O=v(s,g);i=await A(g,O,m)}else{const m=e??o.length;do{const v=c===0?a[0]??s.initialPageParam:ht(s,i);if(c>0&&v==null)break;i=await A(i,v),c++}while(c<m)}return i};t.options.persister?t.fetchFn=()=>t.options.persister?.(u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n):t.fetchFn=u}}}function ht(e,{pages:t,pageParams:n}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,n[s],n):void 0}function Pn(e,{pages:t,pageParams:n}){return t.length>0?e.getPreviousPageParam?.(t[0],t,n[0],n):void 0}function yi(e,t){return t?ht(e,t)!=null:!1}function gi(e,t){return!t||!e.getPreviousPageParam?!1:Pn(e,t)!=null}var Js=class extends Sn{#e;#n;#t;#r;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#t=e.mutationCache,this.#n=[],this.state=e.state||An(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#n.includes(e)||(this.#n.push(e),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#n=this.#n.filter(t=>t!==e),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#n.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#s({type:"continue"})},n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#r=wn({fn:()=>this.options.mutationFn?this.options.mutationFn(e,n):Promise.reject(new Error("No mutationFn found")),onFail:(o,a)=>{this.#s({type:"failed",failureCount:o,error:a})},onPause:()=>{this.#s({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const s=this.state.status==="pending",r=!this.#r.canStart();try{if(s)t();else{this.#s({type:"pending",variables:e,isPaused:r}),await this.#t.config.onMutate?.(e,this,n);const a=await this.options.onMutate?.(e,n);a!==this.state.context&&this.#s({type:"pending",context:a,variables:e,isPaused:r})}const o=await this.#r.start();return await this.#t.config.onSuccess?.(o,e,this.state.context,this,n),await this.options.onSuccess?.(o,e,this.state.context,n),await this.#t.config.onSettled?.(o,null,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(o,null,e,this.state.context,n),this.#s({type:"success",data:o}),o}catch(o){try{throw await this.#t.config.onError?.(o,e,this.state.context,this,n),await this.options.onError?.(o,e,this.state.context,n),await this.#t.config.onSettled?.(void 0,o,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(void 0,o,e,this.state.context,n),o}finally{this.#s({type:"error",error:o})}}finally{this.#t.runNext(this)}}#s(e){const t=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),L.batch(()=>{this.#n.forEach(n=>{n.onMutationUpdate(e)}),this.#t.notify({mutation:this,type:"updated",action:e})})}};function An(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ys=class extends xe{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#n=new Map,this.#t=0}#e;#n;#t;build(e,t,n){const s=new Js({client:e,mutationCache:this,mutationId:++this.#t,options:e.defaultMutationOptions(t),state:n});return this.add(s),s}add(e){this.#e.add(e);const t=_e(e);if(typeof t=="string"){const n=this.#n.get(t);n?n.push(e):this.#n.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const t=_e(e);if(typeof t=="string"){const n=this.#n.get(t);if(n)if(n.length>1){const s=n.indexOf(e);s!==-1&&n.splice(s,1)}else n[0]===e&&this.#n.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=_e(e);if(typeof t=="string"){const s=this.#n.get(t)?.find(r=>r.state.status==="pending");return!s||s===e}else return!0}runNext(e){const t=_e(e);return typeof t=="string"?this.#n.get(t)?.find(s=>s!==e&&s.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){L.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#n.clear()})}getAll(){return Array.from(this.#e)}find(e){const t={exact:!0,...e};return this.getAll().find(n=>jt(t,n))}findAll(e={}){return this.getAll().filter(t=>jt(e,t))}notify(e){L.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return L.batch(()=>Promise.all(e.map(t=>t.continue().catch(K))))}};function _e(e){return e.options.scope?.id}var Xs=class extends xe{#e;#n=void 0;#t;#r;constructor(t,n){super(),this.#e=t,this.setOptions(n),this.bindMethods(),this.#s()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const n=this.options;this.options=this.#e.defaultMutationOptions(t),js(this.options,n)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#t,observer:this}),n?.mutationKey&&this.options.mutationKey&&ie(n.mutationKey)!==ie(this.options.mutationKey)?this.reset():this.#t?.state.status==="pending"&&this.#t.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#t?.removeObserver(this)}onMutationUpdate(t){this.#s(),this.#a(t)}getCurrentResult(){return this.#n}reset(){this.#t?.removeObserver(this),this.#t=void 0,this.#s(),this.#a()}mutate(t,n){return this.#r=n,this.#t?.removeObserver(this),this.#t=this.#e.getMutationCache().build(this.#e,this.options),this.#t.addObserver(this),this.#t.execute(t)}#s(){const t=this.#t?.state??An();this.#n={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#a(t){L.batch(()=>{if(this.#r&&this.hasListeners()){const n=this.#n.variables,s=this.#n.context,r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};t?.type==="success"?(this.#r.onSuccess?.(t.data,n,s,r),this.#r.onSettled?.(t.data,null,n,s,r)):t?.type==="error"&&(this.#r.onError?.(t.error,n,s,r),this.#r.onSettled?.(void 0,t.error,n,s,r))}this.listeners.forEach(n=>{n(this.#n)})})}},Zs=class extends xe{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,n){const s=t.queryKey,r=t.queryHash??At(s,t);let o=this.get(r);return o||(o=new Ws({client:e,queryKey:s,queryHash:r,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){L.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(n=>Lt(t,n))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(n=>Lt(e,n)):t}notify(e){L.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){L.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){L.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},er=class{#e;#n;#t;#r;#s;#a;#i;#o;constructor(e={}){this.#e=e.queryCache||new Zs,this.#n=e.mutationCache||new Ys,this.#t=e.defaultOptions||{},this.#r=new Map,this.#s=new Map,this.#a=0}mount(){this.#a++,this.#a===1&&(this.#i=bn.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#o=ze.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#a--,this.#a===0&&(this.#i?.(),this.#i=void 0,this.#o?.(),this.#o=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#n.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=this.#e.build(this,t),s=n.state.data;return s===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(dt(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(s))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:n})=>{const s=n.data;return[t,s]})}setQueryData(e,t,n){const s=this.defaultQueryOptions({queryKey:e}),o=this.#e.get(s.queryHash)?.state.data,a=Ds(t,o);if(a!==void 0)return this.#e.build(this,s).setData(a,{...n,manual:!0})}setQueriesData(e,t,n){return L.batch(()=>this.#e.findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,n)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;L.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=this.#e;return L.batch(()=>(n.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},s=L.batch(()=>this.#e.findAll(e).map(r=>r.cancel(n)));return Promise.all(s).then(K).catch(K)}invalidateQueries(e,t={}){return L.batch(()=>(this.#e.findAll(e).forEach(n=>{n.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},s=L.batch(()=>this.#e.findAll(e).filter(r=>!r.isDisabled()&&!r.isStatic()).map(r=>{let o=r.fetch(void 0,n);return n.throwOnError||(o=o.catch(K)),r.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(s).then(K)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=this.#e.build(this,t);return n.isStaleByTime(dt(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(K).catch(K)}fetchInfiniteQuery(e){return e.behavior=Ut(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(K).catch(K)}ensureInfiniteQueryData(e){return e.behavior=Ut(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return ze.isOnline()?this.#n.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#n}getDefaultOptions(){return this.#t}setDefaultOptions(e){this.#t=e}setQueryDefaults(e,t){this.#r.set(ie(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#r.values()],n={};return t.forEach(s=>{Ee(e,s.queryKey)&&Object.assign(n,s.defaultOptions)}),n}setMutationDefaults(e,t){this.#s.set(ie(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#s.values()],n={};return t.forEach(s=>{Ee(e,s.mutationKey)&&Object.assign(n,s.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#t.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=At(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Et&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#t.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#n.clear()}},En=S.createContext(void 0),tr=e=>{const t=S.useContext(En);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},nr=({client:e,children:t})=>(S.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),f.jsx(En.Provider,{value:e,children:t}));function Bt(e,t){const n=tr(),[s]=S.useState(()=>new Xs(n,e));S.useEffect(()=>{s.setOptions(e)},[s,e]);const r=S.useSyncExternalStore(S.useCallback(a=>s.subscribe(L.batchCalls(a)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),o=S.useCallback((a,i)=>{s.mutate(a,i).catch(K)},[s]);if(r.error&&Bs(s.options.throwOnError,[r.error]))throw r.error;return{...r,mutate:o,mutateAsync:r.mutate}}const sr="modulepreload",rr=function(e){return"/"+e},$t={},Y=function(t,n,s){let r=Promise.resolve();if(n&&n.length>0){let c=function(u){return Promise.all(u.map(l=>Promise.resolve(l).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),i=a?.nonce||a?.getAttribute("nonce");r=c(n.map(u=>{if(u=rr(u),u in $t)return;$t[u]=!0;const l=u.endsWith(".css"),h=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const w=document.createElement("link");if(w.rel=l?"stylesheet":sr,l||(w.as="script"),w.crossOrigin="",w.href=u,i&&w.setAttribute("nonce",i),document.head.appendChild(w),l)return new Promise((A,m)=>{w.addEventListener("load",A),w.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${u}`)))})}))}function o(a){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=a,window.dispatchEvent(i),!i.defaultPrevented)throw a}return r.then(a=>{for(const i of a||[])i.status==="rejected"&&o(i.reason);return t().catch(o)})};function Cn(e,t){return function(){return e.apply(t,arguments)}}const{toString:or}=Object.prototype,{getPrototypeOf:Ct}=Object,{iterator:Ge,toStringTag:xn}=Symbol,Je=(e=>t=>{const n=or.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),H=e=>(e=e.toLowerCase(),t=>Je(t)===e),Ye=e=>t=>typeof t===e,{isArray:he}=Array,pe=Ye("undefined");function Oe(e){return e!==null&&!pe(e)&&e.constructor!==null&&!pe(e.constructor)&&q(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const On=H("ArrayBuffer");function ar(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&On(e.buffer),t}const ir=Ye("string"),q=Ye("function"),Rn=Ye("number"),Re=e=>e!==null&&typeof e=="object",cr=e=>e===!0||e===!1,Ue=e=>{if(Je(e)!=="object")return!1;const t=Ct(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(xn in e)&&!(Ge in e)},ur=e=>{if(!Re(e)||Oe(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},lr=H("Date"),dr=H("File"),fr=H("Blob"),pr=H("FileList"),hr=e=>Re(e)&&q(e.pipe),mr=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||q(e.append)&&((t=Je(e))==="formdata"||t==="object"&&q(e.toString)&&e.toString()==="[object FormData]"))},yr=H("URLSearchParams"),[gr,br,vr,wr]=["ReadableStream","Request","Response","Headers"].map(H),Sr=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Te(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let s,r;if(typeof e!="object"&&(e=[e]),he(e))for(s=0,r=e.length;s<r;s++)t.call(null,e[s],s,e);else{if(Oe(e))return;const o=n?Object.getOwnPropertyNames(e):Object.keys(e),a=o.length;let i;for(s=0;s<a;s++)i=o[s],t.call(null,e[i],i,e)}}function Tn(e,t){if(Oe(e))return null;t=t.toLowerCase();const n=Object.keys(e);let s=n.length,r;for(;s-- >0;)if(r=n[s],t===r.toLowerCase())return r;return null}const oe=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Nn=e=>!pe(e)&&e!==oe;function mt(){const{caseless:e,skipUndefined:t}=Nn(this)&&this||{},n={},s=(r,o)=>{const a=e&&Tn(n,o)||o;Ue(n[a])&&Ue(r)?n[a]=mt(n[a],r):Ue(r)?n[a]=mt({},r):he(r)?n[a]=r.slice():(!t||!pe(r))&&(n[a]=r)};for(let r=0,o=arguments.length;r<o;r++)arguments[r]&&Te(arguments[r],s);return n}const Pr=(e,t,n,{allOwnKeys:s}={})=>(Te(t,(r,o)=>{n&&q(r)?e[o]=Cn(r,n):e[o]=r},{allOwnKeys:s}),e),Ar=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Er=(e,t,n,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},Cr=(e,t,n,s)=>{let r,o,a;const i={};if(t=t||{},e==null)return t;do{for(r=Object.getOwnPropertyNames(e),o=r.length;o-- >0;)a=r[o],(!s||s(a,e,t))&&!i[a]&&(t[a]=e[a],i[a]=!0);e=n!==!1&&Ct(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},xr=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const s=e.indexOf(t,n);return s!==-1&&s===n},Or=e=>{if(!e)return null;if(he(e))return e;let t=e.length;if(!Rn(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},Rr=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Ct(Uint8Array)),Tr=(e,t)=>{const s=(e&&e[Ge]).call(e);let r;for(;(r=s.next())&&!r.done;){const o=r.value;t.call(e,o[0],o[1])}},Nr=(e,t)=>{let n;const s=[];for(;(n=e.exec(t))!==null;)s.push(n);return s},Dr=H("HTMLFormElement"),kr=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,s,r){return s.toUpperCase()+r}),zt=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Ir=H("RegExp"),Dn=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),s={};Te(n,(r,o)=>{let a;(a=t(r,o,e))!==!1&&(s[o]=a||r)}),Object.defineProperties(e,s)},Fr=e=>{Dn(e,(t,n)=>{if(q(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const s=e[n];if(q(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Lr=(e,t)=>{const n={},s=r=>{r.forEach(o=>{n[o]=!0})};return he(e)?s(e):s(String(e).split(t)),n},jr=()=>{},Mr=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function _r(e){return!!(e&&q(e.append)&&e[xn]==="FormData"&&e[Ge])}const qr=e=>{const t=new Array(10),n=(s,r)=>{if(Re(s)){if(t.indexOf(s)>=0)return;if(Oe(s))return s;if(!("toJSON"in s)){t[r]=s;const o=he(s)?[]:{};return Te(s,(a,i)=>{const c=n(a,r+1);!pe(c)&&(o[i]=c)}),t[r]=void 0,o}}return s};return n(e,0)},Ur=H("AsyncFunction"),Br=e=>e&&(Re(e)||q(e))&&q(e.then)&&q(e.catch),kn=((e,t)=>e?setImmediate:t?((n,s)=>(oe.addEventListener("message",({source:r,data:o})=>{r===oe&&o===n&&s.length&&s.shift()()},!1),r=>{s.push(r),oe.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",q(oe.postMessage)),$r=typeof queueMicrotask<"u"?queueMicrotask.bind(oe):typeof process<"u"&&process.nextTick||kn,zr=e=>e!=null&&q(e[Ge]),d={isArray:he,isArrayBuffer:On,isBuffer:Oe,isFormData:mr,isArrayBufferView:ar,isString:ir,isNumber:Rn,isBoolean:cr,isObject:Re,isPlainObject:Ue,isEmptyObject:ur,isReadableStream:gr,isRequest:br,isResponse:vr,isHeaders:wr,isUndefined:pe,isDate:lr,isFile:dr,isBlob:fr,isRegExp:Ir,isFunction:q,isStream:hr,isURLSearchParams:yr,isTypedArray:Rr,isFileList:pr,forEach:Te,merge:mt,extend:Pr,trim:Sr,stripBOM:Ar,inherits:Er,toFlatObject:Cr,kindOf:Je,kindOfTest:H,endsWith:xr,toArray:Or,forEachEntry:Tr,matchAll:Nr,isHTMLForm:Dr,hasOwnProperty:zt,hasOwnProp:zt,reduceDescriptors:Dn,freezeMethods:Fr,toObjectSet:Lr,toCamelCase:kr,noop:jr,toFiniteNumber:Mr,findKey:Tn,global:oe,isContextDefined:Nn,isSpecCompliantForm:_r,toJSONObject:qr,isAsyncFn:Ur,isThenable:Br,setImmediate:kn,asap:$r,isIterable:zr};function E(e,t,n,s,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),s&&(this.request=s),r&&(this.response=r,this.status=r.status?r.status:null)}d.inherits(E,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:d.toJSONObject(this.config),code:this.code,status:this.status}}});const In=E.prototype,Fn={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Fn[e]={value:e}});Object.defineProperties(E,Fn);Object.defineProperty(In,"isAxiosError",{value:!0});E.from=(e,t,n,s,r,o)=>{const a=Object.create(In);d.toFlatObject(e,a,function(l){return l!==Error.prototype},u=>u!=="isAxiosError");const i=e&&e.message?e.message:"Error",c=t==null&&e?e.code:t;return E.call(a,i,c,n,s,r),e&&a.cause==null&&Object.defineProperty(a,"cause",{value:e,configurable:!0}),a.name=e&&e.name||"Error",o&&Object.assign(a,o),a};const Kr=null;function yt(e){return d.isPlainObject(e)||d.isArray(e)}function Ln(e){return d.endsWith(e,"[]")?e.slice(0,-2):e}function Kt(e,t,n){return e?e.concat(t).map(function(r,o){return r=Ln(r),!n&&o?"["+r+"]":r}).join(n?".":""):t}function Hr(e){return d.isArray(e)&&!e.some(yt)}const Vr=d.toFlatObject(d,{},null,function(t){return/^is[A-Z]/.test(t)});function Xe(e,t,n){if(!d.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=d.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,g){return!d.isUndefined(g[v])});const s=n.metaTokens,r=n.visitor||l,o=n.dots,a=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&d.isSpecCompliantForm(t);if(!d.isFunction(r))throw new TypeError("visitor must be a function");function u(m){if(m===null)return"";if(d.isDate(m))return m.toISOString();if(d.isBoolean(m))return m.toString();if(!c&&d.isBlob(m))throw new E("Blob is not supported. Use a Buffer instead.");return d.isArrayBuffer(m)||d.isTypedArray(m)?c&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function l(m,v,g){let O=m;if(m&&!g&&typeof m=="object"){if(d.endsWith(v,"{}"))v=s?v:v.slice(0,-2),m=JSON.stringify(m);else if(d.isArray(m)&&Hr(m)||(d.isFileList(m)||d.endsWith(v,"[]"))&&(O=d.toArray(m)))return v=Ln(v),O.forEach(function(R,I){!(d.isUndefined(R)||R===null)&&t.append(a===!0?Kt([v],I,o):a===null?v:v+"[]",u(R))}),!1}return yt(m)?!0:(t.append(Kt(g,v,o),u(m)),!1)}const h=[],w=Object.assign(Vr,{defaultVisitor:l,convertValue:u,isVisitable:yt});function A(m,v){if(!d.isUndefined(m)){if(h.indexOf(m)!==-1)throw Error("Circular reference detected in "+v.join("."));h.push(m),d.forEach(m,function(O,C){(!(d.isUndefined(O)||O===null)&&r.call(t,O,d.isString(C)?C.trim():C,v,w))===!0&&A(O,v?v.concat(C):[C])}),h.pop()}}if(!d.isObject(e))throw new TypeError("data must be an object");return A(e),t}function Ht(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function xt(e,t){this._pairs=[],e&&Xe(e,this,t)}const jn=xt.prototype;jn.append=function(t,n){this._pairs.push([t,n])};jn.toString=function(t){const n=t?function(s){return t.call(this,s,Ht)}:Ht;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function Qr(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Mn(e,t,n){if(!t)return e;const s=n&&n.encode||Qr;d.isFunction(n)&&(n={serialize:n});const r=n&&n.serialize;let o;if(r?o=r(t,n):o=d.isURLSearchParams(t)?t.toString():new xt(t,n).toString(s),o){const a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class Vt{constructor(){this.handlers=[]}use(t,n,s){return this.handlers.push({fulfilled:t,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){d.forEach(this.handlers,function(s){s!==null&&t(s)})}}const _n={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Wr=typeof URLSearchParams<"u"?URLSearchParams:xt,Gr=typeof FormData<"u"?FormData:null,Jr=typeof Blob<"u"?Blob:null,Yr={isBrowser:!0,classes:{URLSearchParams:Wr,FormData:Gr,Blob:Jr},protocols:["http","https","file","blob","url","data"]},Ot=typeof window<"u"&&typeof document<"u",gt=typeof navigator=="object"&&navigator||void 0,Xr=Ot&&(!gt||["ReactNative","NativeScript","NS"].indexOf(gt.product)<0),Zr=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",eo=Ot&&window.location.href||"http://localhost",to=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ot,hasStandardBrowserEnv:Xr,hasStandardBrowserWebWorkerEnv:Zr,navigator:gt,origin:eo},Symbol.toStringTag,{value:"Module"})),j={...to,...Yr};function no(e,t){return Xe(e,new j.classes.URLSearchParams,{visitor:function(n,s,r,o){return j.isNode&&d.isBuffer(n)?(this.append(s,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...t})}function so(e){return d.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function ro(e){const t={},n=Object.keys(e);let s;const r=n.length;let o;for(s=0;s<r;s++)o=n[s],t[o]=e[o];return t}function qn(e){function t(n,s,r,o){let a=n[o++];if(a==="__proto__")return!0;const i=Number.isFinite(+a),c=o>=n.length;return a=!a&&d.isArray(r)?r.length:a,c?(d.hasOwnProp(r,a)?r[a]=[r[a],s]:r[a]=s,!i):((!r[a]||!d.isObject(r[a]))&&(r[a]=[]),t(n,s,r[a],o)&&d.isArray(r[a])&&(r[a]=ro(r[a])),!i)}if(d.isFormData(e)&&d.isFunction(e.entries)){const n={};return d.forEachEntry(e,(s,r)=>{t(so(s),r,n,0)}),n}return null}function oo(e,t,n){if(d.isString(e))try{return(t||JSON.parse)(e),d.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(n||JSON.stringify)(e)}const Ne={transitional:_n,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const s=n.getContentType()||"",r=s.indexOf("application/json")>-1,o=d.isObject(t);if(o&&d.isHTMLForm(t)&&(t=new FormData(t)),d.isFormData(t))return r?JSON.stringify(qn(t)):t;if(d.isArrayBuffer(t)||d.isBuffer(t)||d.isStream(t)||d.isFile(t)||d.isBlob(t)||d.isReadableStream(t))return t;if(d.isArrayBufferView(t))return t.buffer;if(d.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let i;if(o){if(s.indexOf("application/x-www-form-urlencoded")>-1)return no(t,this.formSerializer).toString();if((i=d.isFileList(t))||s.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Xe(i?{"files[]":t}:t,c&&new c,this.formSerializer)}}return o||r?(n.setContentType("application/json",!1),oo(t)):t}],transformResponse:[function(t){const n=this.transitional||Ne.transitional,s=n&&n.forcedJSONParsing,r=this.responseType==="json";if(d.isResponse(t)||d.isReadableStream(t))return t;if(t&&d.isString(t)&&(s&&!this.responseType||r)){const a=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(t,this.parseReviver)}catch(i){if(a)throw i.name==="SyntaxError"?E.from(i,E.ERR_BAD_RESPONSE,this,null,this.response):i}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:j.classes.FormData,Blob:j.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};d.forEach(["delete","get","head","post","put","patch"],e=>{Ne.headers[e]={}});const ao=d.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),io=e=>{const t={};let n,s,r;return e&&e.split(`
`).forEach(function(a){r=a.indexOf(":"),n=a.substring(0,r).trim().toLowerCase(),s=a.substring(r+1).trim(),!(!n||t[n]&&ao[n])&&(n==="set-cookie"?t[n]?t[n].push(s):t[n]=[s]:t[n]=t[n]?t[n]+", "+s:s)}),t},Qt=Symbol("internals");function Pe(e){return e&&String(e).trim().toLowerCase()}function Be(e){return e===!1||e==null?e:d.isArray(e)?e.map(Be):String(e)}function co(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(e);)t[s[1]]=s[2];return t}const uo=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function ot(e,t,n,s,r){if(d.isFunction(s))return s.call(this,t,n);if(r&&(t=n),!!d.isString(t)){if(d.isString(s))return t.indexOf(s)!==-1;if(d.isRegExp(s))return s.test(t)}}function lo(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,s)=>n.toUpperCase()+s)}function fo(e,t){const n=d.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+n,{value:function(r,o,a){return this[s].call(this,t,r,o,a)},configurable:!0})})}let U=class{constructor(t){t&&this.set(t)}set(t,n,s){const r=this;function o(i,c,u){const l=Pe(c);if(!l)throw new Error("header name must be a non-empty string");const h=d.findKey(r,l);(!h||r[h]===void 0||u===!0||u===void 0&&r[h]!==!1)&&(r[h||c]=Be(i))}const a=(i,c)=>d.forEach(i,(u,l)=>o(u,l,c));if(d.isPlainObject(t)||t instanceof this.constructor)a(t,n);else if(d.isString(t)&&(t=t.trim())&&!uo(t))a(io(t),n);else if(d.isObject(t)&&d.isIterable(t)){let i={},c,u;for(const l of t){if(!d.isArray(l))throw TypeError("Object iterator must return a key-value pair");i[u=l[0]]=(c=i[u])?d.isArray(c)?[...c,l[1]]:[c,l[1]]:l[1]}a(i,n)}else t!=null&&o(n,t,s);return this}get(t,n){if(t=Pe(t),t){const s=d.findKey(this,t);if(s){const r=this[s];if(!n)return r;if(n===!0)return co(r);if(d.isFunction(n))return n.call(this,r,s);if(d.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Pe(t),t){const s=d.findKey(this,t);return!!(s&&this[s]!==void 0&&(!n||ot(this,this[s],s,n)))}return!1}delete(t,n){const s=this;let r=!1;function o(a){if(a=Pe(a),a){const i=d.findKey(s,a);i&&(!n||ot(s,s[i],i,n))&&(delete s[i],r=!0)}}return d.isArray(t)?t.forEach(o):o(t),r}clear(t){const n=Object.keys(this);let s=n.length,r=!1;for(;s--;){const o=n[s];(!t||ot(this,this[o],o,t,!0))&&(delete this[o],r=!0)}return r}normalize(t){const n=this,s={};return d.forEach(this,(r,o)=>{const a=d.findKey(s,o);if(a){n[a]=Be(r),delete n[o];return}const i=t?lo(o):String(o).trim();i!==o&&delete n[o],n[i]=Be(r),s[i]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return d.forEach(this,(s,r)=>{s!=null&&s!==!1&&(n[r]=t&&d.isArray(s)?s.join(", "):s)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const s=new this(t);return n.forEach(r=>s.set(r)),s}static accessor(t){const s=(this[Qt]=this[Qt]={accessors:{}}).accessors,r=this.prototype;function o(a){const i=Pe(a);s[i]||(fo(r,a),s[i]=!0)}return d.isArray(t)?t.forEach(o):o(t),this}};U.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);d.reduceDescriptors(U.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[n]=s}}});d.freezeMethods(U);function at(e,t){const n=this||Ne,s=t||n,r=U.from(s.headers);let o=s.data;return d.forEach(e,function(i){o=i.call(n,o,r.normalize(),t?t.status:void 0)}),r.normalize(),o}function Un(e){return!!(e&&e.__CANCEL__)}function me(e,t,n){E.call(this,e??"canceled",E.ERR_CANCELED,t,n),this.name="CanceledError"}d.inherits(me,E,{__CANCEL__:!0});function Bn(e,t,n){const s=n.config.validateStatus;!n.status||!s||s(n.status)?e(n):t(new E("Request failed with status code "+n.status,[E.ERR_BAD_REQUEST,E.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function po(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function ho(e,t){e=e||10;const n=new Array(e),s=new Array(e);let r=0,o=0,a;return t=t!==void 0?t:1e3,function(c){const u=Date.now(),l=s[o];a||(a=u),n[r]=c,s[r]=u;let h=o,w=0;for(;h!==r;)w+=n[h++],h=h%e;if(r=(r+1)%e,r===o&&(o=(o+1)%e),u-a<t)return;const A=l&&u-l;return A?Math.round(w*1e3/A):void 0}}function mo(e,t){let n=0,s=1e3/t,r,o;const a=(u,l=Date.now())=>{n=l,r=null,o&&(clearTimeout(o),o=null),e(...u)};return[(...u)=>{const l=Date.now(),h=l-n;h>=s?a(u,l):(r=u,o||(o=setTimeout(()=>{o=null,a(r)},s-h)))},()=>r&&a(r)]}const Ke=(e,t,n=3)=>{let s=0;const r=ho(50,250);return mo(o=>{const a=o.loaded,i=o.lengthComputable?o.total:void 0,c=a-s,u=r(c),l=a<=i;s=a;const h={loaded:a,total:i,progress:i?a/i:void 0,bytes:c,rate:u||void 0,estimated:u&&i&&l?(i-a)/u:void 0,event:o,lengthComputable:i!=null,[t?"download":"upload"]:!0};e(h)},n)},Wt=(e,t)=>{const n=e!=null;return[s=>t[0]({lengthComputable:n,total:e,loaded:s}),t[1]]},Gt=e=>(...t)=>d.asap(()=>e(...t)),yo=j.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,j.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(j.origin),j.navigator&&/(msie|trident)/i.test(j.navigator.userAgent)):()=>!0,go=j.hasStandardBrowserEnv?{write(e,t,n,s,r,o){const a=[e+"="+encodeURIComponent(t)];d.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),d.isString(s)&&a.push("path="+s),d.isString(r)&&a.push("domain="+r),o===!0&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function bo(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function vo(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function $n(e,t,n){let s=!bo(t);return e&&(s||n==!1)?vo(e,t):t}const Jt=e=>e instanceof U?{...e}:e;function ce(e,t){t=t||{};const n={};function s(u,l,h,w){return d.isPlainObject(u)&&d.isPlainObject(l)?d.merge.call({caseless:w},u,l):d.isPlainObject(l)?d.merge({},l):d.isArray(l)?l.slice():l}function r(u,l,h,w){if(d.isUndefined(l)){if(!d.isUndefined(u))return s(void 0,u,h,w)}else return s(u,l,h,w)}function o(u,l){if(!d.isUndefined(l))return s(void 0,l)}function a(u,l){if(d.isUndefined(l)){if(!d.isUndefined(u))return s(void 0,u)}else return s(void 0,l)}function i(u,l,h){if(h in t)return s(u,l);if(h in e)return s(void 0,u)}const c={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:i,headers:(u,l,h)=>r(Jt(u),Jt(l),h,!0)};return d.forEach(Object.keys({...e,...t}),function(l){const h=c[l]||r,w=h(e[l],t[l],l);d.isUndefined(w)&&h!==i||(n[l]=w)}),n}const zn=e=>{const t=ce({},e);let{data:n,withXSRFToken:s,xsrfHeaderName:r,xsrfCookieName:o,headers:a,auth:i}=t;if(t.headers=a=U.from(a),t.url=Mn($n(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),i&&a.set("Authorization","Basic "+btoa((i.username||"")+":"+(i.password?unescape(encodeURIComponent(i.password)):""))),d.isFormData(n)){if(j.hasStandardBrowserEnv||j.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(d.isFunction(n.getHeaders)){const c=n.getHeaders(),u=["content-type","content-length"];Object.entries(c).forEach(([l,h])=>{u.includes(l.toLowerCase())&&a.set(l,h)})}}if(j.hasStandardBrowserEnv&&(s&&d.isFunction(s)&&(s=s(t)),s||s!==!1&&yo(t.url))){const c=r&&o&&go.read(o);c&&a.set(r,c)}return t},wo=typeof XMLHttpRequest<"u",So=wo&&function(e){return new Promise(function(n,s){const r=zn(e);let o=r.data;const a=U.from(r.headers).normalize();let{responseType:i,onUploadProgress:c,onDownloadProgress:u}=r,l,h,w,A,m;function v(){A&&A(),m&&m(),r.cancelToken&&r.cancelToken.unsubscribe(l),r.signal&&r.signal.removeEventListener("abort",l)}let g=new XMLHttpRequest;g.open(r.method.toUpperCase(),r.url,!0),g.timeout=r.timeout;function O(){if(!g)return;const R=U.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),D={data:!i||i==="text"||i==="json"?g.responseText:g.response,status:g.status,statusText:g.statusText,headers:R,config:e,request:g};Bn(function(_){n(_),v()},function(_){s(_),v()},D),g=null}"onloadend"in g?g.onloadend=O:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(O)},g.onabort=function(){g&&(s(new E("Request aborted",E.ECONNABORTED,e,g)),g=null)},g.onerror=function(I){const D=I&&I.message?I.message:"Network Error",$=new E(D,E.ERR_NETWORK,e,g);$.event=I||null,s($),g=null},g.ontimeout=function(){let I=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const D=r.transitional||_n;r.timeoutErrorMessage&&(I=r.timeoutErrorMessage),s(new E(I,D.clarifyTimeoutError?E.ETIMEDOUT:E.ECONNABORTED,e,g)),g=null},o===void 0&&a.setContentType(null),"setRequestHeader"in g&&d.forEach(a.toJSON(),function(I,D){g.setRequestHeader(D,I)}),d.isUndefined(r.withCredentials)||(g.withCredentials=!!r.withCredentials),i&&i!=="json"&&(g.responseType=r.responseType),u&&([w,m]=Ke(u,!0),g.addEventListener("progress",w)),c&&g.upload&&([h,A]=Ke(c),g.upload.addEventListener("progress",h),g.upload.addEventListener("loadend",A)),(r.cancelToken||r.signal)&&(l=R=>{g&&(s(!R||R.type?new me(null,e,g):R),g.abort(),g=null)},r.cancelToken&&r.cancelToken.subscribe(l),r.signal&&(r.signal.aborted?l():r.signal.addEventListener("abort",l)));const C=po(r.url);if(C&&j.protocols.indexOf(C)===-1){s(new E("Unsupported protocol "+C+":",E.ERR_BAD_REQUEST,e));return}g.send(o||null)})},Po=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let s=new AbortController,r;const o=function(u){if(!r){r=!0,i();const l=u instanceof Error?u:this.reason;s.abort(l instanceof E?l:new me(l instanceof Error?l.message:l))}};let a=t&&setTimeout(()=>{a=null,o(new E(`timeout ${t} of ms exceeded`,E.ETIMEDOUT))},t);const i=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(o):u.removeEventListener("abort",o)}),e=null)};e.forEach(u=>u.addEventListener("abort",o));const{signal:c}=s;return c.unsubscribe=()=>d.asap(i),c}},Ao=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let s=0,r;for(;s<n;)r=s+t,yield e.slice(s,r),s=r},Eo=async function*(e,t){for await(const n of Co(e))yield*Ao(n,t)},Co=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:s}=await t.read();if(n)break;yield s}}finally{await t.cancel()}},Yt=(e,t,n,s)=>{const r=Eo(e,t);let o=0,a,i=c=>{a||(a=!0,s&&s(c))};return new ReadableStream({async pull(c){try{const{done:u,value:l}=await r.next();if(u){i(),c.close();return}let h=l.byteLength;if(n){let w=o+=h;n(w)}c.enqueue(new Uint8Array(l))}catch(u){throw i(u),u}},cancel(c){return i(c),r.return()}},{highWaterMark:2})},Xt=64*1024,{isFunction:qe}=d,xo=(({Request:e,Response:t})=>({Request:e,Response:t}))(d.global),{ReadableStream:Zt,TextEncoder:en}=d.global,tn=(e,...t)=>{try{return!!e(...t)}catch{return!1}},Oo=e=>{e=d.merge.call({skipUndefined:!0},xo,e);const{fetch:t,Request:n,Response:s}=e,r=t?qe(t):typeof fetch=="function",o=qe(n),a=qe(s);if(!r)return!1;const i=r&&qe(Zt),c=r&&(typeof en=="function"?(m=>v=>m.encode(v))(new en):async m=>new Uint8Array(await new n(m).arrayBuffer())),u=o&&i&&tn(()=>{let m=!1;const v=new n(j.origin,{body:new Zt,method:"POST",get duplex(){return m=!0,"half"}}).headers.has("Content-Type");return m&&!v}),l=a&&i&&tn(()=>d.isReadableStream(new s("").body)),h={stream:l&&(m=>m.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(m=>{!h[m]&&(h[m]=(v,g)=>{let O=v&&v[m];if(O)return O.call(v);throw new E(`Response type '${m}' is not supported`,E.ERR_NOT_SUPPORT,g)})});const w=async m=>{if(m==null)return 0;if(d.isBlob(m))return m.size;if(d.isSpecCompliantForm(m))return(await new n(j.origin,{method:"POST",body:m}).arrayBuffer()).byteLength;if(d.isArrayBufferView(m)||d.isArrayBuffer(m))return m.byteLength;if(d.isURLSearchParams(m)&&(m=m+""),d.isString(m))return(await c(m)).byteLength},A=async(m,v)=>{const g=d.toFiniteNumber(m.getContentLength());return g??w(v)};return async m=>{let{url:v,method:g,data:O,signal:C,cancelToken:R,timeout:I,onDownloadProgress:D,onUploadProgress:$,responseType:_,headers:M,withCredentials:V="same-origin",fetchOptions:ge}=zn(m),Q=t||fetch;_=_?(_+"").toLowerCase():"text";let se=Po([C,R&&R.toAbortSignal()],I),X=null;const W=se&&se.unsubscribe&&(()=>{se.unsubscribe()});let be;try{if($&&u&&g!=="get"&&g!=="head"&&(be=await A(M,O))!==0){let G=new n(v,{method:"POST",body:O,duplex:"half"}),Z;if(d.isFormData(O)&&(Z=G.headers.get("content-type"))&&M.setContentType(Z),G.body){const[ve,le]=Wt(be,Ke(Gt($)));O=Yt(G.body,Xt,ve,le)}}d.isString(V)||(V=V?"include":"omit");const B=o&&"credentials"in n.prototype,re={...ge,signal:se,method:g.toUpperCase(),headers:M.normalize().toJSON(),body:O,duplex:"half",credentials:B?V:void 0};X=o&&new n(v,re);let z=await(o?Q(X,ge):Q(v,re));const ke=l&&(_==="stream"||_==="response");if(l&&(D||ke&&W)){const G={};["status","statusText","headers"].forEach(Fe=>{G[Fe]=z[Fe]});const Z=d.toFiniteNumber(z.headers.get("content-length")),[ve,le]=D&&Wt(Z,Ke(Gt(D),!0))||[];z=new s(Yt(z.body,Xt,ve,()=>{le&&le(),W&&W()}),G)}_=_||"text";let Ie=await h[d.findKey(h,_)||"text"](z,m);return!ke&&W&&W(),await new Promise((G,Z)=>{Bn(G,Z,{data:Ie,headers:U.from(z.headers),status:z.status,statusText:z.statusText,config:m,request:X})})}catch(B){throw W&&W(),B&&B.name==="TypeError"&&/Load failed|fetch/i.test(B.message)?Object.assign(new E("Network Error",E.ERR_NETWORK,m,X),{cause:B.cause||B}):E.from(B,B&&B.code,m,X)}}},Ro=new Map,Kn=e=>{let t=e?e.env:{};const{fetch:n,Request:s,Response:r}=t,o=[s,r,n];let a=o.length,i=a,c,u,l=Ro;for(;i--;)c=o[i],u=l.get(c),u===void 0&&l.set(c,u=i?new Map:Oo(t)),l=u;return u};Kn();const bt={http:Kr,xhr:So,fetch:{get:Kn}};d.forEach(bt,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const nn=e=>`- ${e}`,To=e=>d.isFunction(e)||e===null||e===!1,Hn={getAdapter:(e,t)=>{e=d.isArray(e)?e:[e];const{length:n}=e;let s,r;const o={};for(let a=0;a<n;a++){s=e[a];let i;if(r=s,!To(s)&&(r=bt[(i=String(s)).toLowerCase()],r===void 0))throw new E(`Unknown adapter '${i}'`);if(r&&(d.isFunction(r)||(r=r.get(t))))break;o[i||"#"+a]=r}if(!r){const a=Object.entries(o).map(([c,u])=>`adapter ${c} `+(u===!1?"is not supported by the environment":"is not available in the build"));let i=n?a.length>1?`since :
`+a.map(nn).join(`
`):" "+nn(a[0]):"as no adapter specified";throw new E("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return r},adapters:bt};function it(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new me(null,e)}function sn(e){return it(e),e.headers=U.from(e.headers),e.data=at.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Hn.getAdapter(e.adapter||Ne.adapter,e)(e).then(function(s){return it(e),s.data=at.call(e,e.transformResponse,s),s.headers=U.from(s.headers),s},function(s){return Un(s)||(it(e),s&&s.response&&(s.response.data=at.call(e,e.transformResponse,s.response),s.response.headers=U.from(s.response.headers))),Promise.reject(s)})}const Vn="1.12.2",Ze={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Ze[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const rn={};Ze.transitional=function(t,n,s){function r(o,a){return"[Axios v"+Vn+"] Transitional option '"+o+"'"+a+(s?". "+s:"")}return(o,a,i)=>{if(t===!1)throw new E(r(a," has been removed"+(n?" in "+n:"")),E.ERR_DEPRECATED);return n&&!rn[a]&&(rn[a]=!0,console.warn(r(a," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(o,a,i):!0}};Ze.spelling=function(t){return(n,s)=>(console.warn(`${s} is likely a misspelling of ${t}`),!0)};function No(e,t,n){if(typeof e!="object")throw new E("options must be an object",E.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let r=s.length;for(;r-- >0;){const o=s[r],a=t[o];if(a){const i=e[o],c=i===void 0||a(i,o,e);if(c!==!0)throw new E("option "+o+" must be "+c,E.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new E("Unknown option "+o,E.ERR_BAD_OPTION)}}const $e={assertOptions:No,validators:Ze},J=$e.validators;let ae=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Vt,response:new Vt}}async request(t,n){try{return await this._request(t,n)}catch(s){if(s instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const o=r.stack?r.stack.replace(/^.+\n/,""):"";try{s.stack?o&&!String(s.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+o):s.stack=o}catch{}}throw s}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=ce(this.defaults,n);const{transitional:s,paramsSerializer:r,headers:o}=n;s!==void 0&&$e.assertOptions(s,{silentJSONParsing:J.transitional(J.boolean),forcedJSONParsing:J.transitional(J.boolean),clarifyTimeoutError:J.transitional(J.boolean)},!1),r!=null&&(d.isFunction(r)?n.paramsSerializer={serialize:r}:$e.assertOptions(r,{encode:J.function,serialize:J.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),$e.assertOptions(n,{baseUrl:J.spelling("baseURL"),withXsrfToken:J.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=o&&d.merge(o.common,o[n.method]);o&&d.forEach(["delete","get","head","post","put","patch","common"],m=>{delete o[m]}),n.headers=U.concat(a,o);const i=[];let c=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(n)===!1||(c=c&&v.synchronous,i.unshift(v.fulfilled,v.rejected))});const u=[];this.interceptors.response.forEach(function(v){u.push(v.fulfilled,v.rejected)});let l,h=0,w;if(!c){const m=[sn.bind(this),void 0];for(m.unshift(...i),m.push(...u),w=m.length,l=Promise.resolve(n);h<w;)l=l.then(m[h++],m[h++]);return l}w=i.length;let A=n;for(;h<w;){const m=i[h++],v=i[h++];try{A=m(A)}catch(g){v.call(this,g);break}}try{l=sn.call(this,A)}catch(m){return Promise.reject(m)}for(h=0,w=u.length;h<w;)l=l.then(u[h++],u[h++]);return l}getUri(t){t=ce(this.defaults,t);const n=$n(t.baseURL,t.url,t.allowAbsoluteUrls);return Mn(n,t.params,t.paramsSerializer)}};d.forEach(["delete","get","head","options"],function(t){ae.prototype[t]=function(n,s){return this.request(ce(s||{},{method:t,url:n,data:(s||{}).data}))}});d.forEach(["post","put","patch"],function(t){function n(s){return function(o,a,i){return this.request(ce(i||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:o,data:a}))}}ae.prototype[t]=n(),ae.prototype[t+"Form"]=n(!0)});let Do=class Qn{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const s=this;this.promise.then(r=>{if(!s._listeners)return;let o=s._listeners.length;for(;o-- >0;)s._listeners[o](r);s._listeners=null}),this.promise.then=r=>{let o;const a=new Promise(i=>{s.subscribe(i),o=i}).then(r);return a.cancel=function(){s.unsubscribe(o)},a},t(function(o,a,i){s.reason||(s.reason=new me(o,a,i),n(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=s=>{t.abort(s)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new Qn(function(r){t=r}),cancel:t}}};function ko(e){return function(n){return e.apply(null,n)}}function Io(e){return d.isObject(e)&&e.isAxiosError===!0}const vt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(vt).forEach(([e,t])=>{vt[t]=e});function Wn(e){const t=new ae(e),n=Cn(ae.prototype.request,t);return d.extend(n,ae.prototype,t,{allOwnKeys:!0}),d.extend(n,t,null,{allOwnKeys:!0}),n.create=function(r){return Wn(ce(e,r))},n}const k=Wn(Ne);k.Axios=ae;k.CanceledError=me;k.CancelToken=Do;k.isCancel=Un;k.VERSION=Vn;k.toFormData=Xe;k.AxiosError=E;k.Cancel=k.CanceledError;k.all=function(t){return Promise.all(t)};k.spread=ko;k.isAxiosError=Io;k.mergeConfig=ce;k.AxiosHeaders=U;k.formToJSON=e=>qn(d.isHTMLForm(e)?new FormData(e):e);k.getAdapter=Hn.getAdapter;k.HttpStatusCode=vt;k.default=k;const{Axios:Si,AxiosError:Pi,CanceledError:Ai,isCancel:Ei,CancelToken:Ci,VERSION:xi,all:Oi,Cancel:Ri,isAxiosError:Ti,spread:Ni,toFormData:Di,AxiosHeaders:ki,HttpStatusCode:Ii,formToJSON:Fi,getAdapter:Li,mergeConfig:ji}=k,Fo="http://localhost:8081",et="00000000-0000-0000-0000-000000000001",Rt="admin@dev.local",Gn="Admin1234",Lo="dev-session-token",Jn="dev-session-refresh-token",tt=et,jo=["admin"],Mo=["sales","purchases","inventory","customers","suppliers","finances","reports","settings"],on=globalThis.structuredClone;function _o(e){return typeof on=="function"?on(e):JSON.parse(JSON.stringify(e))}let He=!1;function Yn(e){He?console.info(`[API] Using offline demo data for ${e}.`):(He=!0,console.warn(`[API] Network unreachable during ${e}. Switching to in-memory demo data so the workspace keeps working.`))}function an(e){return _o(e)}function Xn(e){return Array.isArray(e)?e:[]}function qo(e){if(typeof e!="string")return null;const t=e.match(/filename\*=UTF-8''([^;]+)/i);if(t&&t[1])try{return decodeURIComponent(t[1])}catch(s){console.warn("[API] Failed to decode UTF-8 filename",s)}const n=e.match(/filename="?([^";]+)"?/i);return n&&n[1]?n[1]:null}function Zn(e,t){const n=e.data,s=typeof n?.type=="string"&&n.type?n.type:void 0,r=typeof e.headers["content-type"]=="string"?e.headers["content-type"]:void 0,o=s||r||"application/octet-stream",a=qo(e.headers["content-disposition"])||t;return{blob:n,filename:a,mimeType:o}}function Tt(e,t){const n=t==="preview"?"Vista previa no disponible":"Descarga no disponible",r=`<!DOCTYPE html><html lang="es"><head><meta charset="utf-8" /><title>${n}</title></head><body><main style="font-family:system-ui,sans-serif;padding:24px;max-width:640px;margin:auto;"><h1 style="margin-bottom:16px;">${n}</h1><p style="margin-bottom:16px;">${t==="preview"?"No hay contenido disponible sin conexin para mostrar este documento.":"No hay archivo disponible para descargar sin conexin."}</p><p style="color:#555;">Documento: ${e}</p></main></body></html>`;return{blob:new Blob([r],{type:"text/html"}),filename:`${t}-documento-${e}.html`,mimeType:"text/html"}}const es="offline://document";function cn(e,t){return`${es}/${t}/${encodeURIComponent(e)}`}function Uo(e){if(typeof e!="string"||!e.startsWith(es))return null;const t=e.split("/");if(t.length<4)return null;const n=t[2],s=decodeURIComponent(t.slice(3).join("/"));return n!=="LOCAL"&&n!=="OFFICIAL"||!s?null:{id:s,version:n}}function Bo(e){return{localPdf:cn(e,"LOCAL"),officialPdf:cn(e,"OFFICIAL")}}const $o=new Date,x=e=>e.toISOString();function N(e){const t=new Date($o);return t.setDate(t.getDate()-e),t}const p={companies:[{id:"cmp-demo-001",businessName:"Demo Comercial SpA",rut:"76.123.456-0",businessActivity:"Retail",address:"Av. Siempre Viva 742, Santiago",commune:"Providencia",phone:"+56 2 2345 6677",email:"contacto@democomercial.cl",receiptFooterMessage:"Gracias por tu compra!",createdAt:x(N(180)),updatedAt:x(N(20))},{id:"cmp-demo-002",businessName:"Servicios Norte Ltda.",rut:"77.987.654-3",businessActivity:"Servicios",address:"Av. Costanera 1200, Antofagasta",commune:"Antofagasta",phone:"+56 55 278 9900",email:"administracion@serviciosnorte.cl",receiptFooterMessage:"Servicio garantizado",createdAt:x(N(95)),updatedAt:x(N(10))},{id:"cmp-demo-003",businessName:"Distribuidora Andina",rut:"78.321.654-K",businessActivity:"Logstica",address:"Camino a Melipilla 15000, Maip",commune:"Maip",phone:"+56 2 2388 1122",email:"ventas@andina.cl",receiptFooterMessage:"Despachos en 24 horas",createdAt:x(N(45)),updatedAt:x(N(3))}],userAccounts:[{id:"usr-demo-001",email:Rt,name:"Dev Admin",role:"admin",status:"active",roles:["ROLE_ADMIN"],createdAt:x(N(120)),password:Gn},{id:"usr-demo-002",email:"ventas@dev.local",name:"Vendedora Demo",role:"sales",status:"active",roles:["ROLE_SALES","ROLE_REPORTS"],createdAt:x(N(45)),password:"Ventas123"}],products:[{id:"prd-demo-001",sku:"SKU-1001",name:"Caf en grano premium 1Kg",description:"Tueste medio alto, origen Colombia",category:"Alimentos",barcode:"7800001001002",currentPrice:11990,imageUrl:void 0,qrUrl:void 0,stock:120,criticalStock:40,active:!0},{id:"prd-demo-002",sku:"SKU-1002",name:"Azcar orgnica 1Kg",description:"Certificada comercio justo",category:"Alimentos",barcode:"7800001002001",currentPrice:3290,imageUrl:void 0,qrUrl:void 0,stock:68,criticalStock:25,active:!0},{id:"prd-demo-003",sku:"SKU-2040",name:"Vasos biodegradables 12oz (pack 50)",description:"Pulpa de caa, compostable",category:"Insumos",barcode:"7801234567005",currentPrice:8990,imageUrl:void 0,qrUrl:void 0,stock:22,criticalStock:30,active:!0},{id:"prd-demo-004",sku:"SKU-3055",name:"Botella vidrio reusable 600ml",description:"Incluye funda trmica",category:"Retail",barcode:"7801231234568",currentPrice:7490,imageUrl:void 0,qrUrl:void 0,stock:6,criticalStock:15,active:!1}],productPrices:{"prd-demo-001":[{id:"pp-001",productId:"prd-demo-001",price:10990,validFrom:x(N(90))},{id:"pp-002",productId:"prd-demo-001",price:11990,validFrom:x(N(28))}],"prd-demo-002":[{id:"pp-003",productId:"prd-demo-002",price:2990,validFrom:x(N(120))},{id:"pp-004",productId:"prd-demo-002",price:3290,validFrom:x(N(32))}],"prd-demo-003":[{id:"pp-005",productId:"prd-demo-003",price:8990,validFrom:x(N(62))}],"prd-demo-004":[{id:"pp-006",productId:"prd-demo-004",price:7490,validFrom:x(N(200))}]},suppliers:[{id:"sup-demo-001",name:"Proveedor Andes",rut:"76.555.111-1",businessActivity:"Distribucin de alimentos",address:"Av. Los Leones 1200, Providencia",commune:"Providencia",phone:"+56 2 2456 7788",email:"ventas@proveedorandes.cl",createdAt:x(N(140))},{id:"sup-demo-002",name:"Granos Latino",rut:"77.444.333-2",businessActivity:"Importacin de granos",address:"Camino a Noviciado 2345, Pudahuel",commune:"Pudahuel",phone:"+56 2 2988 1100",email:"contacto@granoslatino.cl",createdAt:x(N(60))},{id:"sup-demo-003",name:"Eco Packaging",rut:"79.222.888-5",businessActivity:"Envases sustentables",address:"Av. Repblica 980, Santiago",commune:"Santiago",phone:"+56 2 2311 4455",email:"ventas@ecopackaging.cl",createdAt:x(N(12))}],customers:[{id:"cus-demo-001",name:"Cafetera Plaza",address:"Av. Providencia 1234, Santiago",lat:-33.4263,lng:-70.6209,phone:"+56 2 2345 6677",email:"contacto@cafeteriaplaza.cl",segment:"HORECA",document:"76.123.456-0",commune:"Providencia"},{id:"cus-demo-002",name:"MiniMarket Central",address:"Av. Alemania 890, Temuco",phone:"+56 45 212 3344",email:"compras@mmcentral.cl",segment:"Retail",document:"77.987.654-3",commune:"Temuco"},{id:"cus-demo-003",name:"Corporacin Sur",address:"Los Carrera 450, Concepcin",phone:"+56 41 276 0011",email:"abastecimiento@corsur.cl",segment:"Empresas",document:"59.456.789-1",commune:"Concepcin"},{id:"cus-demo-004",name:"Coffeelab Boutique",address:"Av. Peru 345, Antofagasta",phone:"+56 55 284 9988",email:"ventas@coffeelab.cl",segment:"HORECA",document:"65.432.109-4",commune:"Antofagasta"},{id:"cus-demo-005",name:"Vecinos Gourmet",address:"Av. Italia 987, Santiago",phone:"+56 2 2567 7789",email:"hola@vecinosgourmet.cl",document:"79.321.654-2",commune:"Providencia"}],sales:[{id:"sal-demo-001",customerId:"cus-demo-001",customerName:"Cafetera Plaza",docNumber:"F-1200",docType:"Factura",paymentMethod:"transferencia",status:"emitida",net:95e4,vat:180500,total:1130500,issuedAt:x(N(2))},{id:"sal-demo-002",customerId:"cus-demo-004",customerName:"Coffeelab Boutique",docNumber:"B-2301",docType:"Boleta",paymentMethod:"tarjeta",status:"emitida",net:28e4,vat:53200,total:333200,issuedAt:x(N(4))},{id:"sal-demo-003",customerId:"cus-demo-002",customerName:"MiniMarket Central",docNumber:"F-4502",docType:"Factura",paymentMethod:"credito",status:"cancelled",net:41e4,vat:77900,total:487900,issuedAt:x(N(9))}],saleDetails:{"sal-demo-001":{id:"sal-demo-001",issuedAt:x(N(2)),docType:"Factura",docNumber:"F-1200",paymentMethod:"transferencia",status:"emitida",customer:{id:"cus-demo-001",name:"Cafetera Plaza"},items:[{productId:"prd-demo-001",productName:"Caf en grano premium 1Kg",qty:80,unitPrice:11990,discount:0,lineTotal:959200},{productId:"prd-demo-003",productName:"Vasos biodegradables 12oz (pack 50)",qty:50,unitPrice:8990,discount:0,lineTotal:449500}],net:95e4,vat:180500,total:1130500,thermalTicket:`PYMERP
Venta sal-demo-001
Cliente: Cafetera Plaza
Total: $1.130.500
Gracias por su compra`},"sal-demo-002":{id:"sal-demo-002",issuedAt:x(N(4)),docType:"Boleta",docNumber:"B-2301",paymentMethod:"tarjeta",status:"emitida",customer:{id:"cus-demo-004",name:"Coffeelab Boutique"},items:[{productId:"prd-demo-001",productName:"Caf en grano premium 1Kg",qty:20,unitPrice:11990,discount:0,lineTotal:239800},{productId:"prd-demo-002",productName:"Azcar orgnica 1Kg",qty:40,unitPrice:3290,discount:0,lineTotal:131600}],net:28e4,vat:53200,total:333200,thermalTicket:`PYMERP
Venta sal-demo-002
Total: $333.200
Emitida con POS`},"sal-demo-003":{id:"sal-demo-003",issuedAt:x(N(9)),docType:"Factura",docNumber:"F-4502",paymentMethod:"credito",status:"cancelled",customer:{id:"cus-demo-002",name:"MiniMarket Central"},items:[{productId:"prd-demo-003",productName:"Vasos biodegradables 12oz (pack 50)",qty:25,unitPrice:8990,discount:0,lineTotal:224750},{productId:"prd-demo-002",productName:"Azcar orgnica 1Kg",qty:60,unitPrice:3290,discount:0,lineTotal:197400}],net:41e4,vat:77900,total:487900,thermalTicket:`PYMERP
Venta sal-demo-003
ESTADO: Cancelada`}},purchases:[{id:"pur-demo-001",supplierId:"sup-demo-001",supplierName:"Proveedor Andes",docType:"Factura",docNumber:"F-4432",status:"received",net:54e4,vat:102600,total:642600,issuedAt:x(N(6))},{id:"pur-demo-002",supplierId:"sup-demo-003",supplierName:"Eco Packaging",docType:"Factura",docNumber:"F-8891",status:"received",net:215e3,vat:40850,total:255850,issuedAt:x(N(11))},{id:"pur-demo-003",supplierId:"sup-demo-002",supplierName:"Granos Latino",docType:"Factura",docNumber:"F-5501",status:"cancelled",net:18e4,vat:34200,total:214200,issuedAt:x(N(18))}],inventorySummary:{totalValue:1585e3,activeProducts:3,inactiveProducts:1,totalProducts:4,lowStockAlerts:2,lowStockThreshold:12},inventoryAlerts:[{lotId:"lot-demo-001",productId:"prd-demo-002",qtyAvailable:8,createdAt:x(N(1)),expDate:x(N(-60))},{lotId:"lot-demo-002",productId:"prd-demo-003",qtyAvailable:5,createdAt:x(N(3)),expDate:x(N(-120))}],inventorySettings:{lowStockThreshold:12,updatedAt:x(N(5))},salesDaily:Array.from({length:14}).map((e,t)=>{const n=13-t,s=35e4+t%5*42e3;return{date:x(N(n)).slice(0,10),total:s,count:4+t%3}}),purchaseDaily:Array.from({length:14}).map((e,t)=>{const n=13-t,s=22e4+t%4*38e3;return{date:x(N(n)).slice(0,10),total:s,count:2+t%2}})};function ne(e){return`${e}-${Math.random().toString(36).slice(2,10)}`}function F(e){return e?.toLowerCase().normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"")??""}function nt(e,t){return t?e?F(e).includes(t):!1:!0}function ye(e,t=0,n=20){const s=n>0?n:20,r=t*s,o=e.slice(r,r+s),a=e.length,i=s>0?Math.ceil(a/s):0;return{content:o,totalElements:a,totalPages:i,size:s,number:t,hasNext:i>0?t+1<i:!1}}function b(e,t,n){return He?Promise.resolve(an(n())):t().catch(s=>{if(st(s))return Yn(e),an(n());throw s})}function De(e,t,n){return He?(n(),Promise.resolve()):t().catch(s=>{if(st(s)){Yn(e),n();return}throw s})}function ue(){const e=p.products.filter(t=>t.active).length;p.inventorySummary={totalValue:Number(p.inventorySummary.totalValue)||0,activeProducts:e,inactiveProducts:p.products.length-e,totalProducts:p.products.length,lowStockAlerts:p.inventoryAlerts.length,lowStockThreshold:p.inventorySettings.lowStockThreshold}}x(N(0));function zo(e){const t=p.companies.find(n=>n.id===e);if(!t)throw new Error("Company not found");return t}function Ko(e,t){const n=p.companies.findIndex(o=>o.id===e);if(n===-1)throw new Error("Company not found");const r={...p.companies[n],businessName:t.businessName,rut:t.rut,businessActivity:t.businessActivity,address:t.address,commune:t.commune,phone:t.phone,email:t.email?.toLowerCase(),receiptFooterMessage:t.receiptFooterMessage,updatedAt:new Date().toISOString()};return p.companies=[...p.companies.slice(0,n),r,...p.companies.slice(n+1)],r}const Ho=["ROLE_ADMIN","ROLE_SALES","ROLE_SELLER","ROLE_PURCHASES","ROLE_BUYER","ROLE_INVENTORY","ROLE_FINANCE","ROLE_REPORTS","ROLE_SETTINGS"];function Nt(e){return{id:e.id,email:e.email,name:e.name,role:e.role,status:e.status,roles:[...e.roles],createdAt:e.createdAt}}function ts(e){if(!e||!e.trim())throw new Error("Email is required");return e.trim().toLowerCase()}function ns(e){if(!e||!e.trim())throw new Error("Name is required");return e.trim()}function ss(e){if(!e||!e.trim())return"active";const t=e.trim().toLowerCase();if(t==="active")return"active";if(t==="disabled"||t==="inactive")return"disabled";throw new Error(`Unsupported status: ${e}`)}function rs(e){const t=Array.isArray(e)&&e.length>0?e:["ROLE_ADMIN"],n=[];for(const s of t){if(!s||!s.trim())continue;let r=s.trim().toUpperCase();if(r.startsWith("ROLE_")||(r=`ROLE_${r}`),!Ho.includes(r))throw new Error(`Unsupported role: ${s}`);n.includes(r)||n.push(r)}return n.length===0&&n.push("ROLE_ADMIN"),n}function os(e,t){if(e&&e.trim())return e.trim();const n=t[0]??"ROLE_ADMIN";return n.startsWith("ROLE_")&&n.length>5?n.substring(5).toLowerCase():n.toLowerCase()}function as(e,t){const n=p.userAccounts.find(s=>s.email.toLowerCase()===e.toLowerCase());if(n&&n.id!==t)throw new Error("Email already registered")}function is(e){if(!e||e.trim().length<8)throw new Error("Password must be at least 8 characters long")}function Vo(){return p.userAccounts.map(e=>Nt(e))}function Qo(e){const t=ts(e.email);as(t);const n=ns(e.name),s=rs(e.roles??void 0),r=ss(e.status??void 0);is(e.password);const o={id:ne("usr-demo"),email:t,name:n,role:os(e.role??null,s),status:r,roles:s,createdAt:new Date().toISOString(),password:e.password};return p.userAccounts=[...p.userAccounts,o],Nt(o)}function Wo(e,t){const n=p.userAccounts.findIndex(u=>u.id===e);if(n===-1)throw new Error("User not found");const s=ts(t.email);as(s,e);const r=ns(t.name),o=rs(t.roles??void 0),a=ss(t.status??void 0),c={...p.userAccounts[n],email:s,name:r,role:os(t.role??null,o),status:a,roles:o};return p.userAccounts=[...p.userAccounts.slice(0,n),c,...p.userAccounts.slice(n+1)],Nt(c)}function Go(e,t){const n=p.userAccounts.findIndex(r=>r.id===e);if(n===-1)throw new Error("User not found");is(t.password);const s=p.userAccounts[n];p.userAccounts[n]={...s,password:t.password}}function Jo(e){const t=F(e?.q??""),n=e?.status??"active",s=p.products.filter(a=>n!=="all"&&a.active!==(n==="active")?!1:t?[a.name,a.sku,a.barcode,a.description].some(i=>nt(i,t)):!0),r=e?.page??0,o=e?.size??20;return ye(s,r,o)}function Yo(e,t){const n=F(e);if(!n)return null;const s=r=>F(r??"")===n;return p.products.find(r=>t==="barcode"?s(r.barcode??null):t==="sku"?s(r.sku):t==="qr"?s(r.qrUrl??null):!1)??null}function Xo(e){const t={id:ne("prd-demo"),sku:e.sku||`SKU-${Math.floor(Math.random()*9999)}`,name:e.name,description:e.description,category:e.category,barcode:e.barcode,imageUrl:e.imageUrl,qrUrl:void 0,stock:0,criticalStock:0,currentPrice:0,active:!0};return p.products=[t,...p.products],p.productPrices[t.id]=[],ue(),t}function Zo(e,t){const n=p.products.findIndex(r=>r.id===e);if(n===-1)throw new Error("Producto no encontrado");const s={...p.products[n],...t};return p.products=p.products.map((r,o)=>o===n?s:r),ue(),s}function ea(e,t){const n=p.products.findIndex(r=>r.id===e);if(n===-1)throw new Error("Producto no encontrado");const s={...p.products[n],active:t};return p.products=p.products.map((r,o)=>o===n?s:r),ue(),s}function ta(e){p.products=p.products.filter(t=>t.id!==e),delete p.productPrices[e],ue()}function ct(e){if(typeof e!="string")return;const t=e.trim();return t.length>0?t:void 0}function cs(e){const t={sku:e.sku.trim(),name:e.name.trim(),description:ct(e.description),category:ct(e.category),barcode:ct(e.barcode)};if(e.imageFile)t.imageUrl=null;else if(e.imageUrl===null)t.imageUrl=null;else if(typeof e.imageUrl=="string"){const n=e.imageUrl.trim();t.imageUrl=n.length>0?n:null}return t}function us(e,t){const n=new FormData;return n.append("product",new Blob([JSON.stringify(e)],{type:"application/json"})),t instanceof File&&n.append("image",t),n}function na(e){const t=[{lotId:`${e}-lot-1`,quantity:42,locationCode:"BC",locationName:"Bodega central",expDate:new Date(Date.now()+10368e6).toISOString()},{lotId:`${e}-lot-2`,quantity:18,locationCode:"TP",locationName:"Tienda principal",expDate:new Date(Date.now()+3888e6).toISOString()}],n=t.reduce((r,o)=>r+o.quantity,0),s=p.products.findIndex(r=>r.id===e);return s!==-1&&(p.products=p.products.map((r,o)=>o===s?{...r,stock:n}:r)),{productId:e,total:n,lots:t}}function sa(e,t){const n=p.products.findIndex(r=>r.id===e);if(n===-1)throw new Error("Producto no encontrado");const s={...p.products[n],criticalStock:t};return p.products=p.products.map((r,o)=>o===n?s:r),s}function ra(e){const t=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 120">
    <rect width="120" height="120" fill="#0b0d17" />
    <text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" fill="#ffffff" font-size="18">${e.slice(-4)}</text>
  </svg>`;return new Blob([t],{type:"image/svg+xml"})}function oa(e,t){const n=Xn(p.productPrices[e]).sort((s,r)=>r.validFrom.localeCompare(s.validFrom));return ye(n,t?.page??0,t?.size??n.length)}function aa(e,t){const n={id:ne("pp-demo"),productId:e,price:t.price,validFrom:t.validFrom??new Date().toISOString()},s=Xn(p.productPrices[e]);p.productPrices[e]=[n,...s];const r=p.products.findIndex(o=>o.id===e);if(r!==-1){const o={...p.products[r],currentPrice:t.price};p.products=p.products.map((a,i)=>i===r?o:a)}return n}function ia(){return p.suppliers}function ca(e){const t={id:ne("sup-demo"),name:e.name,rut:e.rut,address:e.address??null,commune:e.commune??null,businessActivity:e.businessActivity??null,phone:e.phone??null,email:e.email??null,createdAt:x(new Date)};return p.suppliers=[...p.suppliers,t],t}function ua(e,t){const n=p.suppliers.findIndex(r=>r.id===e);if(n===-1)throw new Error("Proveedor no encontrado");const s={...p.suppliers[n],...t};return p.suppliers=p.suppliers.map((r,o)=>o===n?s:r),s}function la(e){p.suppliers=p.suppliers.filter(t=>t.id!==e)}function da(e={}){const t=F(e.q??""),n=e.segment?.trim(),s=p.customers.filter(r=>{if(n&&n.length>0){if(n===wt){if(r.segment&&r.segment.trim())return!1}else if(F(r.segment)!==F(n))return!1}return t?[r.name,r.email,r.phone,r.address,r.document,r.commune].some(o=>nt(o,t)):!0});return ye(s,e.page??0,e.size??20)}function fa(e){const t={id:ne("cus-demo"),name:e.name,address:e.address,lat:e.lat??null,lng:e.lng??null,phone:e.phone,email:e.email,segment:e.segment,document:e.document??null,commune:e.commune??null};return p.customers=[t,...p.customers],t}function pa(e,t){const n=p.customers.findIndex(r=>r.id===e);if(n===-1)throw new Error("Cliente no encontrado");const s={...p.customers[n],...t,lat:t.lat??null,lng:t.lng??null};return p.customers=p.customers.map((r,o)=>o===n?s:r),s}function ha(e){p.customers=p.customers.filter(t=>t.id!==e)}function ma(){const e=new Map;for(const t of p.customers){const n=t.segment&&t.segment.trim()?t.segment:wt,s=n;if(!e.has(s)){const r=n===wt?"Sin segmentar":t.segment??"Sin segmentar";e.set(s,{code:s,name:r,segment:r,total:0,color:null})}e.get(s).total+=1}return Array.from(e.values())}function ls(e){return["PYMERP DEMO",`Documento: ${e.docType}`,`Venta: ${e.id}`,`Cliente: ${e.customer?.name??"Mostrador"}`,`Total: $${Number(e.total).toLocaleString("es-CL")}`,"Gracias por utilizar el modo demo"].join(`
`)}function ya(e={}){const t=F(e.search??""),n=p.sales.filter(s=>e.status&&e.status.trim()&&F(s.status)!==F(e.status)||e.docType&&e.docType.trim()&&F(s.docType)!==F(e.docType)||e.paymentMethod&&e.paymentMethod.trim()&&F(s.paymentMethod)!==F(e.paymentMethod)||e.from&&s.issuedAt<e.from||e.to&&s.issuedAt>e.to?!1:t?[s.docType,s.paymentMethod,s.customerName,s.customerId,s.id].filter(Boolean).some(r=>nt(String(r),t)):!0);return ye(n,e.page??0,e.size??20)}function ga(e){const t=p.saleDetails[e];if(!t)throw new Error("Venta no encontrada");return t}function ba(e){const t=ne("sal-demo"),n=e.items.reduce((u,l)=>u+l.qty*l.unitPrice-(l.discount??0),0),s=Math.round(n*.19),r=n-s,a=`${(e.docType||"DOC").slice(0,3).toUpperCase()}-${t.slice(-4).toUpperCase()}`,i={id:t,customerId:e.customerId,customerName:p.customers.find(u=>u.id===e.customerId)?.name,docNumber:a,docType:e.docType,paymentMethod:e.paymentMethod??"transferencia",status:"emitida",net:r,vat:s,total:n,issuedAt:new Date().toISOString()};p.sales=[i,...p.sales];const c={...i,docType:e.docType,paymentMethod:i.paymentMethod??"transferencia",customer:i.customerId?{id:i.customerId,name:i.customerName??"Cliente"}:null,items:e.items.map(u=>({productId:u.productId,productName:p.products.find(l=>l.id===u.productId)?.name??u.productId,qty:u.qty,unitPrice:u.unitPrice,discount:u.discount??0,lineTotal:u.qty*u.unitPrice-(u.discount??0)})),thermalTicket:""};return c.thermalTicket=ls(c),p.saleDetails[t]=c,{id:t,customerId:i.customerId,customerName:i.customerName,status:i.status,net:i.net,vat:i.vat,total:i.total,issuedAt:i.issuedAt,docType:i.docType??"Factura",paymentMethod:i.paymentMethod??"transferencia",docNumber:i.docNumber}}function ds(e,t){const n=p.sales.findIndex(o=>o.id===e);if(n===-1)throw new Error("Venta no encontrada");const s={...p.sales[n],...t};p.sales=p.sales.map((o,a)=>a===n?s:o);const r=p.saleDetails[e];return r&&(p.saleDetails[e]={...r,docType:s.docType??r.docType,docNumber:s.docNumber??r.docNumber,paymentMethod:s.paymentMethod??r.paymentMethod,status:s.status??r.status,thermalTicket:ls({...r,...s})}),{id:s.id,customerId:s.customerId,customerName:s.customerName,status:s.status,net:s.net,vat:s.vat,total:s.total,issuedAt:s.issuedAt,docType:s.docType??"Factura",paymentMethod:s.paymentMethod??"transferencia",docNumber:s.docNumber}}function va(e){return ds(e,{status:"cancelled"})}function wa(e=14){return p.salesDaily.slice(-e)}function Sa(e,t){return!e||!t||e>t?[]:p.salesDaily.filter(n=>n.date>=e&&n.date<=t)}function Pa(e){const t=e.trim(),n=/^(\d+)\s*d$/i.exec(t);if(!n)return 14;const s=Number.parseInt(n[1],10);return Number.isNaN(s)?14:Math.max(1,s)}function un(e,t){if(!e||!t)return null;const n=new Date(`${e}T00:00:00Z`),s=new Date(`${t}T00:00:00Z`);if(Number.isNaN(n.getTime())||Number.isNaN(s.getTime()))return null;const r=n.getTime(),o=s.getTime()+86399999;return r<=o?{start:r,end:o}:{start:o,end:r}}function Aa({from:e,to:t}){const n=un(e,t);if(!n)return{totalDay:0,topProduct:null,topPaymentMethods:[]};const s=new Set(["boleta","factura"]),r=p.sales.filter(h=>{if(!h.issuedAt||h.status==="cancelled")return!1;const w=F(h.docType);if(w&&!s.has(w))return!1;const A=new Date(h.issuedAt).getTime();return A>=n.start&&A<=n.end}),o=un(t,t),a=r.reduce((h,w)=>{if(!o)return h;const A=new Date(w.issuedAt).getTime();return A>=o.start&&A<=o.end?h+(w.total??0):h},0),i=new Map;r.forEach(h=>{(p.saleDetails[h.id]?.items??[]).forEach(m=>{const v=m.productId??m.productName;if(!v)return;const g=i.get(v)??{id:v,name:m.productName,qty:0};g.qty+=m.qty??0,g.name=m.productName,i.set(v,g)})});let c=null;i.forEach(h=>{(!c||h.qty>c.qty)&&(c=h)});const u=new Map;r.forEach(h=>{const w=h.paymentMethod?.trim().length?h.paymentMethod:"Sin mtodo";u.set(w,(u.get(w)??0)+1)});const l=Array.from(u.entries()).sort((h,w)=>w[1]-h[1]).map(([h,w])=>({method:h,count:w}));return{totalDay:a,topProduct:c,topPaymentMethods:l}}function Ea({from:e,to:t}){if(!e||!t||e>t)return{purchase:[],sale:[]};const n=p.purchaseDaily.filter(r=>r.date>=e&&r.date<=t).map(r=>({date:r.date,value:r.total})),s=p.salesDaily.filter(r=>r.date>=e&&r.date<=t).map(r=>({date:r.date,value:r.total}));return{purchase:n,sale:s}}function Ca(e){const t=Pa(e),n=wa(t),s=n.reduce((a,i)=>a+(i.total??0),0),r=n.reduce((a,i)=>a+(i.count??0),0),o=t>0?s/t:0;return{window:e,totalWithTax:s,dailyAverage:o,documentCount:r}}function xa(e){const t=new Date,n=new Date(t),s=new Date(t);switch(s.setHours(0,0,0,0),e){case"week":s.setDate(s.getDate()-6);break;case"month":s.setDate(1);break}const r=n.getTime(),o=s.getTime(),a=new Set(["boleta","factura"]),i=p.sales.filter(l=>{if(!l.issuedAt||l.status?.toLowerCase()==="cancelled")return!1;const h=F(l.docType);if(h&&!a.has(h))return!1;const w=new Date(l.issuedAt).getTime();return Number.isNaN(w)?!1:w>=o&&w<=r}),c=i.reduce((l,h)=>l+(h.total??0),0),u=i.reduce((l,h)=>l+(h.net??0),0);return{period:e,total:c,net:u,count:i.length}}function Oa(e,t=20){if(!e)return[];const n=t>0?t:20,s=new Map(p.products.map(o=>[o.id,o])),r=new Map;return Object.values(p.saleDetails).forEach(o=>{if(o.customer?.id!==e||o.status?.toLowerCase()==="cancelled")return;const a=o.issuedAt??new Date().toISOString();o.items.forEach(i=>{if(!i.productId)return;const c=s.get(i.productId),u=r.get(i.productId)??{productId:i.productId,name:c?.name??i.productName??i.productId,sku:c?.sku??"",totalPurchases:0,totalQty:0,lastPurchasedAt:a,lastUnitPrice:void 0,lastQty:void 0},l=Number(i.qty)||0;u.totalPurchases+=1,u.totalQty+=l;const h=new Date(u.lastPurchasedAt).getTime(),w=new Date(a).getTime();(!u.lastPurchasedAt||Number.isNaN(h)||w>=h)&&(u.lastPurchasedAt=a,u.lastUnitPrice=Number(i.unitPrice)||(c?.currentPrice?Number(c.currentPrice):void 0),u.lastQty=l>0?l:u.lastQty,u.name=c?.name??i.productName??u.name,u.sku=c?.sku??u.sku),r.set(i.productId,u)})}),Array.from(r.values()).sort((o,a)=>{if(a.totalPurchases!==o.totalPurchases)return a.totalPurchases-o.totalPurchases;const i=new Date(o.lastPurchasedAt).getTime();return new Date(a.lastPurchasedAt).getTime()-i}).slice(0,n).map(o=>({productId:o.productId,name:o.name,sku:o.sku,lastPurchasedAt:o.lastPurchasedAt,totalPurchases:o.totalPurchases,avgQty:o.totalPurchases>0?o.totalQty/o.totalPurchases:void 0,lastUnitPrice:o.lastUnitPrice,lastQty:o.lastQty}))}function Ra(e){return e.documentNumber&&e.documentNumber.trim()?e.documentNumber:e.docNumber&&e.docNumber.trim()?e.docNumber:e.series&&(e.folio??"")!==""?`${e.series}-${e.folio}`:e.id}function Ta(e={}){const t=e.size&&e.size>0?e.size:10,n=e.page??0,s=e.sort?.toLowerCase()??"date,desc",o=[...p.sales].sort((a,i)=>{const c=a.issuedAt??"",u=i.issuedAt??"";return s==="date,asc"?c.localeCompare(u):u.localeCompare(c)}).map(a=>({id:a.id,documentNumber:Ra(a),docNumber:a.docNumber,series:a.series,folio:a.folio,date:a.issuedAt,customerName:a.customerName??a.customerId??"",total:a.total,status:a.status,docType:a.docType,links:Bo(a.id)}));return ye(o,n,t)}function Na(e){return Tt(e,"preview")}function Da(e,t="OFFICIAL"){const n=t==="LOCAL"?"preview":"download",s=`${e}-${t.toLowerCase()}`;return Tt(s,n)}function ka(e={}){const t=F(e.search??""),n=p.purchases.filter(s=>e.status&&e.status.trim()&&F(s.status)!==F(e.status)||e.docType&&e.docType.trim()&&F(s.docType)!==F(e.docType)||e.from&&s.issuedAt<e.from||e.to&&s.issuedAt>e.to?!1:t?[s.docNumber,s.supplierName,s.supplierId].some(r=>nt(r,t)):!0);return ye(n,e.page??0,e.size??20)}function fs(e,t){const n=p.purchases.findIndex(r=>r.id===e);if(n===-1)throw new Error("Compra no encontrada");const s={...p.purchases[n],...t};return p.purchases=p.purchases.map((r,o)=>o===n?s:r),s}function Ia(e){return fs(e,{status:"cancelled"})}function Fa(e){const t=ne("pur-demo"),n={id:t,supplierId:e.supplierId,supplierName:p.suppliers.find(s=>s.id===e.supplierId)?.name,docType:e.docType,docNumber:e.docNumber,status:"received",net:e.net,vat:e.vat,total:e.total,issuedAt:e.issuedAt};return p.purchases=[n,...p.purchases],{id:t}}function La(e=14){return p.purchaseDaily.slice(-e)}function ja(e){return typeof e=="number"?p.inventoryAlerts.filter(t=>Number(t.qtyAvailable)<=e):p.inventoryAlerts}function Ma(){return ue(),p.inventorySummary}function _a(){return p.inventorySettings}function qa(e){return p.inventorySettings={lowStockThreshold:e.lowStockThreshold,updatedAt:new Date().toISOString()},ue(),p.inventorySettings}function Ua(e){const t=e.direction??"increase",n=t==="decrease"?-Math.abs(e.quantity):Math.abs(e.quantity),s=p.inventoryAlerts.findIndex(r=>r.productId===e.productId);if(s!==-1){const r=p.inventoryAlerts[s],o=Number(r.qtyAvailable)+n;p.inventoryAlerts[s]={...r,qtyAvailable:o,createdAt:new Date().toISOString(),expDate:e.expDate??r.expDate??null}}else t==="decrease"&&(p.inventoryAlerts=[...p.inventoryAlerts,{lotId:ne("lot-demo"),productId:e.productId,qtyAvailable:Math.max(0,e.quantity),createdAt:new Date().toISOString(),expDate:e.expDate??null}]);return ue(),{productId:e.productId,appliedQuantity:e.quantity,direction:t}}function st(e){return k.isAxiosError(e)&&!e.response}function ps(){return{token:Lo,expiresIn:86400,refreshToken:Jn,refreshExpiresIn:2592e3,companyId:tt,email:Rt,name:"Administrador Demo",roles:[...jo],modules:[...Mo]}}let Ve=null,Qe=et;const y=k.create({baseURL:Fo,timeout:1e4});y.interceptors.request.use(e=>{const t=e.headers??{};return Ve&&(t.Authorization=`Bearer ${Ve}`),Qe&&(t["X-Company-Id"]=Qe),e.headers=t,e});const wt="__UNASSIGNED__";function Ce(e){Object.prototype.hasOwnProperty.call(e,"token")&&(Ve=e.token??null),Object.prototype.hasOwnProperty.call(e,"companyId")&&(Qe=e.companyId??et),Object.prototype.hasOwnProperty.call(e,"refreshToken")&&e.refreshToken}function Ba(){Ve=null,Qe=et}async function $a(e){try{const{data:t}=await y.post("/v1/auth/login",e);return Ce({token:t.token,companyId:t.companyId,refreshToken:t.refreshToken}),t}catch(t){if(st(t)&&e.email===Rt&&e.password===Gn){const n=ps();return console.warn("Login API unreachable. Using local development session."),Ce({token:n.token,companyId:n.companyId,refreshToken:n.refreshToken}),n}throw t}}async function za(e){if(!e.refreshToken)throw new Error("Refresh token is required");try{const{data:t}=await y.post("/v1/auth/refresh",null,{headers:{"X-Refresh-Token":e.refreshToken}});return Ce({token:t.token,companyId:t.companyId,refreshToken:t.refreshToken}),t}catch(t){if(st(t)&&e.refreshToken===Jn){const n=ps();return console.warn("Refresh API unreachable. Keeping local development session active."),Ce({token:n.token,companyId:n.companyId,refreshToken:n.refreshToken}),n}throw t}}async function Ka(e){const t={rut:e.rut,fullName:e.fullName,address:e.address,email:e.email,companyName:e.companyName,password:e.password,confirmPassword:e.confirmPassword,captcha:e.captcha},{data:n}=await y.post("/v1/requests",t);return n}function Mi(e){return b("fetchCompany",async()=>{const{data:t}=await y.get(`/v1/companies/${e}`);return t},()=>zo(e))}function _i(e,t){return b("updateCompany",async()=>{const{data:n}=await y.put(`/v1/companies/${e}`,t);return n},()=>Ko(e,t))}function qi(){return b("listCompaniesWithDetails",async()=>{const{data:e}=await y.get("/v1/companies");return e},()=>[])}function Ui(e){return b("createCompanyWithDetails",async()=>{const{data:t}=await y.post("/v1/companies",e);return t},()=>({id:`company-${Date.now()}`,...e,parentLocations:e.parentLocations?.map((t,n)=>({id:`loc-${n}`,...t}))||[]}))}function Bi(e,t){return b("updateCompanyWithDetails",async()=>{const{data:n}=await y.put(`/v1/companies/${e}`,t);return n},()=>({id:e,...t,parentLocations:t.parentLocations?.map((n,s)=>({id:`loc-${s}`,...n}))||[]}))}function $i(e){return De("deleteCompanyWithDetails",async()=>{await y.delete(`/v1/companies/${e}`)},()=>Promise.resolve())}function zi(e){return b("getCompanyParentLocations",async()=>{const{data:t}=await y.get(`/v1/companies/${e}/parent-locations`);return t},()=>[])}function Ki(){return b("listUserAccounts",async()=>{const{data:e}=await y.get("/v1/users");return e},()=>Vo())}function Hi(e){return b("createUserAccount",async()=>{const{data:t}=await y.post("/v1/users",e);return t},()=>Qo(e))}function Vi(e,t){return b("updateUserAccount",async()=>{const{data:n}=await y.put(`/v1/users/${e}`,t);return n},()=>Wo(e,t))}function Qi(e,t){return De("updateUserPassword",async()=>{await y.post(`/v1/users/${e}/password`,t)},()=>Go(e,t))}function Wi(e){return b("listProducts",async()=>{const{data:t}=await y.get("/v1/products",{params:e});return t},()=>Jo(e))}function Gi(e){return b("lookupProduct",async()=>{try{const{data:t}=await y.get("/v1/products/lookup",{params:{q:e.query,type:e.type}});return t??null}catch(t){if(k.isAxiosError(t)&&t.response?.status===404)return null;throw t}},()=>Yo(e.query,e.type))}function Ji(e){const t=cs(e);return b("createProduct",async()=>{const n=us(t,e.imageFile??null),{data:s}=await y.post("/v1/products",n,{headers:{"Content-Type":"multipart/form-data"}});return s},()=>Xo(t))}function Yi(e,t){const n=cs(t);return b("updateProduct",async()=>{const s=us(n,t.imageFile??null),{data:r}=await y.put(`/v1/products/${e}`,s,{headers:{"Content-Type":"multipart/form-data"}});return r},()=>Zo(e,n))}function Xi(e,t){return b("updateProductStatus",async()=>{const{data:n}=await y.patch(`/v1/products/${e}/status`,{active:t});return n},()=>ea(e,t))}function Zi(e){return b("fetchProductStock",async()=>{const{data:t}=await y.get(`/v1/products/${e}/stock`);return t},()=>na(e))}function ec(e,t){return b("updateProductInventoryAlert",async()=>{const{data:n}=await y.patch(`/v1/products/${e}/inventory-alert`,{criticalStock:t});return n},()=>sa(e,t))}function tc(e,t){return b("fetchProductQrBlob",async()=>{const{data:n}=await y.get(`/v1/products/${e}/qr`,{responseType:"blob",params:t?.download?{download:!0}:void 0});return n},()=>ra(e))}function nc(e){return De("deleteProduct",()=>y.delete(`/v1/products/${e}`),()=>ta(e))}function sc(){return b("listLowStockProducts",async()=>{const{data:e}=await y.get("/v1/products/low-stock");return e},()=>[])}function rc(e){return b("listInventoryMovements",async()=>{const{data:t}=await y.get("/v1/inventory/movements",{params:e||{}});return t},()=>({content:[],totalElements:0,totalPages:0,size:20,number:0}))}async function oc(e,t){await y.post(`/v1/inventory/lots/${e}/transfer`,t)}function ac(e,t){return b("listSuppliers",async()=>{const n={};e&&(n.query=e),t!==void 0&&(n.active=t);const{data:s}=await y.get("/v1/suppliers",{params:Object.keys(n).length>0?n:void 0});return s},()=>ia())}function ic(e){return b("createSupplier",async()=>{const{data:t}=await y.post("/v1/suppliers",e);return t},()=>ca(e))}function cc(e,t){return b("updateSupplier",async()=>{const{data:n}=await y.put(`/v1/suppliers/${e}`,t);return n},()=>ua(e,t))}function uc(e){return De("deleteSupplier",()=>y.delete(`/v1/suppliers/${e}`),()=>la(e))}function lc(e){return b("listSupplierContacts",async()=>{const{data:t}=await y.get(`/v1/suppliers/${e}/contacts`);return t},()=>[])}function dc(e,t){return b("createSupplierContact",async()=>{const{data:n}=await y.post(`/v1/suppliers/${e}/contacts`,t);return n},()=>({id:crypto.randomUUID(),supplierId:e,...t}))}function fc(e,t){const n={};return y.get("/v1/suppliers/export",{params:Object.keys(n).length>0?n:void 0,responseType:"blob"}).then(s=>s.data)}async function pc(e){const t=new FormData;t.append("file",e);const{data:n}=await y.post("/v1/suppliers/import",t,{headers:{"Content-Type":"multipart/form-data"}});return n}function hc(e){return b("getSupplierMetrics",async()=>{const{data:t}=await y.get(`/v1/suppliers/${e}/metrics`);return t},()=>({totalPurchases:0,totalAmount:0,averageOrderValue:0,lastPurchaseDate:null,purchasesLastMonth:0,amountLastMonth:0,purchasesPreviousMonth:0,amountPreviousMonth:0}))}function mc(){return b("getSupplierAlerts",async()=>{const{data:e}=await y.get("/v1/suppliers/alerts");return e},()=>[])}function yc(e="volume"){return b("getSupplierRanking",async()=>{const{data:t}=await y.get("/v1/suppliers/ranking",{params:{criteria:e}});return t},()=>[])}function gc(){return b("getSupplierRiskAnalysis",async()=>{const{data:e}=await y.get("/v1/suppliers/risk-analysis");return e},()=>({categoryA:[],categoryB:[],categoryC:[],concentrationIndex:0,singleSourceProductsCount:0,totalPurchaseVolume:0}))}function bc(e,t){return b("getSupplierPriceHistory",async()=>{const{data:n}=await y.get(`/v1/suppliers/${e}/price-history`,{params:{productId:t}});return n},()=>({supplierId:e,supplierName:"Proveedor",productId:t,productName:"Producto",priceHistory:[],currentPrice:0,averagePrice:0,minPrice:0,maxPrice:0,trend:"STABLE",trendPercentage:0}))}function vc(){return b("getNegotiationOpportunities",async()=>{const{data:e}=await y.get("/v1/suppliers/negotiation-opportunities");return e},()=>[])}function wc(){return b("getSingleSourceProducts",async()=>{const{data:e}=await y.get("/v1/suppliers/single-source-products");return e},()=>[])}function Sc(e){return b(`getSupplierForecast-${e}`,async()=>{const{data:t}=await y.get(`/v1/suppliers/${e}/forecast`);return t},()=>({supplierId:e,supplierName:"Proveedor",monthlyForecasts:[],averageMonthlySpend:0,projectedNextMonthSpend:0,averageMonthlyOrders:0,trend:"STABLE",recommendation:""}))}function Pc(e={}){return b("listCustomers",async()=>{const t=e.page??0,n=e.size??20,s={page:t,size:n,sort:e.sort??"createdAt,desc"};e.q&&e.q.trim()&&(s.q=e.q.trim()),e.segment&&e.segment.trim()&&(s.segment=e.segment.trim());const{data:r}=await y.get("/v1/customers",{params:s}),o=r,a=o.content??o.items??[],i=o.size??n,c=typeof o.totalElements=="number"?o.totalElements:typeof o.total=="number"?o.total:a.length,u=typeof o.number=="number"?o.number:typeof o.page=="number"?o.page:t,l=typeof o.totalPages=="number"?o.totalPages:i>0?Math.ceil(c/i):0,h=typeof o.hasNext=="boolean"?o.hasNext:l>0?u+1<l:a.length===i;return{...o,content:a,size:i,totalElements:c,totalPages:l,number:u,hasNext:h}},()=>da(e))}function Ac(){return b("listCustomerSegments",async()=>{const{data:e}=await y.get("/v1/customer-segments/stats");return e},()=>ma())}function Ec(e){return b("createCustomer",async()=>{const{data:t}=await y.post("/v1/customers",e);return t},()=>fa(e))}function Cc(e,t){return b("updateCustomer",async()=>{const{data:n}=await y.put(`/v1/customers/${e}`,t);return n},()=>pa(e,t))}function xc(e){return De("deleteCustomer",()=>y.delete(`/v1/customers/${e}`),()=>ha(e))}async function Oc(e){const{data:t}=await y.get(`/v1/customers/${e}/stats`);return t}async function Rc(e,t=0,n=10){const{data:s}=await y.get(`/v1/customers/${e}/sales`,{params:{page:t,size:n}});return s}function Tc(e,t){return b("listProductPrices",async()=>{const{data:n}=await y.get(`/v1/products/${e}/prices`,{params:t});return n},()=>oa(e,t))}function Nc(e,t){return b("createProductPrice",async()=>{const{data:n}=await y.post(`/v1/products/${e}/prices`,t);return n},()=>aa(e,t))}function Dc(e={}){return b("listSales",async()=>{const{data:t}=await y.get("/v1/sales",{params:e});return t},()=>ya(e))}function kc(e,t){return b("updateSale",async()=>{const{data:n}=await y.put(`/v1/sales/${e}`,t);return n},()=>ds(e,t))}function Ic(e){return b("cancelSale",async()=>{const{data:t}=await y.post(`/v1/sales/${e}/cancel`,{});return t},()=>va(e))}function Fc(e){return b("getSaleDetail",async()=>{const{data:t}=await y.get(`/v1/sales/${e}`);return t},()=>ga(e))}function Lc(e){return b("getDashboardSalesMetrics",async()=>{const{data:t}=await y.get("/v1/sales/metrics",{params:e});return t},()=>Aa(e))}function jc(e){return b("getPurchaseSaleTrend",async()=>{const{data:t}=await y.get("/v1/trend",{params:e});return t},()=>Ea(e))}function Mc(e="14d"){const t=e&&e.trim().length>0?e:"14d";return b("getSalesWindowMetrics",async()=>{const{data:n}=await y.get("/v1/sales/metrics",{params:{window:t}});return n},()=>Ca(t))}function _c(e){return b("getSalesSummaryByPeriod",async()=>{const{data:t}=await y.get("/v1/sales/metrics/summary",{params:{period:e}});return t},()=>xa(e))}function qc(e){return e?b("getFrequentProducts",async()=>{const{data:t}=await y.get(`/v1/customers/${e}/frequent-products`,{params:{limit:20}});return t},()=>Oa(e,20)):Promise.resolve([])}function Uc(e={}){const{page:t=0,size:n=10,sort:s="date,DESC"}=e;return b("listSaleDocuments",async()=>{const{data:r}=await y.get("/v1/documents",{params:{type:"SALE",page:t,size:n,sort:s}});return r},()=>Ta({page:t,size:n,sort:s}))}function Bc(e){return b("getDocumentPreview",async()=>{const t=await y.get(`/v1/documents/${e}`,{responseType:"blob"});return Zn(t,`${e}.pdf`)},()=>Na(e))}function Ha(e,t={}){const{fallbackName:n="document.pdf",offlineId:s,version:r="OFFICIAL"}=t;return b("downloadDocument",async()=>{const o=await y.get(e,{responseType:"blob"});return Zn(o,n)},()=>{const a=Uo(e)??(s?{id:s,version:r}:null);return a?Da(a.id,a.version):Tt(n.replace(/\.pdf$/i,""),"download")})}function $c(e,t="OFFICIAL"){const n=`/v1/billing/documents/${e}/files/${t}`,s=`${e}-${t.toLowerCase()}.pdf`;return Ha(n,{fallbackName:s,offlineId:e,version:t})}function zc(e,t){return b("listSalesDailyByDateRange",async()=>{const{data:n}=await y.get("/v1/sales/metrics/daily-range",{params:{from:e,to:t}});return n},()=>Sa(e,t))}function Kc(e,t){return b("getSalesKPIs",async()=>{const n={},{data:s}=await y.get("/v1/sales/kpis",{params:n});return s},()=>({totalRevenue:0,totalCost:0,grossProfit:0,profitMargin:0,totalOrders:0,averageTicket:0,salesGrowth:0,uniqueCustomers:0,customerRetentionRate:0,topProductName:"N/A",topProductRevenue:0,topCustomerName:"N/A",topCustomerRevenue:0,conversionRate:0,periodStart:"",periodEnd:""}))}function Hc(e,t){return b("getSalesABCAnalysis",async()=>{const n={},{data:s}=await y.get("/v1/sales/abc-analysis",{params:n});return s},()=>[])}function Vc(e,t,n){return b("getSalesProductForecast",async()=>{const s={},{data:r}=await y.get("/v1/sales/forecast",{params:s});return r},()=>[])}function Qc(e){return b("createSale",async()=>{const{data:t}=await y.post("/v1/sales",e);return t},()=>ba(e))}async function Wc(e={}){return(await y.get("/v1/sales/export",{params:e,responseType:"blob"})).data}function Gc(e={}){return b("listPurchases",async()=>{const{data:t}=await y.get("/v1/purchases",{params:e});return t},()=>ka(e))}function Jc(e,t){return b("updatePurchase",async()=>{const{data:n}=await y.put(`/v1/purchases/${e}`,t);return n},()=>fs(e,t))}function Yc(e){return b("cancelPurchase",async()=>{const{data:t}=await y.post(`/v1/purchases/${e}/cancel`,{});return t},()=>Ia(e))}function Xc(e){return b("getPurchaseDetail",async()=>{const{data:t}=await y.get(`/v1/purchases/${e}/detail`);return t},()=>({id:e,issuedAt:new Date().toISOString(),docType:"Factura",paymentTermDays:30,status:"received",items:[],net:0,vat:0,total:0}))}function Zc(e,t){return b("getPurchaseKPIs",async()=>{const{data:n}=await y.get("/v1/purchases/kpis",{params:{from:e,to:t}});return n},()=>({totalSpent:0,totalQuantity:0,totalOrders:0,averageOrderValue:0,purchaseGrowth:0,uniqueSuppliers:0,supplierConcentration:0,topSupplierName:"N/A",topSupplierSpent:0,topCategoryName:"N/A",topCategorySpent:0,onTimeDeliveryRate:0,costPerUnit:0,pendingOrders:0,periodStart:"",periodEnd:""}))}function eu(e,t){return b("getPurchaseABCAnalysis",async()=>{const{data:n}=await y.get("/v1/purchases/abc-analysis",{params:{from:e,to:t}});return n},()=>[])}function tu(e,t,n){return b("getPurchaseSupplierForecast",async()=>{const{data:s}=await y.get("/v1/purchases/forecast",{params:{from:e,to:t,horizonDays:n}});return s},()=>[])}function nu(e=14){return b("listPurchaseDaily",async()=>{const{data:t}=await y.get("/v1/purchases/metrics/daily",{params:{days:e}});return t},()=>La(e))}function su(e,t){return b("createPurchase",async()=>{if(t){const n=new FormData;n.append("data",new Blob([JSON.stringify(e)],{type:"application/json"})),n.append("file",t);const{data:s}=await y.post("/v1/purchases",n,{headers:{"Content-Type":"multipart/form-data"}});return s}else{const{data:n}=await y.post("/v1/purchases",e);return n}},()=>Fa(e))}async function ru(e={}){return(await y.get("/v1/purchases/export",{params:e,responseType:"blob"})).data}async function ou(e){const t=new FormData;t.append("file",e);const{data:n}=await y.post("/v1/purchases/import",t,{headers:{"Content-Type":"multipart/form-data"}});return n}async function au(e){return b("listLocations",async()=>{const t={},{data:n}=await y.get("/api/locations",{params:t});return n},()=>[])}async function iu(e){return b("createLocation",async()=>{const{data:t}=await y.post("/api/locations",e);return t},()=>({id:crypto.randomUUID(),companyId:tt,code:e.code,name:e.name,description:e.description,type:e.type,parentLocationId:e.parentLocationId,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}))}async function cu(e){return b("deleteLocation",async()=>{await y.delete(`/api/locations/${e}`)},()=>{})}async function uu(){return b("getLocationStockSummary",async()=>{const{data:e}=await y.get("/api/locations/stock-summary");return e},()=>[])}async function lu(e){return b("listServices",async()=>{const t=e!==void 0?{active:e}:{},{data:n}=await y.get("/api/services",{params:t});return n},()=>[])}async function du(e){return b("createService",async()=>{const{data:t}=await y.post("/api/services",e);return t},()=>({id:crypto.randomUUID(),companyId:tt,...e,active:e.active??!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}))}async function fu(e,t){return b("updateService",async()=>{const{data:n}=await y.put(`/api/services/${e}`,t);return n},()=>({id:e,companyId:tt,...t,active:t.active??!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}))}async function pu(e){return b("deleteService",async()=>{await y.delete(`/api/services/${e}`)},()=>{})}function hu(e){return b("listInventoryAlerts",async()=>{const t=typeof e=="number"?{threshold:e}:{},{data:n}=await y.get("/v1/inventory/alerts",{params:t});return n},()=>ja(e))}function mu(){return b("getInventorySummary",async()=>{const{data:e}=await y.get("/v1/inventory/summary");return e},()=>Ma())}function yu(){return b("getInventorySettings",async()=>{const{data:e}=await y.get("/v1/inventory/settings");return e},()=>_a())}function gu(e){return b("updateInventorySettings",async()=>{const{data:t}=await y.put("/v1/inventory/settings",e);return t},()=>qa(e))}function bu(){return b("getInventoryKPIs",async()=>{const{data:e}=await y.get("/v1/inventory/kpis");return e},()=>({stockCoverageDays:null,turnoverRatio:0,deadStockValue:0,deadStockCount:0,averageLeadTimeDays:0,totalInventoryValue:0,activeProducts:0,criticalStockProducts:0,daysInventoryOnHand:null,overstockValue:0,overstockCount:0}))}function vu(){return b("getStockMovementStats",async()=>{const{data:e}=await y.get("/v1/inventory/movement-stats");return e},()=>({totalInflows:0,totalOutflows:0,inflowTransactions:0,outflowTransactions:0,topInflowProducts:[],topOutflowProducts:[],categoryVelocities:[]}))}function wu(e){return b("getABCAnalysis",async()=>{const t={},{data:n}=await y.get("/v1/inventory/abc-analysis",{params:t});return n},()=>[])}function Su(e,t){return b("getForecastAnalysis",async()=>{const n={},{data:s}=await y.get("/v1/inventory/forecast",{params:n});return s},()=>[])}function Pu(e){return b("createInventoryAdjustment",async()=>{const{data:t}=await y.post("/v1/inventory/adjustments",e);return t},()=>Ua(e))}async function Au(){const{data:e}=await y.get("/v1/finances/summary");return e}async function Eu(e){const{data:t}=await y.get("/v1/finances/receivables",{params:e});return t}async function Cu(e){const{data:t}=await y.get("/v1/finances/payables",{params:e});return t}async function xu(e=30){const{data:t}=await y.get("/v1/finances/cashflow",{params:{days:e}});return t}const St="pymes.auth.session",hs=S.createContext(void 0);function Va(){try{const e=localStorage.getItem(St);if(!e)return null;const t=JSON.parse(e),n={...t,modules:Array.isArray(t.modules)?t.modules:[]};if(!n?.token||!n?.expiresAt||!n?.refreshToken||!n?.refreshExpiresAt)return null;const s=Date.now();return n.expiresAt<=s||n.refreshExpiresAt<=s?null:n}catch{return null}}function ln(e){if(!e){localStorage.removeItem(St);return}localStorage.setItem(St,JSON.stringify(e))}function Qa({children:e}){const[t,n]=S.useState(()=>Va());S.useEffect(()=>{t?(Ce({token:t.token,companyId:t.companyId,refreshToken:t.refreshToken}),ln(t)):(Ba(),ln(null))},[t]);const s=S.useCallback(async i=>{const c=await $a(i),u=Date.now(),l={...c,modules:Array.isArray(c.modules)?c.modules:[],expiresAt:u+c.expiresIn*1e3,refreshExpiresAt:u+c.refreshExpiresIn*1e3};n(l)},[]),r=S.useCallback(()=>{n(null)},[]),o=S.useCallback(async()=>{if(!t)return;const i={refreshToken:t.refreshToken},c=await za(i),u=Date.now(),l={...c,modules:Array.isArray(c.modules)?c.modules:[],expiresAt:u+c.expiresIn*1e3,refreshExpiresAt:u+c.refreshExpiresIn*1e3};n(l)},[t]);S.useEffect(()=>{if(!t)return;const i=Date.now();if(t.refreshExpiresAt<=i){n(null);return}const c=Math.max(t.expiresAt-i-6e4,5e3),u=window.setTimeout(()=>{o().catch(()=>n(null))},c);return()=>window.clearTimeout(u)},[t,o]);const a=S.useMemo(()=>({session:t,isAuthenticated:!!t,login:s,logout:r}),[t,s,r]);return f.jsx(hs.Provider,{value:a,children:e})}function Dt(){const e=S.useContext(hs);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}const Ae="/assets/logo-BW3rfr0A.png",Pt=[{to:"/app",label:"Panel",icon:"DB",module:"dashboard"},{to:"/app/sales",label:"Ventas",icon:"VE",module:"sales"},{to:"/app/purchases",label:"Compras",icon:"CO",module:"purchases"},{to:"/app/inventory",label:"Inventario",icon:"IN",module:"inventory"},{to:"/app/customers",label:"Clientes",icon:"CL",module:"customers"},{to:"/app/suppliers",label:"Proveedores",icon:"PR",module:"suppliers"},{to:"/app/finances",label:"Finanzas",icon:"FI",module:"finances"},{to:"/app/reports",label:"Reportes",icon:"RP",module:"reports"},{to:"/app/settings",label:"Configuracion",icon:"CF",module:"settings"}];function Wa(){const{session:e,logout:t}=Dt(),[n,s]=S.useState(!1),r=pn(),o=S.useMemo(()=>r.pathname.length>1&&r.pathname.endsWith("/")?r.pathname.replace(/\/+$/,""):r.pathname,[r.pathname]),a=S.useMemo(()=>{const c=new Set(e?.modules??[]);return c.add("dashboard"),c},[e?.modules]),i=S.useMemo(()=>!a||a.size===0?Pt:Pt.filter(c=>a.has(c.module)),[a]);return f.jsxs("div",{className:"layout",children:[f.jsxs("aside",{className:`sidebar ${n?"open":""}`,children:[f.jsxs("div",{className:"sidebar-header",children:[f.jsx("img",{src:Ae,alt:"Logo empresa",className:"brand-logo brand-logo--sidebar"}),f.jsx("button",{className:"icon-btn mobile-only",onClick:()=>s(!1),"aria-label":"Cerrar menu",children:"Close"})]}),f.jsx("nav",{children:i.map(c=>{const u=c.to==="/app",l=o===c.to||!u&&o.startsWith(c.to);return f.jsxs(vs,{to:c.to,className:`nav-item ${l?"active":""}`,onClick:()=>s(!1),end:u,children:[f.jsx("span",{className:"nav-icon","aria-hidden":!0,children:c.icon}),f.jsx("span",{children:c.label})]},c.to)})})]}),f.jsxs("div",{className:"content",children:[f.jsxs("header",{className:"topbar",children:[f.jsxs("div",{className:"topbar-left",children:[f.jsx("button",{className:"icon-btn desktop-hidden",onClick:()=>s(!0),"aria-label":"Abrir menu",children:"Menu"}),f.jsxs("div",{className:"topbar-brand",children:[f.jsx("img",{src:Ae,alt:"Logo empresa",className:"brand-logo brand-logo--topbar"}),f.jsx("p",{className:"muted small",children:"Control integral de operaciones y finanzas"})]})]}),f.jsxs("div",{className:"topbar-right",children:[f.jsx("span",{className:"muted small hide-mobile",children:e?.email}),f.jsx("button",{className:"btn ghost",onClick:t,children:"Salir"})]})]}),f.jsx("main",{className:"page",children:f.jsx(hn,{})})]})]})}function Ga(e){const t=e.replace(/\./g,"").replace(/-/g,"").trim().toUpperCase();if(t.length<=1)return t;const n=t.slice(0,-1),s=t.slice(-1);return`${n}-${s}`}function Ja(e){if(!e)return!1;const t=e.replace(/\./g,"").replace(/-/g,"").trim().toUpperCase();if(!/^\d{7,8}[0-9K]$/.test(t))return!1;const n=t.slice(0,-1),s=t.slice(-1);return Ya(n)===s}function Ya(e){let t=0,n=2;for(let r=e.length-1;r>=0;r-=1)t+=parseInt(e[r],10)*n,n=n===7?2:n+1;const s=11-t%11;return s===11?"0":s===10?"K":String(s)}const dn="Muchas gracias! Te contactaremos lo antes posible. PYMERP.cl",de="true".toLowerCase()!=="false",ut={rut:"",fullName:"",address:"",email:"",companyName:"",password:"",confirmPassword:""};function fe(){const e=Math.floor(Math.random()*7)+3,t=Math.floor(Math.random()*6)+2;return{a:e,b:t}}function Xa({children:e,forceLoginOnMount:t=!1,onLoginClose:n}){const{login:s,isAuthenticated:r}=Dt(),o=mn(),[a,i]=S.useState(!0),[c,u]=S.useState("none"),[l,h]=S.useState({email:"",password:""}),[w,A]=S.useState(null),[m,v]=S.useState(0),[g,O]=S.useState(0),[C,R]=S.useState(ut),[I,D]=S.useState(null),[$,_]=S.useState(dn),[M,V]=S.useState(()=>fe()),[ge,Q]=S.useState(""),se=S.useRef(null),X=S.useRef(null),W=S.useRef(null),be=S.useRef("none"),B=S.useRef(!1),re=Bt({mutationFn:P=>s(P),onSuccess:()=>{A(null),v(0),O(0),u("none"),o("/app")},onError:P=>{if(k.isAxiosError(P))if(!P.response)A("No se pudo conectar con el servidor. Intenta nuevamente.");else{const T=P.response.data?.detail??P.response.data?.message??"Credenciales invlidas";A(T)}else A(P.message);v(T=>{const ee=T+1;if(ee>=3){const we=Math.min(30,(ee-2)*5);O(Le=>Math.max(Le,we))}return ee})}}),z=Bt({mutationFn:Ka,onSuccess:P=>{D(null),_(P?.message??dn),u("success"),R(ut),V(fe()),Q("")},onError:P=>{if(V(fe()),Q(""),k.isAxiosError(P)){const T=P.response?.data,ee=T?.detail??T?.message??T?.error;D(ee??"No se pudo enviar la solicitud. Intenta nuevamente ms tarde.")}else D(P.message)}});S.useEffect(()=>{r?(h({email:"",password:""}),A(null)):(i(!0),u("none"))},[r]),S.useEffect(()=>{if(!t){B.current=!1;return}i(!0),u("login"),B.current=!0},[t]),S.useEffect(()=>{c==="login"&&(se.current??X.current)?.focus(),c==="request"&&W.current?.focus()},[c]),S.useEffect(()=>{if(c==="none")return;const P=T=>{T.key==="Escape"&&(T.preventDefault(),c==="request"?u("login"):c==="login"?u("none"):c==="success"&&(u(r?"none":"login"),r&&i(!1)))};return window.addEventListener("keydown",P),()=>window.removeEventListener("keydown",P)},[c,r]),S.useEffect(()=>{de||Q(String(M.a+M.b))},[M]),S.useEffect(()=>{if(g<=0)return;const P=window.setInterval(()=>{O(T=>T<=1?0:T-1)},1e3);return()=>window.clearInterval(P)},[g]);const ke=S.useMemo(()=>r?"Haz clic aqu para acceder y entrar.":"Haz clic para iniciar sesin",[r]),Ie=()=>{c==="none"&&(r?(i(!1),o("/app")):o("/login"))},G=P=>{c==="none"?(P.preventDefault(),Ie()):P.stopPropagation()},Z=async P=>{P.preventDefault(),!(re.isPending||g>0)&&(A(null),await re.mutateAsync({email:l.email.trim(),password:l.password}))},ve=P=>{P.preventDefault(),D(null);const T=Ga(C.rut);if(!Ja(T)){D("El RUT ingresado no es vlido"),V(fe()),Q("");return}if(C.password!==C.confirmPassword){D("Las contraseas no coinciden");return}const ee=M.a+M.b,we=ge.trim();if(de){const Le=Number.parseInt(we,10);if(!we||Number.isNaN(Le)||Le!==ee){D("Debes resolver el captcha correctamente"),V(fe()),Q("");return}}z.mutate({rut:T,fullName:C.fullName.trim(),address:C.address.trim(),email:C.email.trim().toLowerCase(),companyName:C.companyName.trim(),password:C.password,confirmPassword:C.confirmPassword,captcha:{a:M.a,b:M.b,answer:de?we:String(ee)}})},le=()=>{D(null),R(ut),V(fe()),Q(""),u("request")},Fe=()=>{u("login")},ms=()=>{u(r?"none":"login"),r&&i(!1)};return S.useEffect(()=>{!r&&be.current==="login"&&c==="none"&&n?.(),be.current=c},[c,n,r]),f.jsxs(f.Fragment,{children:[e,a&&f.jsxs("div",{className:"landing-overlay",onClick:Ie,role:"presentation",children:[f.jsx("div",{className:"landing-overlay__gradient"}),f.jsxs("div",{className:`landing-overlay__panel ${c==="none"?"landing-overlay__panel--compact":""}`,onClick:G,children:[c==="none"&&f.jsxs("div",{className:"landing-welcome","aria-live":"polite",children:[f.jsx("img",{src:Ae,alt:"PYMERP",className:"landing-logo"}),f.jsx("p",{className:"landing-hint",children:ke})]}),c==="login"&&f.jsxs("div",{className:"landing-card",role:"dialog","aria-modal":"true","aria-labelledby":"landing-login-title",children:[f.jsx("img",{src:Ae,alt:"PYMERP",className:"landing-logo landing-logo--small"}),f.jsx("h1",{id:"landing-login-title",children:"Iniciar sesin"}),f.jsx("p",{className:"landing-subtitle",children:"Bienvenid@! Ingresa tus credenciales para acceder."}),f.jsxs("form",{className:"landing-form",onSubmit:Z,children:[f.jsxs("label",{className:"landing-label",children:[f.jsx("span",{children:"Email"}),f.jsx("input",{ref:se,type:"email",autoComplete:"email",required:!0,value:l.email,onChange:P=>h(T=>({...T,email:P.target.value}))})]}),f.jsxs("label",{className:"landing-label",children:[f.jsx("span",{children:"Contrasea"}),f.jsx("input",{ref:X,type:"password",autoComplete:"current-password",required:!0,value:l.password,onChange:P=>h(T=>({...T,password:P.target.value}))})]}),w&&f.jsx("p",{className:"landing-error",role:"alert","aria-live":"assertive",children:w}),f.jsx("button",{className:"landing-button",type:"submit",disabled:re.isPending||g>0,children:re.isPending?"Ingresando...":g>0?`Reintentar en ${g}s`:"Entrar"}),g>0&&f.jsxs("p",{className:"landing-hint",role:"status","aria-live":"polite",children:["Demasiados intentos fallidos. Espera ",g,"s antes de reintentar."]})]}),f.jsx("button",{type:"button",className:"landing-link",onClick:le,children:"No tienes cuenta o tienes problemas para acceder? Haz clic aqu"})]}),c==="request"&&f.jsxs("div",{className:"landing-card",role:"dialog","aria-modal":"true","aria-labelledby":"landing-request-title",children:[f.jsxs("div",{className:"landing-card__header",children:[f.jsx("h1",{id:"landing-request-title",children:"Solicitud de registro o recuperacin de cuenta"}),f.jsx("button",{type:"button",className:"landing-close","aria-label":"Cerrar",onClick:Fe,children:""})]}),f.jsx("p",{className:"landing-subtitle",children:"Completa los datos para registro/recuperacin."}),f.jsxs("form",{className:"landing-form",onSubmit:ve,children:[f.jsxs("label",{className:"landing-label",children:[f.jsx("span",{children:"RUT"}),f.jsx("input",{ref:W,value:C.rut,onChange:P=>R(T=>({...T,rut:P.target.value})),required:!0})]}),f.jsxs("label",{className:"landing-label",children:[f.jsx("span",{children:"Nombre completo"}),f.jsx("input",{value:C.fullName,onChange:P=>R(T=>({...T,fullName:P.target.value})),required:!0})]}),f.jsxs("label",{className:"landing-label",children:[f.jsx("span",{children:"Direccin"}),f.jsx("input",{value:C.address,onChange:P=>R(T=>({...T,address:P.target.value})),required:!0})]}),f.jsxs("label",{className:"landing-label",children:[f.jsx("span",{children:"Email"}),f.jsx("input",{type:"email",value:C.email,onChange:P=>R(T=>({...T,email:P.target.value})),required:!0})]}),f.jsxs("label",{className:"landing-label",children:[f.jsx("span",{children:"Nombre de la empresa"}),f.jsx("input",{value:C.companyName,onChange:P=>R(T=>({...T,companyName:P.target.value})),required:!0})]}),f.jsxs("label",{className:"landing-label",children:[f.jsx("span",{children:"Contrasea"}),f.jsx("input",{type:"password",value:C.password,onChange:P=>R(T=>({...T,password:P.target.value})),required:!0,minLength:8})]}),f.jsxs("label",{className:"landing-label",children:[f.jsx("span",{children:"Repetir contrasea"}),f.jsx("input",{type:"password",value:C.confirmPassword,onChange:P=>R(T=>({...T,confirmPassword:P.target.value})),required:!0,minLength:8})]}),f.jsxs("label",{className:"landing-label landing-captcha",children:[f.jsxs("span",{className:"landing-captcha__label",children:["Captcha: Cunto es ",M.a," + ",M.b,"?"]}),f.jsx("input",{inputMode:"numeric",pattern:"\\\\d*",value:ge,onChange:P=>Q(P.target.value.replace(/[^0-9]/g,"")),required:de,"aria-required":de,"aria-label":`Captcha: Cunto es ${M.a} + ${M.b}?`})]}),!de&&f.jsx("p",{className:"landing-captcha__label",role:"status",children:"Captcha deshabilitado en este entorno (respuesta enviada automticamente)."}),I&&f.jsx("p",{className:"landing-error",role:"alert","aria-live":"assertive",children:I}),f.jsx("button",{className:"landing-button",type:"submit",disabled:z.isPending,children:z.isPending?"Enviando...":"Enviar solicitud"})]})]}),c==="success"&&f.jsxs("div",{className:"landing-card",role:"dialog","aria-modal":"true","aria-labelledby":"landing-success-title",children:[f.jsx("img",{src:Ae,alt:"PYMERP",className:"landing-logo landing-logo--small"}),f.jsx("h1",{id:"landing-success-title",children:"Solicitud enviada"}),f.jsx("p",{className:"landing-subtitle",children:$}),f.jsx("button",{className:"landing-button",type:"button",onClick:ms,children:r?"Ir al panel":"Volver al inicio de sesin"})]})]})]})]})}function fn(){return f.jsx("div",{className:"landing-placeholder","aria-hidden":!0})}const Za=S.lazy(()=>Y(()=>import("./DashboardPage-BAyT_4Yb.js"),__vite__mapDeps([0,1,2,3,4]))),ei=S.lazy(()=>Y(()=>import("./SalesPage-Bf9lCKAP.js"),__vite__mapDeps([5,1,2,3,6,7,8,9,10,11,4]))),ti=S.lazy(()=>Y(()=>import("./PurchasesPage-DVp-T4iM.js"),__vite__mapDeps([12,1,2,3,6,4,11,10,8]))),ni=S.lazy(()=>Y(()=>import("./InventoryPage-chaD6y0s.js"),__vite__mapDeps([13,1,2,3,6,11,4]))),si=S.lazy(()=>Y(()=>import("./InventoryMovementsPage-DIymsVov.js"),__vite__mapDeps([14,1,2,3]))),ri=S.lazy(()=>Y(()=>import("./CustomersPage-Bku7UpQ_.js"),__vite__mapDeps([15,1,2,3,7,10,6,11,4]))),oi=S.lazy(()=>Y(()=>import("./SuppliersPage-CjOYU5jW.js"),__vite__mapDeps([16,1,3,2,9,6]))),ai=S.lazy(()=>Y(()=>import("./FinancesPage-BU7eDD8A.js"),__vite__mapDeps([17,3,1,4]))),ii=S.lazy(()=>Y(()=>import("./ReportsPage-UJ0D2phP.js"),__vite__mapDeps([18,3,1]))),ci=S.lazy(()=>Y(()=>import("./SettingsPage-CkCNzoqR.js"),__vite__mapDeps([19,3,1,2,9,6]))),ui=[{index:!0,module:"dashboard",element:f.jsx(Za,{})},{path:"sales",module:"sales",element:f.jsx(ei,{})},{path:"purchases",module:"purchases",element:f.jsx(ti,{})},{path:"inventory",module:"inventory",element:f.jsx(ni,{})},{path:"inventory/movements",module:"inventory",element:f.jsx(si,{})},{path:"customers",module:"customers",element:f.jsx(ri,{})},{path:"suppliers",module:"suppliers",element:f.jsx(oi,{})},{path:"finances",module:"finances",element:f.jsx(ai,{})},{path:"reports",module:"reports",element:f.jsx(ii,{})},{path:"settings",module:"settings",element:f.jsx(ci,{})}];function li(){const{isAuthenticated:e,session:t}=Dt(),n=t?.modules??[],s=S.useMemo(()=>{const o=new Set(n);return o.add("dashboard"),o},[n]),r=S.useMemo(()=>{const o=Pt.find(a=>s.has(a.module));return o?o.to:"/app"},[s]);return f.jsx(S.Suspense,{fallback:f.jsx("div",{className:"page",children:f.jsx("p",{children:"Cargando..."})}),children:f.jsxs(ws,{children:[f.jsxs(te,{element:f.jsx(fi,{}),children:[f.jsx(te,{index:!0,element:f.jsx(fn,{})}),f.jsx(te,{path:"login",element:f.jsx(fn,{})}),f.jsxs(te,{path:"app",element:e?f.jsx(Wa,{}):f.jsx(je,{to:"/",replace:!0}),children:[ui.map(o=>{const a=s.has(o.module)?o.element:f.jsx(je,{to:r,replace:!0});return o.index?f.jsx(te,{index:!0,element:a},"index"):f.jsx(te,{path:o.path,element:a},o.path)}),f.jsx(te,{path:"*",element:f.jsx(je,{to:r,replace:!0})})]})]}),f.jsx(te,{path:"*",element:f.jsx(je,{to:e?r:"/",replace:!0})})]})})}function di(){return f.jsx(li,{})}function fi(){const e=pn(),t=mn(),n=e.pathname==="/login",s=()=>t("/",{replace:!0});return f.jsx(Xa,{forceLoginOnMount:n,onLoginClose:n?s:void 0,children:f.jsx(hn,{})})}const pi=new er;Os.createRoot(document.getElementById("root")).render(f.jsx(Ss.StrictMode,{children:f.jsx(nr,{client:pi,children:f.jsx(Ps,{children:f.jsx(Qa,{children:f.jsx(di,{})})})})}));export{Tc as $,kc as A,Dc as B,_c as C,Fc as D,ic as E,su as F,lu as G,ac as H,ou as I,Zc as J,eu as K,tu as L,Gc as M,nu as N,Yc as O,Jc as P,ru as Q,Xc as R,Yi as S,Ji as T,k as U,tc as V,oc as W,Nc as X,nc as Y,Xi as Z,ec as _,jc as a,ks as a$,Zi as a0,Dt as a1,iu as a2,cu as a3,zi as a4,uu as a5,du as a6,fu as a7,pu as a8,Pu as a9,bc as aA,vc as aB,wc as aC,Sc as aD,fc as aE,pc as aF,Au as aG,Eu as aH,Cu as aI,xu as aJ,_i as aK,Mi as aL,Hi as aM,Vi as aN,Qi as aO,Ki as aP,Ui as aQ,Bi as aR,$i as aS,qi as aT,xe as aU,zs as aV,Fs as aW,js as aX,dt as aY,K as aZ,We as a_,mu as aa,bu as ab,vu as ac,wu as ad,Su as ae,gu as af,yu as ag,hu as ah,rc as ai,xc as aj,Oc as ak,Rc as al,Cc as am,wt as an,Ac as ao,Ut as ap,gi as aq,yi as ar,dc as as,lc as at,uc as au,cc as av,mc as aw,hc as ax,yc as ay,gc as az,qc as b,Is as b0,lt as b1,bn as b2,Gs as b3,_s as b4,L as b5,Bs as b6,Bt as c,Ec as d,Pc as e,Gi as f,Lc as g,Qc as h,Ja as i,f as j,Wi as k,sc as l,au as m,Ga as n,Mc as o,zc as p,mi as q,Uc as r,Wc as s,Kc as t,tr as u,Hc as v,Vc as w,$c as x,Ic as y,Bc as z};
