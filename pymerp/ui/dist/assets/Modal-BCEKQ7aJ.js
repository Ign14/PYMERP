import{j as a}from"./index-OfXnknKF.js";import{r as o}from"./react-DFcFNn96.js";function p({open:e,title:c,onClose:t,children:x,initialFocusRef:u,className:d}){const n=o.useRef(null),f=o.useId();return o.useEffect(()=>{if(!e)return;const s=r=>{if(r.key==="Escape"){r.preventDefault(),t();return}if(r.key!=="Tab")return;const i=h(n.current);if(i.length===0){r.preventDefault();return}const m=i[0],b=i[i.length-1],l=document.activeElement;r.shiftKey?(l===m||!n.current?.contains(l))&&(r.preventDefault(),b.focus()):l===b&&(r.preventDefault(),m.focus())};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[e,t]),o.useEffect(()=>{if(!e)return;const s=u?.current??n.current?.querySelector("[data-autofocus]")??h(n.current)[0];s&&requestAnimationFrame(()=>s.focus())},[e,u]),e?a.jsx("div",{className:"modal-backdrop",role:"presentation",children:a.jsxs("div",{className:d?`modal ${d}`:"modal",role:"dialog","aria-modal":"true","aria-labelledby":f,ref:n,children:[a.jsxs("header",{className:"modal-header",children:[a.jsx("h2",{id:f,children:c}),a.jsx("button",{className:"icon-btn",onClick:t,"aria-label":"Cerrar",children:"Ã—"})]}),a.jsx("div",{className:"modal-body",children:x})]})}):null}function h(e){if(!e)return[];const c=["button","[href]","input","select","textarea","[tabindex]:not([tabindex='-1'])"];return Array.from(e.querySelectorAll(c.join(","))).filter(t=>!t.hasAttribute("disabled")&&!t.getAttribute("aria-hidden"))}export{p as M};
