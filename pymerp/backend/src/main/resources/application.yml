server:
  port: 8080

spring:
  datasource:
    url: jdbc:postgresql://${POSTGRES_HOST:localhost}:${POSTGRES_PORT:55432}/${POSTGRES_DB:pymes}
    username: ${POSTGRES_USER:pymes}
    password: ${POSTGRES_PASSWORD:pymes}
  jpa:
    hibernate:
      ddl-auto: validate
    open-in-view: false
    properties:
      hibernate:
        jdbc.time_zone: UTC
        format_sql: true
        dialect: org.hibernate.dialect.PostgreSQLDialect
  flyway:
    enabled: true
    baseline-on-migrate: true
  redis:
    host: ${REDIS_HOST:localhost}
    port: ${REDIS_PORT:6379}
  mail:
    host: ${MAIL_HOST:localhost}
    port: ${MAIL_PORT:1025}
    username: ${MAIL_USERNAME:}
    password: ${MAIL_PASSWORD:}
    properties:
      mail:
        smtp:
          auth: ${MAIL_SMTP_AUTH:false}
          starttls.enable: ${MAIL_SMTP_STARTTLS_ENABLE:false}
    default-encoding: UTF-8

billing:
  crypto:
    secret: ${BILLING_CRYPTO_SECRET:MDEyMzQ1Njc4OUFCQ0RFRjAxMjM0NTY3ODlBQkNERUY=}
  webhook:
    secret: ${BILLING_WEBHOOK_SECRET:change-me}
    tolerance: PT5M
  offline:
    enabled: true
    legend: "Emitido en contingencia; sujeto a validaci√≥n"
    retry:
      maxAttempts: 5
      backoffMs: 60000
  pdf:
    documents-base-url: ${BILLING_DOCUMENTS_BASE_URL:http://localhost:8080/api/v1}
    branding:
      primary-color: "#1f2937"
      accent-color: "#2563eb"
      text-color: "#111827"
      table-header-color: "#e5e7eb"

management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  endpoint:
    health:
      show-details: always

app:
  tenancy:
    default-company-id: 00000000-0000-0000-0000-000000000001
  cors:
    allowed-origins:
      - http://localhost:5173
      - http://localhost:5174
    allowed-origin-patterns:
      - http://localhost:*
      - http://127.0.0.1:*
      - http://0.0.0.0:*
  security:
    jwt:
      secret: change-this-dev-secret-at-least-32-chars-long
      expiration-seconds: 86400
      refresh-expiration-seconds: 2592000
    captcha:
      enabled: true
      min-operand: 2
      max-operand: 10

storage:
  s3:
    bucket: ${STORAGE_S3_BUCKET:change-me-bucket}
    access-key: ${STORAGE_S3_ACCESS_KEY:CHANGEMEACCESS}
    secret-key: ${STORAGE_S3_SECRET_KEY:CHANGEMESECRET}
    region: ${STORAGE_S3_REGION:us-east-1}

webhooks:
  hmac:
    secret: ${WEBHOOKS_HMAC_SECRET:CHANGE_ME_HMAC_SECRET}
